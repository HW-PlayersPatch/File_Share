--
--  Generated\Mission04.c
--
--  Finite state machine routines for "Mission04" mission
--
--  Copyright (C) 1998 Relic Entertainment Inc.
--  All rights reserved
--
--  This code was autogenerated from Mission04.kp by KAS2C Version 2.05
--


--#include "Generated\Mission04.h"  -- prototypes and #includes for exposed game functions

--extern AITeam *CurrentTeamP;
--#define kasThisTeamPtr CurrentTeamP

--  for run-time scoping of symbols (variables, timers, etc.)

-- List of ignored functions (stubbed out to ignoredFunction()):
--kasfSoundEvent


dofilepath("data:scripts/SCAR/SCAR_Util.lua")             --stock HW2 scripting utilities
dofilepath("data:scripts/SCAR/KASUtil.lua")               --HW1->HW2 scripting utilities
dofilepath("data:scripts/SCAR/SinglePlayerFlow.lua")      --Emulation of HW1 singleplayer functionality
dofilepath("data:scripts/SCAR/SinglePlayerNIS.lua")       --Emulation of HW1 singleplayer NIS functionality
dofilepath("data:scripts/SCAR/SinglePlayerHyperspace.lua")--Emulation of HW1 hyperspace logic
dofilepath("data:scripts/SCAR/SpecialFlags.lua")          --Emulation of HW1 SPECIAL_xxx logic


--kas global variables, including variables used in ifOnce blocks
G_AreTheyHere = 0
G_AssaultMsgSent = 0
G_C2StartingTimer = 0
G_C2TimeExists = 0
G_CLICK_BuildResourceController = 0
G_CLICK_CollectResources = 0
G_CLICK_DestroyP1Ms = 0
G_CLICK_ProtectTheFleet = 0
G_CStartingTimer = 0
G_CTimeExists = 0
G_FuckingStupid = 0
G_FuckingStupid2 = 0
G_IAmTheWalrus = 0
G_IcantLetYouGo = 0
G_IonFrigsHere = 0
G_MCStartingTimer = 0
G_MCTimeExists = 0
G_ReadyToSpew = 0
G_ResourcersAttacked = 0
G_SaveAiMothership = 0
G_StartingTimer = 0
G_TradersRHere = 0
SetMediumGuns = 0
_VIFONCE032 = 0
_VIFONCE033 = 0
_VIFONCE034 = 0
_VIFONCE035 = 0
_VIFONCE036 = 0

--Following are global variables: created outside of the KAS structure and stubbed out here.
--G_Nis4Complete : see SinglePlayerFlow.lua, nReferences: 1
--G_PlayNis : see SinglePlayerFlow.lua, nReferences: 1

--Following are Team-Scoped variables: referenced differently than globals.
BentState = {["Traders"] = 0}
DontBuild = {["TuranicFighters"] = 0, ["StdCorvette1"] = 0, ["StdCorvette2"] = 0, ["MissileCorvette1"] = 0}
GotVar = {["TeamOfDummys"] = 0}
GotVar2 = {["TeamOfDummys"] = 0}
IWasAttacked = {["P1Mothership"] = 0}
KillMyLandLord = {["IonFrig2"] = 0, ["IonFrig3"] = 0}
Leaving = {["P1Mothership"] = 0}
NoSoupForYou = {["IonFrig1"] = 0, ["IonFrig2"] = 0, ["IonFrig3"] = 0}
OnceTheFuck = {["MissileCorvette1"] = 0}
StillOnPath = {["P1Mothership"] = 0}
WasSalCaps = {["IonFrig1"] = 0, ["IonFrig2"] = 0, ["IonFrig3"] = 0}
_VIFONCE001 = {["Traders"] = 0}
_VIFONCE002 = {["Traders"] = 0}
_VIFONCE003 = {["Traders"] = 0}
_VIFONCE004 = {["Traders"] = 0}
_VIFONCE005 = {["Traders"] = 0}
_VIFONCE006 = {["Traders"] = 0}
_VIFONCE007 = {["Traders"] = 0}
_VIFONCE008 = {["TeamOfDummys"] = 0}
_VIFONCE009 = {["TeamOfDummys"] = 0}
_VIFONCE010 = {["TeamOfDummys"] = 0}
_VIFONCE011 = {["TeamOfDummys"] = 0}
_VIFONCE012 = {["TeamOfDummys"] = 0}
_VIFONCE013 = {["TeamOfDummys"] = 0}
_VIFONCE014 = {["TeamOfDummys"] = 0}
_VIFONCE015 = {["TuranicFighters"] = 0}
_VIFONCE016 = {["TuranicFighters"] = 0}
_VIFONCE017 = {["TuranicFighters"] = 0}
_VIFONCE018 = {["TuranicHarrassFighters"] = 0}
_VIFONCE019 = {["TuranicHarrassFighters"] = 0}
_VIFONCE020 = {["IonFrig1"] = 0}
_VIFONCE021 = {["IonFrig2"] = 0}
_VIFONCE022 = {["IonFrig3"] = 0}
_VIFONCE023 = {["StdCorvette1"] = 0}
_VIFONCE024 = {["StdCorvette2"] = 0}
_VIFONCE025 = {["MissileCorvette1"] = 0}
_VIFONCE026 = {["P1Mothership"] = 0}
_VIFONCE027 = {["P1Mothership"] = 0}
_VIFONCE028 = {["P1Mothership"] = 0}
_VIFONCE029 = {["P1Mothership"] = 0}
_VIFONCE030 = {["P1Mothership"] = 0}
_VIFONCE031 = {["ProtectFrigs"] = 0}
needed = {["TuranicFighters"] = 0, ["TuranicHarrassFighters"] = 0, ["StdCorvette1"] = 0, ["StdCorvette2"] = 0, ["MissileCorvette1"] = 0}
newships = {["TuranicFighters"] = 0, ["TuranicHarrassFighters"] = 0, ["StdCorvette1"] = 0, ["StdCorvette2"] = 0, ["MissileCorvette1"] = 0}
requested = {["TuranicFighters"] = 0, ["TuranicHarrassFighters"] = 0, ["StdCorvette1"] = 0, ["StdCorvette2"] = 0, ["MissileCorvette1"] = 0}

--Following are Team-Scoped timers: referenced differently than globals.
AllHellLetsLoose = {["Traders"] = 3}
AttackTraders1Timer = {["Traders"] = 4}
BentTimer = {["Traders"] = 5}
BuildAgain = {["TuranicFighters"] = 6, ["StdCorvette1"] = 7, ["StdCorvette2"] = 8, ["MissileCorvette1"] = 9}
Corvette1Delay = {["StdCorvette1"] = 10}
Corvette2Delay = {["StdCorvette2"] = 11}
DoggieTimer = {["P1Mothership"] = 12}
FIFIResourceVeinsPINGTimer = {["TeamOfDummys"] = 13}
FIOpenSensorsTimer = {["TeamOfDummys"] = 14}
FIPointerTimer = {["TeamOfDummys"] = 15}
FISeTimer = {["TeamOfDummys"] = 16}
FiTransOut = {["TeamOfDummys"] = 17}
FighterDelay = {["TuranicFighters"] = 18}
FrigTimer1 = {["IonFrig1"] = 19}
FrigTimer2 = {["IonFrig2"] = 20}
FrigTimer3 = {["IonFrig3"] = 21}
FuckOffTimer = {["Traders"] = 22}
GoneTimer = {["Traders"] = 23}
MCorvetteDelay = {["MissileCorvette1"] = 24}
MarniTimer = {["TeamOfDummys"] = 25}
NisTimer = {["Traders"] = 26}
TimerDP1C = {["TeamOfDummys"] = 27}
TimerFIInitialBriefing = {["TeamOfDummys"] = 28}
TimerForNikki = {["TeamOfDummys"] = 29}
TimerProtect = {["TeamOfDummys"] = 30}
TimerResourceVeins = {["TeamOfDummys"] = 31}
TimerTransOut = {["TeamOfDummys"] = 32}
TipClickToTrade = {["Traders"] = 33}
UBetterStop = {["TeamOfDummys"] = 34}


--kas timer names, with mappings to indices
TimerID_EndOfTheWorldAsWeKnowIt = 2
TimerID_G_TimerSecondaryObjective01 = 1
TimerID_G_TimerTradersVisit = 0


--KAS objective names, set by KASObjective_Add
ObjectiveID_BuildResourceController = 1
ObjectiveID_CollectResources = 0
ObjectiveID_DestroyP1Ms = 3
ObjectiveID_Hyperspace = 4
ObjectiveID_ProtectTheFleet = 2
ObjectiveID_Count = 5


--Pointer IDs, set by KASPointer_Add<xxx>
PointerID_BadPOINTER = 5
PointerID_BentusiPOINTER = 0
PointerID_Frig1POINTER = 2
PointerID_Frig2POINTER = 3
PointerID_Frig3POINTER = 4
PointerID_GoodPOINTER = 6
PointerID_ResourceVeinsPOINTER = 1


--extern sdword CurrentMissionScope;
--extern char CurrentMissionScopeName[];

--  for displaying localized strings
strCurLanguage = 1  --Naive treatement of localization language.;

LSTRING_LocationCard = {  -- multilingual strings
	"Great Wastelands",
	"Macro-d�serts",
	"Gro�e Ein�de",
	"Grandes p�ramos",
	"Le lande desolate", }
LSTRING_PrimaryObjective01 = {  -- multilingual strings
	"Begin collection of resources.",
	"D�marrage collecte des ressources.",
	"Mit der Sammlung von Rohstoffen beginnen.",
	"Comenzar recolecci�n de recursos.",
	"Inizia la raccolta delle risorse.", }
LSTRING_PrimaryObjective02 = {  -- multilingual strings
	"Destroy all Turanic Raider ships",
	"Destruction totalit� des Vaisseaux du Maraudeur Turanique",
	"Alle Schiffe der turanischen Freibeuter sind zu zerst�ren.",
	"Destruir todas las naves de asalto tur�nicas",
	"Distruggi tutte le astronavi Raider dei Turanic", }
LSTRING_SecondaryObjective01 = {  -- multilingual strings
	"Build and Deploy Resource Controller",
	"Construction et mise en place du Contr�leur des Ressources",
	"Rohstoff�berwachungsschiff bauen und einsetzen.",
	"Construir y desarrollar controlador de recursos",
	"Costruisci e posiziona un Controllore di Risorse.", }
LSTRING_FISetupCollection = {  -- multilingual strings
	"Set up a collection operation.",
	"Mise en oeuvre op�ration de collecte.",
	"Sammelaktion einleiten.",
	"Establecer operaci�n de recolecci�n.",
	"Prepara un'operazione di raccolta.", }
LSTRING_FIResourceControllerTip = {  -- multilingual strings
	"Move your resource controller as close to heavy resource areas as possible.  This will reduce your resource collectors dropoff time and increase your resource collection efficiency.",
	"Approchez le plus possible votre Contr�leur des Ressources des gisements importants de ressources. Ceci r�duira la dur�e de d�chargement pour le Collecteur de Ressources et am�liorera l'efficacit� de la collecte.",
	"Bringen Sie Ihr Rohstoff�berwachungsschiff so dicht wie m�glich an ergiebige Rohstoffbereiche heran. Das verringert die Transportzeit der Rohstoffernteschiffe und erh�ht die Effizienz der Rohstoffernte.",
	"Acerca el controlador de recursos a las zonas con abundancia de recursos tanto como puedas. Esto reduce el tiempo de descarga de los recolectores de recursos y aumenta la eficacia de la recolecci�n.",
	"Sposta il Collettore di Risorse il pi� vicino possibile alle zone pi� ricche di risorse. In questo modo, ridurrai al minimo i tempi morti della raccolta, ottimizzandone la produzione.", }
LSTRING_TraderIntro = {  -- multilingual strings
	"Welcome.",
	"Bienvenue.",
	"Willkommen.",
	"Bienvenido.",
	"Benvenuto.", }
LSTRING_TraderPurchaseMade = {  -- multilingual strings
	"Thank you.  Enjoy your purchase.",
	"Merci. Profitez bien de votre acquisition.",
	"Besten Dank. Erfreut euch an eurem Kauf.",
	"Gracias. Que disfrutes de tu compra.",
	"Grazie. Speriamo che il tuo acquisto ti torni utile.", }
LSTRING_Savegame = {  -- multilingual strings
	"04 - Great Wastelands",
	"04 - Macro-d�serts",
	"04 - Gro�e Ein�de",
	"04 - Grandes p�ramos",
	"04 - Le lande desolate", }
LSTRING_Objective1 = {  -- multilingual strings
	"Protect The Fleet",
	"Protection de la Flotte",
	"Die Flotte sch�tzen.",
	"Proteger la flota",
	"Progetta la flotta", }
LSTRING_GoodBusiness = {  -- multilingual strings
	"When you have collected enough resources we have a piece of technology that we would be willing to sell you.",
	"Nous poss�dons une avanc�e technologique que nous serions pr�ts � vous vendre lorsque vous aurez r�uni assez de ressources.",
	"Wenn ihr gen�gend Rohstoffe gesammelt habt, haben wir eine Technologie, die wir euch verkaufen w�rden",
	"Cuando hayas recolectado suficientes recursos, tenemos cierta tecnolog�a que estamos dispuestos a venderte.",
	"Quando avrai raccolto risorse sufficienti, vieni da noi: abbiamo qualcosa che crediamo ti potr� tornare davvero utile.", }
LSTRING_IonFrigs = {  -- multilingual strings
	"Several Turanic Raider capital ships have just hyperspaced in close to the Mothership.  They pose by far the greatest threat yet faced.  Protecting the Mothership is the highest priority.",
	"Plusieurs Unit�s lourdes du Maraudeur Turanique viennent de sortir de l'hyperespace pr�s du Vaisseau M�re. C'est de loin la menace la plus s�rieuse qui se soit pr�sent�e jusqu'� pr�sent. Priorit� absolue : Protection du Vaisseau M�re.",
	"Mehrere Schlachtschiffe der turanischen Freibeuter sind gerade in der N�he des Mutterschiffs aus dem Hyperraum gekommen. Sie stellen mit Abstand die gr��te Gefahr dar, der wir uns je gegen�ber sahen. Der Schutz des Mutterschiffs hat oberste Priorit�t.",
	"Varias Naves capital tur�nicas de asalto acaban de salir del hiperespacio cerca de la Nave nodriza. Representan el mayor peligro al que nos hemos enfrentado. Nuestra prioridad es la de proteger a la Nave nodriza.",
	"Molte navi Incursori dei Turanic sono appena emerse dall'Iperspazio e si stanno dirigendo verso l'Astronave Madre. Siamo di fronte a una minaccia senza precedenti, � assolutamente necessario difendere l'Astronave Madre.", }
LSTRING_TBHyperspace = {  -- multilingual strings
	"                HYPERSPACE",
	"                HYPERESPACE",
	"        HYPERRAUMSPRUNG",
	"              HIPERESPACIO",
	"				IPERSPAZIO", }
LSTRING_FIGoGetThem = {  -- multilingual strings
	"Destroy Retreating Turanic Raider Carrier",
	"Destruction du transporteur fuyard du Maraudeur Turanique",
	"Tr�gerschiffe der zur�ckweichenden turanischen Freibeuter zerst�ren.",
	"Destruir el portanaves de asalto tur�nico que se retira",
	"Distruggi l'astronave Porta-Incursori dei Turanic in ritirata.", }

--
--  "initialize" code for Mission04 Traders FSM
--
function Init_Mission04_Traders(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	G_FuckingStupid = 0 --created,set
	KAS_SetTraderDisabled(0)    --kasfSetTraderDisabled(0)
	SobGroup_SetMaxSpeed(TeamName, 3500)    --kasfTeamSetMaxVelocity(10000)
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Wait")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_Wait", "Init_Mission04_Traders")
	Init_Mission04_Traders_Wait(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 Traders FSM
--
function Watch_Mission04_Traders(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KAS_UnderAttack(TeamName, "GrowSelection_FuckingStupid")    --kasfUnderAttack(kasGrowSelectionPtr("FuckingStupid"))
	KAS_FillShipsByCapital("GrowSelection_CapsFuckingStupid", "GrowSelection_FuckingStupid")    --kasfShipsSelectCapital(kasGrowSelectionPtr("CapsFuckingStupid"), kasGrowSelectionPtr("FuckingStupid"))
	if ((SobGroup_Count("GrowSelection_FuckingStupid") > 0) and (G_FuckingStupid == 0) and (G_TradersRHere == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("FuckingStupid"))
	
	G_FuckingStupid = 1 --set
	KASTimer_Start(AttackTraders1Timer[TeamName], 16)
	--kasJump("Attack1")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_Attack1", "Watch_Mission04_Traders")
	Init_Mission04_Traders_Attack1(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders Wait state
--
function Init_Mission04_Traders_Wait(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "watch" code for Mission04 Traders Wait state
--
function Watch_Mission04_Traders_Wait(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (_VIFONCE001[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(TimerID_G_TimerTradersVisit) ~= 0)) then  -- "ifonce" #1
	
	_VIFONCE001[TeamName] = 1 --created,set;
	--kasJump("TradersHyperspaceIn")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Wait")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersHyperspaceIn", "Watch_Mission04_Traders_Wait")
	Init_Mission04_Traders_TradersHyperspaceIn(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders Attack1 state
--
function Init_Mission04_Traders_Attack1(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	
end 


--
--  "watch" code for Mission04 Traders Attack1 state
--
function Watch_Mission04_Traders_Attack1(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if ((KASTimer_IsExpired(AttackTraders1Timer[TeamName]) ~= 0) and (KAS_UnderAttack(TeamName, "GrowSelection_FuckingStupid") > 0)) then     --kasfUnderAttack(kasGrowSelectionPtr("FuckingStupid"))
	
	--kasJump("Attack2")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack1")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_Attack2", "Watch_Mission04_Traders_Attack1")
	Init_Mission04_Traders_Attack2(TeamName)
	return
	elseif ((KASTimer_IsExpired(AttackTraders1Timer[TeamName]) ~= 0) and (KAS_UnderAttack(TeamName, "GrowSelection_FuckingStupid") < 1)) then     --kasfUnderAttack(kasGrowSelectionPtr("FuckingStupid"))
	
	G_FuckingStupid = 0 --set
	if (BentState[TeamName] == 1) then 
	
	--kasJump("TradersHyperspaceIn")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack1")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersHyperspaceIn", "Watch_Mission04_Traders_Attack1")
	Init_Mission04_Traders_TradersHyperspaceIn(TeamName)
	return
	elseif (BentState[TeamName] == 2) then 
	
	--kasJump("TradersHyperspaceIn")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack1")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersHyperspaceIn", "Watch_Mission04_Traders_Attack1")
	Init_Mission04_Traders_TradersHyperspaceIn(TeamName)
	return
	elseif (BentState[TeamName] == 3) then 
	
	--kasJump("TimeToTrade")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack1")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TimeToTrade", "Watch_Mission04_Traders_Attack1")
	Init_Mission04_Traders_TimeToTrade(TeamName)
	return
	elseif (BentState[TeamName] == 4) then 
	
	--kasJump("TradersLeave")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack1")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersLeave", "Watch_Mission04_Traders_Attack1")
	Init_Mission04_Traders_TradersLeave(TeamName)
	return
	end 
	end 
	
end 


--
--  "initialize" code for Mission04 Traders Attack2 state
--
function Init_Mission04_Traders_Attack2(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	G_FuckingStupid2 = 1 --created,set
	
end 


--
--  "watch" code for Mission04 Traders Attack2 state
--
function Watch_Mission04_Traders_Attack2(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KAS_FindEnemiesInside("WorldSphere", "GrowSelection_DeadPlayerShips")    --kasfFindEnemiesInside(kasVolumePtr("WorldSphere"), kasGrowSelectionPtr("DeadPlayerShips"), 1000000)
	KAS_FillShipsByCapital("GrowSelection_DeadPlayerCaps", "GrowSelection_DeadPlayerShips")    --kasfShipsSelectCapital(kasGrowSelectionPtr("DeadPlayerCaps"), kasGrowSelectionPtr("DeadPlayerShips"))
	if (SobGroup_Count("GrowSelection_DeadPlayerCaps") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("DeadPlayerCaps"))
	
	KAS_Attack(TeamName, "GrowSelection_DeadPlayerCaps")    --kasfAttack(kasGrowSelectionPtr("DeadPlayerCaps"))
	elseif (SobGroup_Count("GrowSelection_DeadPlayerCaps") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("DeadPlayerCaps"))
	
	--kasJump("TradersLeave")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_Attack2")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersLeave", "Watch_Mission04_Traders_Attack2")
	Init_Mission04_Traders_TradersLeave(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TradersHyperspaceIn state
--
function Init_Mission04_Traders_TradersHyperspaceIn(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (_VIFONCE002[TeamName] == 0 and (1 ~= 0)) then  -- "ifonce" #2
	
	_VIFONCE002[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceIn(TeamName, "TraderOriginPoint")    --kasfTeamHyperspaceIn(kasVectorPtr("TraderOriginPoint"))
	end 
	BentState[TeamName] = 1 --created,set
	SobGroup_FollowPath(TeamName, "BentusiAvenue", 1, 1, 0)    --kasfPatrolPath(kasPathPtr("BentusiAvenue"))
	--kasJump("BentusiFleetIntelIN")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_BentusiFleetIntelIN", "Init_Mission04_Traders_TradersHyperspaceIn")
	Init_Mission04_Traders_BentusiFleetIntelIN(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 Traders TradersHyperspaceIn state
--
function Watch_Mission04_Traders_TradersHyperspaceIn(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "initialize" code for Mission04 Traders BentusiFleetIntelIN state
--
function Init_Mission04_Traders_BentusiFleetIntelIN(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	BentState[TeamName] = 2 --set
	
end 


--
--  "watch" code for Mission04 Traders BentusiFleetIntelIN state
--
function Watch_Mission04_Traders_BentusiFleetIntelIN(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (_VIFONCE003[TeamName] == 0 and ((KAS_FindShipsInside("PlayIntelHere", "GrowSelection_IsInside") > 0) and (KAS_FillShipsByType_Normal("GrowSelection_ISBentusi", "GrowSelection_IsInside", "BentusiExchange") > 0))) then  -- "ifonce" #3    --kasfFindShipsInside(kasVolumePtr("PlayIntelHere"), kasGrowSelectionPtr("IsInside"))    --kasfShipsSelectType(kasGrowSelectionPtr("ISBentusi"), kasGrowSelectionPtr("IsInside"), "FloatingCity")
	
	_VIFONCE003[TeamName] = 1 --created,set;
	KAS_SetLetterboxState(2, 2.5)    --kasfWideScreenIn(75)
	KASTimer_Start(BentTimer[TeamName], 3)
	end 
	if (_VIFONCE004[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(BentTimer[TeamName]) ~= 0)) then  -- "ifonce" #4
	
	_VIFONCE004[TeamName] = 1 --created,set;
	Player_PauseBuildQueues(0)    --kasfPauseBuildShips()
	G_TradersRHere = 1 --created,set
	--kasJump("BentusiFIOpenSensors")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_BentusiFleetIntelIN")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_BentusiFIOpenSensors", "Watch_Mission04_Traders_BentusiFleetIntelIN")
	Init_Mission04_Traders_BentusiFIOpenSensors(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders BentusiFIOpenSensors state
--
function Init_Mission04_Traders_BentusiFIOpenSensors(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KAS_PingAddShips("Traders", "BentusiPing", "$60505")    --kasfPingAddShips(kasAITeamShipsPtr("Traders"), "BentusiPing")
	KAS_SensorsToggle(1, 1)    --kasfOpenSensors(1)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60481", 3)    --kasfSpeechEvent((481 + 4096 + 268435456), 0)
	--kasJump("BentusiFIpointer")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_BentusiFIpointer", "Init_Mission04_Traders_BentusiFIOpenSensors")
	Init_Mission04_Traders_BentusiFIpointer(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 Traders BentusiFIOpenSensors state
--
function Watch_Mission04_Traders_BentusiFIOpenSensors(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "initialize" code for Mission04 Traders BentusiFIpointer state
--
function Init_Mission04_Traders_BentusiFIpointer(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	PointerID_BentusiPOINTER = KASPointer_AddShip("Traders")    --kasfTutSetPointerTargetShip("BentusiPOINTER", kasAITeamShipsPtr("Traders"))
	--kasJump("TradersFCFeelie")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersFCFeelie", "Init_Mission04_Traders_BentusiFIpointer")
	Init_Mission04_Traders_TradersFCFeelie(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 Traders BentusiFIpointer state
--
function Watch_Mission04_Traders_BentusiFIpointer(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "initialize" code for Mission04 Traders TradersFCFeelie state
--
function Init_Mission04_Traders_TradersFCFeelie(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "watch" code for Mission04 Traders TradersFCFeelie state
--
function Watch_Mission04_Traders_TradersFCFeelie(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (SobGroup_GetNextPathPoint(TeamName) == 0) then     --kasfPathNextPoint()
	
	KAS_PingRemove("BentusiPing", "$60505")    --kasfPingRemove("BentusiPing")
	KAS_SetHidden("Traders", 1)    --kasfHideShips(kasAITeamShipsPtr("Traders"))
	--kasJump("TraderNIS")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TradersFCFeelie")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TraderNIS", "Watch_Mission04_Traders_TradersFCFeelie")
	Init_Mission04_Traders_TraderNIS(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TraderNIS state
--
function Init_Mission04_Traders_TraderNIS(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KASPointer_RemoveAll()    --kasfTutRemoveAllPointers()
	KAS_SensorsToggle(0, 1)    --kasfCloseSensors(1)
	KAS_TeamAttributesSet(TeamName, 256)    --kasfTeamAttributesSet(256)
	G_PlayNis = 4 --created,set
	
end 


--
--  "watch" code for Mission04 Traders TraderNIS state
--
function Watch_Mission04_Traders_TraderNIS(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (_VIFONCE005[TeamName] == 0 and (1 ~= 0)) then  -- "ifonce" #5
	
	_VIFONCE005[TeamName] = 1 --created,set;
	SobGroup_FillShipsByIndexRange("GrowSelection_Trader", TeamName, 0, 1)    --kasfShipsSelectIndex(kasGrowSelectionPtr("Trader"), (&kasThisTeamPtr->shipList), 0)
	SobGroup_MakeDead("GrowSelection_Trader")    --kasfDeleteShips(kasGrowSelectionPtr("Trader"))
	end 
	if (_VIFONCE006[TeamName] == 0 and (G_Nis4Complete ~= 0)) then  -- "ifonce" #6
	
	_VIFONCE006[TeamName] = 1 --created,set;
	Player_UnpauseBuildQueues(0)    --kasfUnpauseBuildShips()
	KASTimer_Start(NisTimer[TeamName], 2)
	end 
	if (KASTimer_IsExpiredIfSoDestroy(NisTimer[TeamName]) ~= 0) then 
	
	--kasJump("TimeToTrade")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TraderNIS")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TimeToTrade", "Watch_Mission04_Traders_TraderNIS")
	Init_Mission04_Traders_TimeToTrade(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TimeToTrade state
--
function Init_Mission04_Traders_TimeToTrade(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders

    --make the Traders allied
    KAS_TeamAttributesSet("Traders", 256)

	BentState[TeamName] = 3 --set
	ignoredFunction()    --kasfSoundEvent(267)
	if (KAS_PlayerHasResearch(0, "CapitalShipChassis") ~= 0) then     --kasfDoesPlayerHave("Chassis3")
	
	KAS_EnableTradeGUI()    --kasfEnableTraderGUI()
	if (Player_GetRU(0) < 1001) then     --kasfRUsGet(0)
	
	KAS_SetTradeCost("IonCannons", 1000)    --kasfSetBaseTechnologyCost("IonWeapons", 300)
	elseif (Player_GetRU(0) > 1000) then     --kasfRUsGet(0)
	
	KAS_SetTradeCost("IonCannons", 1700)    --kasfSetBaseTechnologyCost("IonWeapons", 500)
	end 
	KAS_AllowToPurchase("IonCannons")    --kasfAllowPlayerToPurchase("IonWeapons")
	KAS_SetTradeString(0, "$61206")    --kasfSetTraderDialog(0, LSTRING_TraderIntro[strCurLanguage])
	KAS_SetTradeString(1, "$61206")    --kasfSetTraderDialog(1, LSTRING_TraderIntro[strCurLanguage])
	KAS_SetTradeString(2, "$61210")    --kasfSetTraderDialog(2, LSTRING_GoodBusiness[strCurLanguage])
	KAS_SetTradeString(4, "$61207")    --kasfSetTraderDialog(4, LSTRING_TraderPurchaseMade[strCurLanguage])
	KAS_SetTradeString(5, "$61207")    --kasfSetTraderDialog(5, LSTRING_TraderPurchaseMade[strCurLanguage])
	elseif ( (KAS_PlayerHasResearch(0, "CapitalShipChassis"))== 0) then     --kasfDoesPlayerHave("Chassis3")
	
	KAS_EnableTradeGUI()    --kasfEnableTraderGUI()
	if (Player_GetRU(0) < 601) then     --kasfRUsGet(0)
	
	KAS_SetTradeCost("PlasmaBombLauncher", 600)    --kasfSetBaseTechnologyCost("PlasmaWeapons", 300)
	elseif (Player_GetRU(0) > 600) then     --kasfRUsGet(0)
	
	KAS_SetTradeCost("PlasmaBombLauncher", 1000)    --kasfSetBaseTechnologyCost("PlasmaWeapons", 500)
	end 
	KAS_AllowToPurchase("PlasmaBombLauncher")    --kasfAllowPlayerToPurchase("PlasmaWeapons")
	KAS_SetTradeString(0, "$61206")    --kasfSetTraderDialog(0, LSTRING_TraderIntro[strCurLanguage])
	KAS_SetTradeString(1, "$61206")    --kasfSetTraderDialog(1, LSTRING_TraderIntro[strCurLanguage])
	KAS_SetTradeString(2, "$61210")    --kasfSetTraderDialog(2, LSTRING_GoodBusiness[strCurLanguage])
	KAS_SetTradeString(4, "$61207")    --kasfSetTraderDialog(4, LSTRING_TraderPurchaseMade[strCurLanguage])
	KAS_SetTradeString(5, "$61207")    --kasfSetTraderDialog(5, LSTRING_TraderPurchaseMade[strCurLanguage])
	end 
	KASTimer_Start(FuckOffTimer[TeamName], 300)
	
end 


--
--  "watch" code for Mission04 Traders TimeToTrade state
--
function Watch_Mission04_Traders_TimeToTrade(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (((KAS_IsTradeGUIActive() == 0) and ((KAS_PlayerHasResearch(0, "IonCannons") ~= 0) or (KAS_PlayerHasResearch(0, "PlasmaBombLauncher") ~= 0))) or (KASTimer_IsExpiredIfSoDestroy(FuckOffTimer[TeamName]) ~= 0)) then     --kasfDoesPlayerHave("PlasmaWeapons")    --kasfDoesPlayerHave("IonWeapons")    --kasfTraderGUIActive()
	
	--kasJump("TipClickToTrade")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TimeToTrade")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TipClickToTrade", "Watch_Mission04_Traders_TimeToTrade")
	Init_Mission04_Traders_TipClickToTrade(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TipClickToTrade state
--
function Init_Mission04_Traders_TipClickToTrade(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KASTimer_Start(TipClickToTrade[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 Traders TipClickToTrade state
--
function Watch_Mission04_Traders_TipClickToTrade(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (KASTimer_IsExpiredIfSoDestroy(TipClickToTrade[TeamName]) ~= 0) then 
	
	--kasJump("TaiidanAgentsArrive")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TipClickToTrade")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TaiidanAgentsArrive", "Watch_Mission04_Traders_TipClickToTrade")
	Init_Mission04_Traders_TaiidanAgentsArrive(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TaiidanAgentsArrive state
--
function Init_Mission04_Traders_TaiidanAgentsArrive(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (ignoredFunction(0) == 0) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_BentusiTraders, "$60492", 3)    --kasfSpeechEvent((492 + 8192 + 268435456), 0)
	elseif (ignoredFunction(0) == 1) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_BentusiTraders, "$60493", 3)    --kasfSpeechEvent((493 + 8192 + 268435456), 0)
	end 
	KASTimer_Start(GoneTimer[TeamName], 12)
	
end 


--
--  "watch" code for Mission04 Traders TaiidanAgentsArrive state
--
function Watch_Mission04_Traders_TaiidanAgentsArrive(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (KASTimer_IsExpiredIfSoDestroy(GoneTimer[TeamName]) ~= 0) then 
	
	--kasJump("TradersLeave")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TaiidanAgentsArrive")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_TradersLeave", "Watch_Mission04_Traders_TaiidanAgentsArrive")
	Init_Mission04_Traders_TradersLeave(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 Traders TradersLeave state
--
function Init_Mission04_Traders_TradersLeave(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	BentState[TeamName] = 4 --set
	KAS_SetTraderDisabled(1)    --kasfSetTraderDisabled(1)
	KASTimer_Start(AllHellLetsLoose[TeamName], 15)
	G_TradersRHere = 0 --destroyed
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	
end 


--
--  "watch" code for Mission04 Traders TradersLeave state
--
function Watch_Mission04_Traders_TradersLeave(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_Traders", "Watch_Mission04_Traders_TradersLeave")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_Done", "Watch_Mission04_Traders_TradersLeave")
	Init_Mission04_Traders_Done(TeamName)
	return
	
end 


--
--  "initialize" code for Mission04 Traders AlmostDone state
--
function Init_Mission04_Traders_AlmostDone(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	KASPointer_RemoveAll()    --kasfTutRemoveAllPointers()
	KAS_UniversePause(0)    --kasfUniverseUnpause()
	KAS_SensorsToggle(0, 1)    --kasfCloseSensors(1)
	--kasJump("Done")
	KASRule_Add(TeamName, "Watch_Mission04_Traders_Done", "Init_Mission04_Traders_AlmostDone")
	Init_Mission04_Traders_Done(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 Traders AlmostDone state
--
function Watch_Mission04_Traders_AlmostDone(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "initialize" code for Mission04 Traders Done state
--
function Init_Mission04_Traders_Done(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	
end 


--
--  "watch" code for Mission04 Traders Done state
--
function Watch_Mission04_Traders_Done(TeamName)
	--FSM: FSM_Mission04_Traders
	--TeamName = Traders
	if (_VIFONCE007[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(AllHellLetsLoose[TeamName]) ~= 0)) then  -- "ifonce" #7
	
	_VIFONCE007[TeamName] = 1 --created,set;
	KAS_MessageSendToAll(TeamName, "AttackPlayerMothership")    --kasfMsgSendAll("AttackPlayerMothership")
	G_AssaultMsgSent = 1 --created,set
	KAS_MessageSendToAll(TeamName, "TradersGone")    --kasfMsgSendAll("TradersGone")
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FSM
--
function Init_Mission04_MissionBriefing(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	G_AreTheyHere = 0 --created,set
	KASTimer_Start(TimerFIInitialBriefing[TeamName], 4)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FSM
--
function Watch_Mission04_MissionBriefing(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (_VIFONCE008[TeamName] == 0 and (KASTimer_IsExpired(TimerFIInitialBriefing[TeamName]) ~= 0)) then  -- "ifonce" #8
	
	_VIFONCE008[TeamName] = 1 --created,set;
	--kasJump("ResourceVeinsIntro")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ResourceVeinsIntro", "Watch_Mission04_MissionBriefing")
	Init_Mission04_MissionBriefing_ResourceVeinsIntro(TeamName)
	return
	end 
	if (_VIFONCE009[TeamName] == 0 and (KAS_GatheredRUs() >= 600)) then  -- "ifonce" #9    --kasfRUsEnemyCollected()
	
	_VIFONCE009[TeamName] = 1 --created,set;
	KASTimer_Start(TimerID_G_TimerTradersVisit, 9)
	KASObjective_SetState(ObjectiveID_CollectResources, 1)    --kasfObjectiveSet("CollectResources", 1)
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing ResourceVeinsIntro state
--
function Init_Mission04_MissionBriefing_ResourceVeinsIntro(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_FleetCommand, "$60478", 3)    --kasfSpeechEvent((478 + 2048 + 268435456), 0)
	KASTimer_Start(MarniTimer[TeamName], 5)
	
end 


--
--  "watch" code for Mission04 MissionBriefing ResourceVeinsIntro state
--
function Watch_Mission04_MissionBriefing_ResourceVeinsIntro(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(MarniTimer[TeamName]) ~= 0) then 
	
	--kasJump("ResourceVeinsTransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_ResourceVeinsIntro")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ResourceVeinsTransIn", "Watch_Mission04_MissionBriefing_ResourceVeinsIntro")
	Init_Mission04_MissionBriefing_ResourceVeinsTransIn(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing ResourceVeinsTransIn state
--
function Init_Mission04_MissionBriefing_ResourceVeinsTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(2, 3)    --kasfWideScreenIn(90)
	--kasJump("ResourceVeinsOpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ResourceVeinsOpenSensors", "Init_Mission04_MissionBriefing_ResourceVeinsTransIn")
	Init_Mission04_MissionBriefing_ResourceVeinsOpenSensors(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 MissionBriefing ResourceVeinsTransIn state
--
function Watch_Mission04_MissionBriefing_ResourceVeinsTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	
end 


--
--  "initialize" code for Mission04 MissionBriefing ResourceVeinsOpenSensors state
--
function Init_Mission04_MissionBriefing_ResourceVeinsOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KASTimer_Start(FIOpenSensorsTimer[TeamName], 4)
	
end 


--
--  "watch" code for Mission04 MissionBriefing ResourceVeinsOpenSensors state
--
function Watch_Mission04_MissionBriefing_ResourceVeinsOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(FIOpenSensorsTimer[TeamName]) ~= 0) then 
	
	KAS_SensorsToggle(1, 1)    --kasfOpenSensors(1)
	KAS_UniversePause(1)    --kasfUniversePause()
	--kasJump("FIResourceVeins")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_ResourceVeinsOpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FIResourceVeins", "Watch_Mission04_MissionBriefing_ResourceVeinsOpenSensors")
	Init_Mission04_MissionBriefing_FIResourceVeins(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FIResourceVeins state
--
function Init_Mission04_MissionBriefing_FIResourceVeins(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60479", 3)    --kasfSpeechEvent((479 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_CollectResources, "$61201", OT_Primary)    --kasfObjectiveCreate("CollectResources", LSTRING_PrimaryObjective01[strCurLanguage], LSTRING_FISetupCollection[strCurLanguage])
	Objective_SetDescription(ObjectiveID_CollectResources, "$60506")
	KASTimer_Start(FISeTimer[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FIResourceVeins state
--
function Watch_Mission04_MissionBriefing_FIResourceVeins(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KASTimer_Start(TimerID_G_TimerSecondaryObjective01, 30)
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FIResourceVeins")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_FIResourceVeins")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(FISeTimer[TeamName]) ~= 0) then 
	
	--kasJump("FIResourceVeinsPING")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FIResourceVeins")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FIResourceVeinsPING", "Watch_Mission04_MissionBriefing_FIResourceVeins")
	Init_Mission04_MissionBriefing_FIResourceVeinsPING(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FIResourceVeinsPING state
--
function Init_Mission04_MissionBriefing_FIResourceVeinsPING(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	PointerID_ResourceVeinsPOINTER = KASPointer_AddVolume("ResourcePointerVolume")    --kasfTutSetPointerTargetAIVolume("ResourceVeinsPOINTER", kasVolumePtr("ResourcePointerVolume"))
	KASTimer_Start(FIFIResourceVeinsPINGTimer[TeamName], 5)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FIResourceVeinsPING state
--
function Watch_Mission04_MissionBriefing_FIResourceVeinsPING(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(FIFIResourceVeinsPINGTimer[TeamName]) ~= 0) then 
	
	--kasJump("ResourceVeinsTransOut")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FIResourceVeinsPING")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ResourceVeinsTransOut", "Watch_Mission04_MissionBriefing_FIResourceVeinsPING")
	Init_Mission04_MissionBriefing_ResourceVeinsTransOut(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing ResourceVeinsTransOut state
--
function Init_Mission04_MissionBriefing_ResourceVeinsTransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(0, 2)    --kasfWideScreenOut(60)
	KASTimer_Start(TimerTransOut[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing ResourceVeinsTransOut state
--
function Watch_Mission04_MissionBriefing_ResourceVeinsTransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if ((KASTimer_IsExpiredIfSoDestroy(TimerTransOut[TeamName]) ~= 0) or (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0)) then     --kasfIntelEventEnded()
	
	KASTimer_Start(TimerID_G_TimerSecondaryObjective01, 15)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_ResourceVeinsTransOut")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_ResourceVeinsTransOut")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing HasTech state
--
function Init_Mission04_MissionBriefing_HasTech(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60480", 3)    --kasfSpeechEvent((480 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_BuildResourceController, "$61203", OT_Secondary)    --kasfObjectiveCreateSecondary("BuildResourceController", LSTRING_SecondaryObjective01[strCurLanguage], LSTRING_FIResourceControllerTip[strCurLanguage])
	Objective_SetDescription(ObjectiveID_BuildResourceController, "$61205")
	
end 


--
--  "watch" code for Mission04 MissionBriefing HasTech state
--
function Watch_Mission04_MissionBriefing_HasTech(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_HasTech")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_HasTech")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing HasShip state
--
function Init_Mission04_MissionBriefing_HasShip(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60761", 3)    --kasfSpeechEvent((761 + 4096 + 268435456), 0)
	
end 


--
--  "watch" code for Mission04 MissionBriefing HasShip state
--
function Watch_Mission04_MissionBriefing_HasShip(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_HasShip")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_HasShip")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FrigatesFITransIn state
--
function Init_Mission04_MissionBriefing_FrigatesFITransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(2, 1.5)    --kasfWideScreenIn(45)
	KAS_MusicPlayType("data:sound/music/battle/B01_TuranicRaidersLong", MUS_Ambient)    --kasfMusicPlay(12)
	KAS_PingAddShips("IonFrig1", "Turanic_Raider_Ion_Array_Frigate", "$60507")    --kasfPingAddShips(kasAITeamShipsPtr("IonFrig1"), "Turanic Raider Ion Array Frigate")
	KAS_PingAddShips("IonFrig2", "Turanic_Raider_Ion_Array_Frigate", "$60507")    --kasfPingAddShips(kasAITeamShipsPtr("IonFrig2"), "Turanic Raider Ion Array Frigate")
	KAS_PingAddShips("IonFrig3", "Turanic_Raider_Ion_Array_Frigate", "$60507")    --kasfPingAddShips(kasAITeamShipsPtr("IonFrig3"), "Turanic Raider Ion Array Frigate")
	
end 


--
--  "watch" code for Mission04 MissionBriefing FrigatesFITransIn state
--
function Watch_Mission04_MissionBriefing_FrigatesFITransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	--kasJump("FrigatesFIOpenSensors")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FrigatesFITransIn")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FrigatesFIOpenSensors", "Watch_Mission04_MissionBriefing_FrigatesFITransIn")
	Init_Mission04_MissionBriefing_FrigatesFIOpenSensors(TeamName)
	return
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FrigatesFIOpenSensors state
--
function Init_Mission04_MissionBriefing_FrigatesFIOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KASTimer_Start(FIOpenSensorsTimer[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FrigatesFIOpenSensors state
--
function Watch_Mission04_MissionBriefing_FrigatesFIOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpired(FIOpenSensorsTimer[TeamName]) ~= 0) then 
	
	KAS_SensorsToggle(1, 1)    --kasfOpenSensors(1)
	KAS_UniversePause(1)    --kasfUniversePause()
	--kasJump("FrigateFI")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FrigatesFIOpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FrigateFI", "Watch_Mission04_MissionBriefing_FrigatesFIOpenSensors")
	Init_Mission04_MissionBriefing_FrigateFI(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FrigateFI state
--
function Init_Mission04_MissionBriefing_FrigateFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60498", 3)    --kasfSpeechEvent((498 + 4096 + 268435456), 0)
	KASTimer_Start(TimerResourceVeins[TeamName], 2)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FrigateFI state
--
function Watch_Mission04_MissionBriefing_FrigateFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(TimerResourceVeins[TeamName]) ~= 0) then 
	
	--kasJump("FrigatesFIPingAndPointer")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FrigateFI")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FrigatesFIPingAndPointer", "Watch_Mission04_MissionBriefing_FrigateFI")
	Init_Mission04_MissionBriefing_FrigatesFIPingAndPointer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FrigatesFIPingAndPointer state
--
function Init_Mission04_MissionBriefing_FrigatesFIPingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	PointerID_Frig1POINTER = KASPointer_AddShip("IonFrig1")    --kasfTutSetPointerTargetShip("Frig1POINTER", kasAITeamShipsPtr("IonFrig1"))
	PointerID_Frig2POINTER = KASPointer_AddShip("IonFrig2")    --kasfTutSetPointerTargetShip("Frig2POINTER", kasAITeamShipsPtr("IonFrig2"))
	PointerID_Frig3POINTER = KASPointer_AddShip("IonFrig3")    --kasfTutSetPointerTargetShip("Frig3POINTER", kasAITeamShipsPtr("IonFrig3"))
	KASTimer_Start(FIPointerTimer[TeamName], 4)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FrigatesFIPingAndPointer state
--
function Watch_Mission04_MissionBriefing_FrigatesFIPingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(FIPointerTimer[TeamName]) ~= 0) then 
	
	KAS_PingRemove("Turanic_Raider_Ion_Array_Frigate", "$60507")    --kasfPingRemove("Turanic Raider Ion Array Frigate")

	--kasJump("FrigatesFITransOut")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FrigatesFIPingAndPointer")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FrigatesFITransOut", "Watch_Mission04_MissionBriefing_FrigatesFIPingAndPointer")
	Init_Mission04_MissionBriefing_FrigatesFITransOut(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FrigatesFITransOut state
--
function Init_Mission04_MissionBriefing_FrigatesFITransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(0, 2)    --kasfWideScreenOut(60)
	--kasJump("Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Init_Mission04_MissionBriefing_FrigatesFITransOut")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 MissionBriefing FrigatesFITransOut state
--
function Watch_Mission04_MissionBriefing_FrigatesFITransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	
end 


--
--  "initialize" code for Mission04 MissionBriefing PTFTransIn state
--
function Init_Mission04_MissionBriefing_PTFTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(2, 3)    --kasfWideScreenIn(90)
	--kasJump("PTFOpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_PTFOpenSensors", "Init_Mission04_MissionBriefing_PTFTransIn")
	Init_Mission04_MissionBriefing_PTFOpenSensors(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 MissionBriefing PTFTransIn state
--
function Watch_Mission04_MissionBriefing_PTFTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	
end 


--
--  "initialize" code for Mission04 MissionBriefing PTFOpenSensors state
--
function Init_Mission04_MissionBriefing_PTFOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KASTimer_Start(FIOpenSensorsTimer[TeamName], 2)
	
end 


--
--  "watch" code for Mission04 MissionBriefing PTFOpenSensors state
--
function Watch_Mission04_MissionBriefing_PTFOpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpired(FIOpenSensorsTimer[TeamName]) ~= 0) then 
	
	KAS_SensorsToggle(1, 1)    --kasfOpenSensors(1)
	KAS_UniversePause(1)    --kasfUniversePause()
	--kasJump("ProtectFI")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_PTFOpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ProtectFI", "Watch_Mission04_MissionBriefing_PTFOpenSensors")
	Init_Mission04_MissionBriefing_ProtectFI(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing ProtectFI state
--
function Init_Mission04_MissionBriefing_ProtectFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (SobGroup_Count("GrowSelection_ResourcersNearby") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("ResourcersNearby"))
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60497", 3)    --kasfSpeechEvent((497 + 4096 + 268435456), 0)
	else
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60816", 3)    --kasfSpeechEvent((816 + 4096 + 268435456), 0)
	end 
	KASObjective_Add(ObjectiveID_ProtectTheFleet, "$61209", OT_Primary)    --kasfObjectiveCreate("ProtectTheFleet", LSTRING_Objective1[strCurLanguage], LSTRING_IonFrigs[strCurLanguage])
	Objective_SetDescription(ObjectiveID_ProtectTheFleet, "$60818")
	KASTimer_Start(TimerProtect[TeamName], 2)
	
end 


--
--  "watch" code for Mission04 MissionBriefing ProtectFI state
--
function Watch_Mission04_MissionBriefing_ProtectFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_ProtectFI")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_ProtectFI")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(TimerProtect[TeamName]) ~= 0) then 
	
	--kasJump("PTFPingAndPointer")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_ProtectFI")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_PTFPingAndPointer", "Watch_Mission04_MissionBriefing_ProtectFI")
	Init_Mission04_MissionBriefing_PTFPingAndPointer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing PTFPingAndPointer state
--
function Init_Mission04_MissionBriefing_PTFPingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (G_IAmTheWalrus == 1) then 
	
	PointerID_BadPOINTER = KASPointer_AddShip("TuranicHarrassFighters")    --kasfTutSetPointerTargetShip("BadPOINTER", kasAITeamShipsPtr("TuranicHarrassFighters"))
	elseif (G_IAmTheWalrus == 2) then 
	
	PointerID_BadPOINTER = KASPointer_AddShip("TuranicFighters")    --kasfTutSetPointerTargetShip("BadPOINTER", kasAITeamShipsPtr("TuranicFighters"))
	elseif (G_IAmTheWalrus == 3) then 
	
	PointerID_BadPOINTER = KASPointer_AddShip("StdCorvette1")    --kasfTutSetPointerTargetShip("BadPOINTER", kasAITeamShipsPtr("StdCorvette1"))
	elseif (G_IAmTheWalrus == 4) then 
	
	PointerID_BadPOINTER = KASPointer_AddShip("StdCorvette2")    --kasfTutSetPointerTargetShip("BadPOINTER", kasAITeamShipsPtr("StdCorvette2"))
	elseif (G_IAmTheWalrus == 5) then 
	
	PointerID_BadPOINTER = KASPointer_AddShip("MissileCorvette1")    --kasfTutSetPointerTargetShip("BadPOINTER", kasAITeamShipsPtr("MissileCorvette1"))
	end 
	KASTimer_Start(FIPointerTimer[TeamName], 9)
	
end 


--
--  "watch" code for Mission04 MissionBriefing PTFPingAndPointer state
--
function Watch_Mission04_MissionBriefing_PTFPingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_PTFPingAndPointer")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_PTFPingAndPointer")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(FIPointerTimer[TeamName]) ~= 0) then 
	
	--kasJump("PTFTransOut")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_PTFPingAndPointer")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_PTFTransOut", "Watch_Mission04_MissionBriefing_PTFPingAndPointer")
	Init_Mission04_MissionBriefing_PTFTransOut(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing PTFTransOut state
--
function Init_Mission04_MissionBriefing_PTFTransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(0, 2)    --kasfWideScreenOut(60)
	KASTimer_Start(FiTransOut[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing PTFTransOut state
--
function Watch_Mission04_MissionBriefing_PTFTransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if ((KASTimer_IsExpiredIfSoDestroy(FiTransOut[TeamName]) ~= 0) or (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0)) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_PTFTransOut")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_PTFTransOut")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing DP1TransIn state
--
function Init_Mission04_MissionBriefing_DP1TransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(2, 3)    --kasfWideScreenIn(90)
	--kasJump("DP1OpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1OpenSensors", "Init_Mission04_MissionBriefing_DP1TransIn")
	Init_Mission04_MissionBriefing_DP1OpenSensors(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 MissionBriefing DP1TransIn state
--
function Watch_Mission04_MissionBriefing_DP1TransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	
end 


--
--  "initialize" code for Mission04 MissionBriefing DP1OpenSensors state
--
function Init_Mission04_MissionBriefing_DP1OpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KASTimer_Start(FIOpenSensorsTimer[TeamName], 2)
	
end 


--
--  "watch" code for Mission04 MissionBriefing DP1OpenSensors state
--
function Watch_Mission04_MissionBriefing_DP1OpenSensors(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(FIOpenSensorsTimer[TeamName]) ~= 0) then 
	
	KAS_SensorsToggle(1, 1)    --kasfOpenSensors(1)
	KAS_UniversePause(1)    --kasfUniversePause()
	--kasJump("DP1CFI")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1OpenSensors")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1CFI", "Watch_Mission04_MissionBriefing_DP1OpenSensors")
	Init_Mission04_MissionBriefing_DP1CFI(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing DP1CFI state
--
function Init_Mission04_MissionBriefing_DP1CFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (ignoredFunction(0) == 0) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60500", 3)    --kasfSpeechEvent((501 + 4096 + 268435456), 0)
	elseif (ignoredFunction(0) == 1) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60501", 3)    --kasfSpeechEvent((500 + 4096 + 268435456), 0)
	end 
	KASObjective_Add(ObjectiveID_DestroyP1Ms, "$61213", OT_Primary)    --kasfObjectiveCreate("DestroyP1Ms", LSTRING_FIGoGetThem[strCurLanguage], LSTRING_FIGoGetThem[strCurLanguage])
	Objective_SetDescription(ObjectiveID_DestroyP1Ms, "$60819")
	KASTimer_Start(TimerDP1C[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing DP1CFI state
--
function Watch_Mission04_MissionBriefing_DP1CFI(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1CFI")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_DP1CFI")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(TimerDP1C[TeamName]) ~= 0) then 
	
	--kasJump("DP1PingAndPointer")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1CFI")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1PingAndPointer", "Watch_Mission04_MissionBriefing_DP1CFI")
	Init_Mission04_MissionBriefing_DP1PingAndPointer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing DP1PingAndPointer state
--
function Init_Mission04_MissionBriefing_DP1PingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	PointerID_GoodPOINTER = KASPointer_AddShip("P1Mothership")    --kasfTutSetPointerTargetShip("GoodPOINTER", kasAITeamShipsPtr("P1Mothership"))
	KASTimer_Start(FIPointerTimer[TeamName], 8)
	
end 


--
--  "watch" code for Mission04 MissionBriefing DP1PingAndPointer state
--
function Watch_Mission04_MissionBriefing_DP1PingAndPointer(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1PingAndPointer")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_DP1PingAndPointer")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(FIPointerTimer[TeamName]) ~= 0) then 
	
	--kasJump("DP1TransOut")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1PingAndPointer")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1TransOut", "Watch_Mission04_MissionBriefing_DP1PingAndPointer")
	Init_Mission04_MissionBriefing_DP1TransOut(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing DP1TransOut state
--
function Init_Mission04_MissionBriefing_DP1TransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(0, 2)    --kasfWideScreenOut(60)
	KASTimer_Start(FiTransOut[TeamName], 1)
	
end 


--
--  "watch" code for Mission04 MissionBriefing DP1TransOut state
--
function Watch_Mission04_MissionBriefing_DP1TransOut(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if ((KASTimer_IsExpiredIfSoDestroy(FiTransOut[TeamName]) ~= 0) or (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0)) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_DP1TransOut")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_DP1TransOut")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing FirstWarning state
--
function Init_Mission04_MissionBriefing_FirstWarning(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	G_FuckingStupid = 2 --created,set
	KAS_SubtitleAddOnce(Actor_HW1_BentusiTraders, "$60494", 3)    --kasfSpeechEvent((494 + 8192 + 268435456), 0)
	KASTimer_Start(UBetterStop[TeamName], 2)
	
end 


--
--  "watch" code for Mission04 MissionBriefing FirstWarning state
--
function Watch_Mission04_MissionBriefing_FirstWarning(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(UBetterStop[TeamName]) ~= 0) then 
	
	--kasJump("RUCrazy")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_FirstWarning")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_RUCrazy", "Watch_Mission04_MissionBriefing_FirstWarning")
	Init_Mission04_MissionBriefing_RUCrazy(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing RUCrazy state
--
function Init_Mission04_MissionBriefing_RUCrazy(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (SobGroup_Count("GrowSelection_FuckingStupid") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("FuckingStupid"))
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60495", 3)    --kasfSpeechEvent((495 + 4096 + 268435456), 0)
	else
	
	--kasJump("Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Init_Mission04_MissionBriefing_RUCrazy")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "watch" code for Mission04 MissionBriefing RUCrazy state
--
function Watch_Mission04_MissionBriefing_RUCrazy(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_RUCrazy")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_RUCrazy")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing YoureMeat state
--
function Init_Mission04_MissionBriefing_YoureMeat(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SubtitleAddOnce(Actor_HW1_BentusiTraders, "$60496", 3)    --kasfSpeechEvent((496 + 8192 + 268435456), 0)
	
end 


--
--  "watch" code for Mission04 MissionBriefing YoureMeat state
--
function Watch_Mission04_MissionBriefing_YoureMeat(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_YoureMeat")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_YoureMeat")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing CarrierTransIn state
--
function Init_Mission04_MissionBriefing_CarrierTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KAS_SetLetterboxState(2, 3)    --kasfWideScreenIn(90)
	KASTimer_Start(TimerForNikki[TeamName], 4)
	
end 


--
--  "watch" code for Mission04 MissionBriefing CarrierTransIn state
--
function Watch_Mission04_MissionBriefing_CarrierTransIn(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (KASTimer_IsExpiredIfSoDestroy(TimerForNikki[TeamName]) ~= 0) then 
	
	--kasJump("RenderedCarrier")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_CarrierTransIn")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_RenderedCarrier", "Watch_Mission04_MissionBriefing_CarrierTransIn")
	Init_Mission04_MissionBriefing_RenderedCarrier(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing RenderedCarrier state
--
function Init_Mission04_MissionBriefing_RenderedCarrier(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_FocusShips("P1Mothership")    --kasfTutCameraFocus(kasAITeamShipsPtr("P1Mothership"))
	KAS_FocusShips("P1Mothership")    --kasfTutCameraFocus(kasAITeamShipsPtr("P1Mothership"))
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60499", 3)    --kasfSpeechEvent((499 + 4096 + 268435456), 0)
	
end 


--
--  "watch" code for Mission04 MissionBriefing RenderedCarrier state
--
function Watch_Mission04_MissionBriefing_RenderedCarrier(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_SetLetterboxState(0, 1)    --kasfWideScreenOut(30)
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_FocusCancel()    --kasfTutCameraFocusCancel()
	KAS_FocusCancel()    --kasfTutCameraFocusCancel()
	--kasJump("Done")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_RenderedCarrier")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_Done", "Watch_Mission04_MissionBriefing_RenderedCarrier")
	Init_Mission04_MissionBriefing_Done(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissionBriefing Done state
--
function Init_Mission04_MissionBriefing_Done(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	KASPointer_RemoveAll()    --kasfTutRemoveAllPointers()
	KAS_UniversePause(0)    --kasfUniverseUnpause()
	if (Sensors_ManagerIsActive() == 1) then     --kasfSensorsIsOpen(1)
	
	KAS_SensorsToggle(0, 1)    --kasfCloseSensors(1)
	end 
	G_CLICK_ProtectTheFleet = 0 --destroyed
	G_CLICK_BuildResourceController = 0 --destroyed
	G_CLICK_DestroyP1Ms = 0 --destroyed
	G_CLICK_CollectResources = 0 --destroyed
	
end 


--
--  "watch" code for Mission04 MissionBriefing Done state
--
function Watch_Mission04_MissionBriefing_Done(TeamName)
	--FSM: FSM_Mission04_MissionBriefing
	--TeamName = "TeamOfDummys"
	if ((KASTimer_IsExpired(TimerID_G_TimerSecondaryObjective01) ~= 0) and ( not(KASObjective_GetState(ObjectiveID_BuildResourceController) == 1)) and ( not(G_TradersRHere == 1))) then     --kasfObjectiveGet("BuildResourceController")
	
	KAS_FindEnemiesInside("MajorResourceVolume", "GrowSelection_PResourcing")    --kasfFindEnemiesInside(kasVolumePtr("MajorResourceVolume"), kasGrowSelectionPtr("PResourcing"), 500)
	KAS_FillShipsByType_Normal("GrowSelection_PResourceController", "GrowSelection_PResourcing", "ResourceController")    --kasfShipsSelectType(kasGrowSelectionPtr("PResourceController"), kasGrowSelectionPtr("PResourcing"), "ResourceController")
	if ((KAS_FindPlayerShipsOfType("GrowSelection_PlayerShips", "ResourceController", 0) == 0) and ( not(GotVar[TeamName] == 1))) then     --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("PlayerShips"), "ResourceController")
	
	GotVar[TeamName] = 1 --created,set
	--kasJump("HasTech")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_HasTech", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_HasTech(TeamName)
	return
	elseif ((KAS_FindPlayerShipsOfType("GrowSelection_PlayerShips", "ResourceController", 0) ~= 0) and ( not(GotVar2[TeamName] == 1))) then     --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("PlayerShips"), "ResourceController")
	
	GotVar2[TeamName] = 1 --created,set
	--kasJump("HasShip")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_HasShip", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_HasShip(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_PResourceController") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PResourceController"))
	
	KASObjective_SetState(ObjectiveID_BuildResourceController, 1)    --kasfObjectiveSet("BuildResourceController", 1)
	end 
	end 
	if (_VIFONCE010[TeamName] == 0 and ((G_ResourcersAttacked == 1) or (SobGroup_Count("TuranicHarrassFighters") < 1))) then  -- "ifonce" #10    --kasfShipsCount(kasAITeamShipsPtr("TuranicHarrassFighters"))
	
	_VIFONCE010[TeamName] = 1 --created,set;
	KAS_MusicPlayType("data:sound/music/battle/B01_TuranicRaidersLong", MUS_Ambient)    --kasfMusicPlay(12)
	--kasJump("PTFTransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_PTFTransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_PTFTransIn(TeamName)
	return
	end 
	if (_VIFONCE011[TeamName] == 0 and (G_IonFrigsHere == 1)) then  -- "ifonce" #11
	
	_VIFONCE011[TeamName] = 1 --created,set;
	--kasJump("FrigatesFITransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FrigatesFITransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_FrigatesFITransIn(TeamName)
	return
	end 
	if (_VIFONCE012[TeamName] == 0 and ((G_IcantLetYouGo == 1) and (SobGroup_Count("P1Mothership") > 0))) then  -- "ifonce" #12    --kasfShipsCount(kasAITeamShipsPtr("P1Mothership"))
	
	_VIFONCE012[TeamName] = 1 --created,set;
	--kasJump("DP1TransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1TransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_DP1TransIn(TeamName)
	return
	end 
	if (G_FuckingStupid == 1) then 
	
	--kasJump("FirstWarning")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_FirstWarning", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_FirstWarning(TeamName)
	return
	end 
	if (_VIFONCE013[TeamName] == 0 and (G_FuckingStupid2 == 1)) then  -- "ifonce" #13
	
	_VIFONCE013[TeamName] = 1 --created,set;
	--kasJump("YoureMeat")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_YoureMeat", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_YoureMeat(TeamName)
	return
	end 
	if (_VIFONCE014[TeamName] == 0 and (KAS_ShipHasBeenRendered("P1Mothership", 3) ~= 0)) then  -- "ifonce" #14    --kasfRenderedShips(kasAITeamShipsPtr("P1Mothership"), 3)
	
	_VIFONCE014[TeamName] = 1 --created,set;
	--kasJump("CarrierTransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_CarrierTransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_CarrierTransIn(TeamName)
	return
	end 
	if (G_CLICK_BuildResourceController ~= 0) then 
	
	--kasJump("HasTech")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_HasTech", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_HasTech(TeamName)
	return
	end 
	if (G_CLICK_CollectResources ~= 0) then 
	
	--kasJump("ResourceVeinsTransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_ResourceVeinsTransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_ResourceVeinsTransIn(TeamName)
	return
	end 
	if (G_CLICK_DestroyP1Ms ~= 0) then 
	
	--kasJump("DP1TransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_DP1TransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_DP1TransIn(TeamName)
	return
	end 
	if (G_CLICK_ProtectTheFleet ~= 0) then 
	
	--kasJump("PTFTransIn")
	--KASRule_Remove("FSM_Mission04_MissionBriefing", "Watch_Mission04_MissionBriefing_Done")
	KASRule_Add(TeamName, "Watch_Mission04_MissionBriefing_PTFTransIn", "Watch_Mission04_MissionBriefing_Done")
	Init_Mission04_MissionBriefing_PTFTransIn(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters FSM
--
function Init_Mission04_TuranicFighters(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	KAS_SetHidden("TuranicFighters", 1)    --kasfHideShips(kasAITeamShipsPtr("TuranicFighters"))
	requested[TeamName] = 0 --created,set
	needed[TeamName] = 0 --created,set
	newships[TeamName] = 0 --created,set
	DontBuild[TeamName] = 0 --created,set
	
end 


--
--  "watch" code for Mission04 TuranicFighters FSM
--
function Watch_Mission04_TuranicFighters(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	if ((SobGroup_Count(TeamName) > 0) and (DontBuild[TeamName] == 0)) then     --kasfTeamCount()
	
	if (SobGroup_Count(TeamName) + requested[TeamName] < KAS_TeamCountOriginal(TeamName)) then     --kasfTeamCount()    --kasfTeamCountOriginal()
	
	needed[TeamName] = KAS_TeamCountOriginal(TeamName) - (SobGroup_Count(TeamName) + requested[TeamName]) --set    --kasfTeamCount()    --kasfTeamCountOriginal()
	KAS_RequestShipsOriginal(TeamName, needed[TeamName])    --kasfRequestShipsOriginal(___KAS_SCOPED_VAR____needed_)
	DontBuild[TeamName] = 1 --set
	KASTimer_Start(BuildAgain[TeamName], 10)
	requested[TeamName] = requested[TeamName] + needed[TeamName] --set
	end 
	newships[TeamName] = KAS_NumberNewShipsAdded(TeamName) --set    --kasfNewShipsAdded()
	if (newships[TeamName] ~= 0) then 
	
	requested[TeamName] = requested[TeamName] - newships[TeamName] --set
	end 
	if (KASTimer_IsExpiredIfSoDestroy(BuildAgain[TeamName]) ~= 0) then 
	
	DontBuild[TeamName] = 0 --set
	end 
	end 
	if (SobGroup_Count("TuranicFighters") < 1) then     --kasfShipsCount(kasAITeamShipsPtr("TuranicFighters"))
	
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_Dead", "Watch_Mission04_TuranicFighters")
	Init_Mission04_TuranicFighters_Dead(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_DefendMothership", "Watch_Mission04_TuranicFighters")
	Init_Mission04_TuranicFighters_DefendMothership(TeamName)
	return
	elseif ((KAS_UnderAttack(TeamName, "GrowSelection_AttackFighters") ~= 0) and (SobGroup_Count(TeamName) <= (KAS_TeamCountOriginal(TeamName) / 2))) then     --kasfTeamCount()    --kasfTeamCountOriginal()    --kasfUnderAttack(kasGrowSelectionPtr("AttackFighters"))
	
	--kasJump("DefendYourSelf")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_DefendYourSelf", "Watch_Mission04_TuranicFighters")
	Init_Mission04_TuranicFighters_DefendYourSelf(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and ( not(G_StartingTimer == 1))) then 
	
	--kasJump("AttackTimer")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_AttackTimer", "Watch_Mission04_TuranicFighters")
	Init_Mission04_TuranicFighters_AttackTimer(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and (G_StartingTimer == 1)) then 
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_AssaultMothership", "Watch_Mission04_TuranicFighters")
	Init_Mission04_TuranicFighters_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters DefendMothership state
--
function Init_Mission04_TuranicFighters_DefendMothership(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "watch" code for Mission04 TuranicFighters DefendMothership state
--
function Watch_Mission04_TuranicFighters_DefendMothership(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	if (SobGroup_Count("GrowSelection_AttackingFighters") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackingFighters")    --kasfAttack(kasGrowSelectionPtr("AttackingFighters"))
	elseif (SobGroup_Count("GrowSelection_AttackingFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingCorvettes")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingCapitalShips")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1) and (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_EnemyAttackers")    --kasfAttack(kasGrowSelectionPtr("EnemyAttackers"))
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_AssaultMothership", "Watch_Mission04_TuranicFighters_DefendMothership")
	Init_Mission04_TuranicFighters_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters AttackTimer state
--
function Init_Mission04_TuranicFighters_AttackTimer(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "watch" code for Mission04 TuranicFighters AttackTimer state
--
function Watch_Mission04_TuranicFighters_AttackTimer(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	if (_VIFONCE015[TeamName] == 0 and (KAS_MessageReceived(TeamName, "AttackPlayerMothership") ~= 0)) then  -- "ifonce" #15    --kasfMsgReceived("AttackPlayerMothership")
	
	_VIFONCE015[TeamName] = 1 --created,set;
	KASTimer_Start(FighterDelay[TeamName], (RandomIntRange(30, 100)))    --kasfRandom(30, 100)
	end 
	if (_VIFONCE016[TeamName] == 0 and (KASTimer_IsExpired(FighterDelay[TeamName]) ~= 0)) then  -- "ifonce" #16
	
	_VIFONCE016[TeamName] = 1 --created,set;
	G_StartingTimer = 1 --created,set
	KAS_SetHidden("TuranicFighters", 0)    --kasfUnhideShips(kasAITeamShipsPtr("TuranicFighters"))
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters_AttackTimer")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_AssaultMothership", "Watch_Mission04_TuranicFighters_AttackTimer")
	Init_Mission04_TuranicFighters_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters DefendYourSelf state
--
function Init_Mission04_TuranicFighters_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "watch" code for Mission04 TuranicFighters DefendYourSelf state
--
function Watch_Mission04_TuranicFighters_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	if ((KAS_UnderAttack(TeamName, "GrowSelection_AttackFighters") > 0) and (SobGroup_Count(TeamName) <= (KAS_TeamCountOriginal(TeamName) / 2))) then     --kasfTeamCount()    --kasfTeamCountOriginal()    --kasfUnderAttack(kasGrowSelectionPtr("AttackFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackFighters")    --kasfAttack(kasGrowSelectionPtr("AttackFighters"))
	end 
	if (SobGroup_Count("GrowSelection_AttackFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackFighters"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_TuranicFighters", "Watch_Mission04_TuranicFighters_DefendYourSelf")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicFighters_AssaultMothership", "Watch_Mission04_TuranicFighters_DefendYourSelf")
	Init_Mission04_TuranicFighters_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters AssaultMothership state
--
function Init_Mission04_TuranicFighters_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "watch" code for Mission04 TuranicFighters AssaultMothership state
--
function Watch_Mission04_TuranicFighters_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	if (_VIFONCE017[TeamName] == 0 and (( not(G_ResourcersAttacked == 1)) and (KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearNone", 5250) ~= 0))) then  -- "ifonce" #17    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearNone"), 15000)
	
	_VIFONCE017[TeamName] = 1 --created,set;
	G_ResourcersAttacked = 1 --created,set
	G_IAmTheWalrus = 2 --set
	end 
	if (SobGroup_Count("GrowSelection_PlayerCapitalShips") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCapitalShips")    --kasfAttack(kasGrowSelectionPtr("PlayerCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1) and (SobGroup_Count("GrowSelection_PlayerFighters") > 0)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerFighters")    --kasfAttack(kasGrowSelectionPtr("PlayerFighters"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCorvettes")    --kasfAttack(kasGrowSelectionPtr("PlayerCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCorvettes") < 1) and (SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerShips")    --kasfAttack(kasGrowSelectionPtr("PlayerShips"))
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicFighters Dead state
--
function Init_Mission04_TuranicFighters_Dead(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "watch" code for Mission04 TuranicFighters Dead state
--
function Watch_Mission04_TuranicFighters_Dead(TeamName)
	--FSM: FSM_Mission04_TuranicFighters
	--TeamName = TuranicFighters
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters FSM
--
function Init_Mission04_TuranicHarrassFighters(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	requested[TeamName] = 0 --created,set
	needed[TeamName] = 0 --created,set
	newships[TeamName] = 0 --created,set
	--kasJump("NeverNeverLand")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_NeverNeverLand", "Init_Mission04_TuranicHarrassFighters")
	Init_Mission04_TuranicHarrassFighters_NeverNeverLand(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters FSM
--
function Watch_Mission04_TuranicHarrassFighters(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	if (SobGroup_Count("TuranicHarrassFighters") < 1) then     --kasfShipsCount(kasAITeamShipsPtr("TuranicHarrassFighters"))
	
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_Dead", "Watch_Mission04_TuranicHarrassFighters")
	Init_Mission04_TuranicHarrassFighters_Dead(TeamName)
	return
	end 
	KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_InTheArea", 1750)    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("InTheArea"), 5000)
	KAS_FillShipsByType_Normal("GrowSelection_ResourcersTemp", "GrowSelection_InTheArea", "ResourceController")    --kasfShipsSelectType(kasGrowSelectionPtr("ResourcersTemp"), kasGrowSelectionPtr("InTheArea"), "ResourceController")
	KAS_FillShipsByType_Normal("GrowSelection_ResourcersNearby", "GrowSelection_InTheArea", "ResourceCollector")    --kasfShipsSelectType(kasGrowSelectionPtr("ResourcersNearby"), kasGrowSelectionPtr("InTheArea"), "ResourceCollector")
	KAS_ShipsAdd("GrowSelection_ResourcersNearby", "GrowSelection_ResourcersTemp")    --kasfShipsAdd(kasGrowSelectionPtr("ResourcersNearby"), kasGrowSelectionPtr("ResourcersTemp"))
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters NeverNeverLand state
--
function Init_Mission04_TuranicHarrassFighters_NeverNeverLand(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters NeverNeverLand state
--
function Watch_Mission04_TuranicHarrassFighters_NeverNeverLand(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	if (KAS_MessageReceived(TeamName, "TradersGone") ~= 0) then     --kasfMsgReceived("TradersGone")
	
	KAS_TeamHyperspaceIn(TeamName, "HarrassIn")    --kasfTeamHyperspaceIn(kasVectorPtr("HarrassIn"))
	--kasJump("Prowling")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters_NeverNeverLand")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_Prowling", "Watch_Mission04_TuranicHarrassFighters_NeverNeverLand")
	Init_Mission04_TuranicHarrassFighters_Prowling(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters DefendSelf state
--
function Init_Mission04_TuranicHarrassFighters_DefendSelf(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters DefendSelf state
--
function Watch_Mission04_TuranicHarrassFighters_DefendSelf(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	if (KAS_UnderAttack(TeamName, "GrowSelection_AttackHarrassers") > 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackHarrassers"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackHarrassers")    --kasfAttack(kasGrowSelectionPtr("AttackHarrassers"))
	elseif (SobGroup_Count("GrowSelection_AttackHarrassers") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackHarrassers"))
	
	--kasJump("Prowling")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters_DefendSelf")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_Prowling", "Watch_Mission04_TuranicHarrassFighters_DefendSelf")
	Init_Mission04_TuranicHarrassFighters_Prowling(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters Prowling state
--
function Init_Mission04_TuranicHarrassFighters_Prowling(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	SobGroup_FollowPath(TeamName, "HarrassPath", 1, 1, 0)    --kasfPatrolPath(kasPathPtr("HarrassPath"))
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters Prowling state
--
function Watch_Mission04_TuranicHarrassFighters_Prowling(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	if (KAS_UnderAttack(TeamName, "GrowSelection_AttackHarrassers") > 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackHarrassers"))
	
	G_ResourcersAttacked = 1 --created,set
	if (_VIFONCE018[TeamName] == 0 and (G_IAmTheWalrus == 0)) then  -- "ifonce" #18
	
	_VIFONCE018[TeamName] = 1 --created,set;
	G_IAmTheWalrus = 1 --set
	end 
	--kasJump("DefendSelf")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters_Prowling")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_DefendSelf", "Watch_Mission04_TuranicHarrassFighters_Prowling")
	Init_Mission04_TuranicHarrassFighters_DefendSelf(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_InTheArea") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("InTheArea"))
	
	--kasJump("AssaultEnemy")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters_Prowling")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_AssaultEnemy", "Watch_Mission04_TuranicHarrassFighters_Prowling")
	Init_Mission04_TuranicHarrassFighters_AssaultEnemy(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters AssaultEnemy state
--
function Init_Mission04_TuranicHarrassFighters_AssaultEnemy(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	KAS_MusicPlayType("data:sound/music/battle/B01_TuranicRaidersLong", MUS_Ambient)    --kasfMusicPlay(12)
	G_ResourcersAttacked = 1 --created,set
	if (_VIFONCE019[TeamName] == 0 and (G_IAmTheWalrus == 0)) then  -- "ifonce" #19
	
	_VIFONCE019[TeamName] = 1 --created,set;
	G_IAmTheWalrus = 1 --set
	end 
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters AssaultEnemy state
--
function Watch_Mission04_TuranicHarrassFighters_AssaultEnemy(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	if (SobGroup_Count("GrowSelection_ResourcersNearby") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("ResourcersNearby"))
	
	KAS_Attack(TeamName, "GrowSelection_ResourcersNearby")    --kasfAttack(kasGrowSelectionPtr("ResourcersNearby"))
	elseif ((SobGroup_Count("GrowSelection_ResourcersNearby") < 1) and (SobGroup_Count("GrowSelection_InTheArea") > 0)) then     --kasfShipsCount(kasGrowSelectionPtr("InTheArea"))    --kasfShipsCount(kasGrowSelectionPtr("ResourcersNearby"))
	
	KAS_Attack(TeamName, "GrowSelection_InTheArea")    --kasfAttack(kasGrowSelectionPtr("InTheArea"))
	elseif ((SobGroup_Count("GrowSelection_ResourcersNearby") < 1) and (SobGroup_Count("GrowSelection_InTheArea") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("InTheArea"))    --kasfShipsCount(kasGrowSelectionPtr("ResourcersNearby"))
	
	--kasJump("Prowling")
	--KASRule_Remove("FSM_Mission04_TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters_AssaultEnemy")
	KASRule_Add(TeamName, "Watch_Mission04_TuranicHarrassFighters_Prowling", "Watch_Mission04_TuranicHarrassFighters_AssaultEnemy")
	Init_Mission04_TuranicHarrassFighters_Prowling(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 TuranicHarrassFighters Dead state
--
function Init_Mission04_TuranicHarrassFighters_Dead(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	
end 


--
--  "watch" code for Mission04 TuranicHarrassFighters Dead state
--
function Watch_Mission04_TuranicHarrassFighters_Dead(TeamName)
	--FSM: FSM_Mission04_TuranicHarrassFighters
	--TeamName = TuranicHarrassFighters
	
end 


--
--  "initialize" code for Mission04 IonFrig1 FSM
--
function Init_Mission04_IonFrig1(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_Waiting", "Init_Mission04_IonFrig1")
	Init_Mission04_IonFrig1_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 IonFrig1 FSM
--
function Watch_Mission04_IonFrig1(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	if (KAS_UnderAttack(TeamName, "GrowSelection_AttackFrig1") > 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackFrig1"))
	
	KAS_FillShipsByClass_Normal("GrowSelection_PCapShipsAttackFrig1", "GrowSelection_AttackFrig1", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("PCapShipsAttackFrig1"), kasGrowSelectionPtr("AttackFrig1"), "CLASS_CapitalShips")
	--kasJump("LovingMe")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_LovingMe", "Watch_Mission04_IonFrig1")
	Init_Mission04_IonFrig1_LovingMe(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig1 Waiting state
--
function Init_Mission04_IonFrig1_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	
end 


--
--  "watch" code for Mission04 IonFrig1 Waiting state
--
function Watch_Mission04_IonFrig1_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	if (G_ResourcersAttacked == 1) then 
	
	--kasJump("TimerToLeave")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_TimerToLeave", "Watch_Mission04_IonFrig1_Waiting")
	Init_Mission04_IonFrig1_TimerToLeave(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig1 LovingMe state
--
function Init_Mission04_IonFrig1_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	
end 


--
--  "watch" code for Mission04 IonFrig1 LovingMe state
--
function Watch_Mission04_IonFrig1_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	if ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig1") > 0) and ( not(NoSoupForYou[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig1"))
	
	NoSoupForYou[TeamName] = 1 --created,set
	KAS_MoveAttack(TeamName, "GrowSelection_PCapShipsAttackFrig1")    --kasfMoveAttack(kasGrowSelectionPtr("PCapShipsAttackFrig1"))
	elseif ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig1") < 1) and (NoSoupForYou[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig1"))
	
	NoSoupForYou[TeamName] = 0 --destroyed
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_AssaultMothership", "Watch_Mission04_IonFrig1_LovingMe")
	Init_Mission04_IonFrig1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig1 TimerToLeave state
--
function Init_Mission04_IonFrig1_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	KASTimer_Start(FrigTimer1[TeamName], 200)
	
end 


--
--  "watch" code for Mission04 IonFrig1 TimerToLeave state
--
function Watch_Mission04_IonFrig1_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	if (_VIFONCE020[TeamName] == 0 and (KASTimer_IsExpired(FrigTimer1[TeamName]) ~= 0)) then  -- "ifonce" #20
	
	_VIFONCE020[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceIn(TeamName, "IonFrig1Point")    --kasfTeamHyperspaceIn(kasVectorPtr("IonFrig1Point"))
	G_IonFrigsHere = 1 --created,set
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1_TimerToLeave")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_CircleAttackMothership", "Watch_Mission04_IonFrig1_TimerToLeave")
	Init_Mission04_IonFrig1_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig1 AssaultMothership state
--
function Init_Mission04_IonFrig1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	
end 


--
--  "watch" code for Mission04 IonFrig1 AssaultMothership state
--
function Watch_Mission04_IonFrig1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1_AssaultMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_CircleAttackMothership", "Watch_Mission04_IonFrig1_AssaultMothership")
	Init_Mission04_IonFrig1_CircleAttackMothership(TeamName)
	return
	
end 


--
--  "initialize" code for Mission04 IonFrig1 CircleAttackMothership state
--
function Init_Mission04_IonFrig1_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	KAS_MoveAttack(TeamName, "GrowSelection_PlayerMothership")    --kasfMoveAttack(kasGrowSelectionPtr("PlayerMothership"))
	
end 


--
--  "watch" code for Mission04 IonFrig1 CircleAttackMothership state
--
function Watch_Mission04_IonFrig1_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig1
	--TeamName = IonFrig1
	KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearFrig1", 2800)    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearFrig1"), 8000)
	KAS_FillShipsByType_Normal("GrowSelection_NastyCaps1", "GrowSelection_NearFrig1", "SalvageCorvette")    --kasfShipsSelectType(kasGrowSelectionPtr("NastyCaps1"), kasGrowSelectionPtr("NearFrig1"), "SalCapCorvette")
	if ((SobGroup_Count("GrowSelection_NastyCaps1") > 0) and ( not(WasSalCaps[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps1"))
	
	WasSalCaps[TeamName] = 1 --created,set
	KAS_Attack(TeamName, "GrowSelection_NastyCaps1")    --kasfAttack(kasGrowSelectionPtr("NastyCaps1"))
	elseif ((SobGroup_Count("GrowSelection_NastyCaps1") < 1) and (WasSalCaps[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps1"))
	
	WasSalCaps[TeamName] = 0 --destroyed
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig1", "Watch_Mission04_IonFrig1_CircleAttackMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig1_CircleAttackMothership", "Watch_Mission04_IonFrig1_CircleAttackMothership")
	Init_Mission04_IonFrig1_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig2 FSM
--
function Init_Mission04_IonFrig2(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_Waiting", "Init_Mission04_IonFrig2")
	Init_Mission04_IonFrig2_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 IonFrig2 FSM
--
function Watch_Mission04_IonFrig2(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	if (KAS_UnderAttack(TeamName, "GrowSelection_AttackFrig2") > 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackFrig2"))
	
	KAS_FillShipsByClass_Normal("GrowSelection_PCapShipsAttackFrig2", "GrowSelection_AttackFrig2", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("PCapShipsAttackFrig2"), kasGrowSelectionPtr("AttackFrig2"), "CLASS_CapitalShips")
	--kasJump("LovingMe")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_LovingMe", "Watch_Mission04_IonFrig2")
	Init_Mission04_IonFrig2_LovingMe(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig2 LovingMe state
--
function Init_Mission04_IonFrig2_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	
end 


--
--  "watch" code for Mission04 IonFrig2 LovingMe state
--
function Watch_Mission04_IonFrig2_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	if ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig2") > 0) and ( not(NoSoupForYou[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig2"))
	
	NoSoupForYou[TeamName] = 1 --created,set
	KAS_MoveAttack(TeamName, "GrowSelection_PCapShipsAttackFrig2")    --kasfMoveAttack(kasGrowSelectionPtr("PCapShipsAttackFrig2"))
	elseif ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig2") < 1) and (NoSoupForYou[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig2"))
	
	NoSoupForYou[TeamName] = 0 --destroyed
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_AssaultMothership", "Watch_Mission04_IonFrig2_LovingMe")
	Init_Mission04_IonFrig2_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig2 Waiting state
--
function Init_Mission04_IonFrig2_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	
end 


--
--  "watch" code for Mission04 IonFrig2 Waiting state
--
function Watch_Mission04_IonFrig2_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	if ((G_ResourcersAttacked == 1) and ( not(KillMyLandLord[TeamName] == 1))) then 
	
	KillMyLandLord[TeamName] = 1 --created,set
	--kasJump("TimerToLeave")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_TimerToLeave", "Watch_Mission04_IonFrig2_Waiting")
	Init_Mission04_IonFrig2_TimerToLeave(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig2 TimerToLeave state
--
function Init_Mission04_IonFrig2_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	KASTimer_Start(FrigTimer2[TeamName], 200)
	
end 


--
--  "watch" code for Mission04 IonFrig2 TimerToLeave state
--
function Watch_Mission04_IonFrig2_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	if (_VIFONCE021[TeamName] == 0 and (KASTimer_IsExpired(FrigTimer2[TeamName]) ~= 0)) then  -- "ifonce" #21
	
	_VIFONCE021[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceIn(TeamName, "IonFrig2Point")    --kasfTeamHyperspaceIn(kasVectorPtr("IonFrig2Point"))
	G_IonFrigsHere = 1 --created,set
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2_TimerToLeave")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_CircleAttackMothership", "Watch_Mission04_IonFrig2_TimerToLeave")
	Init_Mission04_IonFrig2_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig2 AssaultMothership state
--
function Init_Mission04_IonFrig2_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	
end 


--
--  "watch" code for Mission04 IonFrig2 AssaultMothership state
--
function Watch_Mission04_IonFrig2_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2_AssaultMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_CircleAttackMothership", "Watch_Mission04_IonFrig2_AssaultMothership")
	Init_Mission04_IonFrig2_CircleAttackMothership(TeamName)
	return
	
end 


--
--  "initialize" code for Mission04 IonFrig2 CircleAttackMothership state
--
function Init_Mission04_IonFrig2_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	KAS_MoveAttack(TeamName, "GrowSelection_PlayerMothership")    --kasfMoveAttack(kasGrowSelectionPtr("PlayerMothership"))
	
end 


--
--  "watch" code for Mission04 IonFrig2 CircleAttackMothership state
--
function Watch_Mission04_IonFrig2_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig2
	--TeamName = IonFrig2
	KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearFrig2", 2800)    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearFrig2"), 8000)
	KAS_FillShipsByType_Normal("GrowSelection_NastyCaps2", "GrowSelection_NearFrig2", "SalvageCorvette")    --kasfShipsSelectType(kasGrowSelectionPtr("NastyCaps2"), kasGrowSelectionPtr("NearFrig2"), "SalCapCorvette")
	if ((SobGroup_Count("GrowSelection_NastyCaps2") > 0) and ( not(WasSalCaps[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps2"))
	
	WasSalCaps[TeamName] = 1 --created,set
	KAS_Attack(TeamName, "GrowSelection_NastyCaps2")    --kasfAttack(kasGrowSelectionPtr("NastyCaps2"))
	elseif ((SobGroup_Count("GrowSelection_NastyCaps2") < 1) and (WasSalCaps[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps2"))
	
	WasSalCaps[TeamName] = 0 --destroyed
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig2", "Watch_Mission04_IonFrig2_CircleAttackMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig2_CircleAttackMothership", "Watch_Mission04_IonFrig2_CircleAttackMothership")
	Init_Mission04_IonFrig2_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig3 FSM
--
function Init_Mission04_IonFrig3(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_Waiting", "Init_Mission04_IonFrig3")
	Init_Mission04_IonFrig3_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 IonFrig3 FSM
--
function Watch_Mission04_IonFrig3(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	if (KAS_UnderAttack(TeamName, "GrowSelection_AttackFrig3") > 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackFrig3"))
	
	KAS_FillShipsByClass_Normal("GrowSelection_PCapShipsAttackFrig3", "GrowSelection_AttackFrig3", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("PCapShipsAttackFrig3"), kasGrowSelectionPtr("AttackFrig3"), "CLASS_CapitalShips")
	--kasJump("LovingMe")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_LovingMe", "Watch_Mission04_IonFrig3")
	Init_Mission04_IonFrig3_LovingMe(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig3 Waiting state
--
function Init_Mission04_IonFrig3_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	
end 


--
--  "watch" code for Mission04 IonFrig3 Waiting state
--
function Watch_Mission04_IonFrig3_Waiting(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	if ((G_ResourcersAttacked == 1) and ( not(KillMyLandLord[TeamName] == 1))) then 
	
	KillMyLandLord[TeamName] = 1 --created,set
	--kasJump("TimerToLeave")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_TimerToLeave", "Watch_Mission04_IonFrig3_Waiting")
	Init_Mission04_IonFrig3_TimerToLeave(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig3 LovingMe state
--
function Init_Mission04_IonFrig3_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	
end 


--
--  "watch" code for Mission04 IonFrig3 LovingMe state
--
function Watch_Mission04_IonFrig3_LovingMe(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	if ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig3") > 0) and ( not(NoSoupForYou[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig3"))
	
	NoSoupForYou[TeamName] = 1 --created,set
	KAS_MoveAttack(TeamName, "GrowSelection_PCapShipsAttackFrig3")    --kasfMoveAttack(kasGrowSelectionPtr("PCapShipsAttackFrig3"))
	elseif ((SobGroup_Count("GrowSelection_PCapShipsAttackFrig3") < 1) and (NoSoupForYou[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackFrig3"))
	
	NoSoupForYou[TeamName] = 0 --destroyed
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_AssaultMothership", "Watch_Mission04_IonFrig3_LovingMe")
	Init_Mission04_IonFrig3_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig3 TimerToLeave state
--
function Init_Mission04_IonFrig3_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	KASTimer_Start(FrigTimer3[TeamName], 200)
	
end 


--
--  "watch" code for Mission04 IonFrig3 TimerToLeave state
--
function Watch_Mission04_IonFrig3_TimerToLeave(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	if (_VIFONCE022[TeamName] == 0 and (KASTimer_IsExpired(FrigTimer3[TeamName]) ~= 0)) then  -- "ifonce" #22
	
	_VIFONCE022[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceIn(TeamName, "IonFrig3Point")    --kasfTeamHyperspaceIn(kasVectorPtr("IonFrig3Point"))
	G_IonFrigsHere = 1 --created,set
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3_TimerToLeave")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_CircleAttackMothership", "Watch_Mission04_IonFrig3_TimerToLeave")
	Init_Mission04_IonFrig3_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 IonFrig3 AssaultMothership state
--
function Init_Mission04_IonFrig3_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	
end 


--
--  "watch" code for Mission04 IonFrig3 AssaultMothership state
--
function Watch_Mission04_IonFrig3_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3_AssaultMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_CircleAttackMothership", "Watch_Mission04_IonFrig3_AssaultMothership")
	Init_Mission04_IonFrig3_CircleAttackMothership(TeamName)
	return
	
end 


--
--  "initialize" code for Mission04 IonFrig3 CircleAttackMothership state
--
function Init_Mission04_IonFrig3_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	KAS_MoveAttack(TeamName, "GrowSelection_PlayerMothership")    --kasfMoveAttack(kasGrowSelectionPtr("PlayerMothership"))
	
end 


--
--  "watch" code for Mission04 IonFrig3 CircleAttackMothership state
--
function Watch_Mission04_IonFrig3_CircleAttackMothership(TeamName)
	--FSM: FSM_Mission04_IonFrig3
	--TeamName = IonFrig3
	KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearFrig3", 2800)    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearFrig3"), 8000)
	KAS_FillShipsByType_Normal("GrowSelection_NastyCaps3", "GrowSelection_NearFrig3", "SalvageCorvette")    --kasfShipsSelectType(kasGrowSelectionPtr("NastyCaps3"), kasGrowSelectionPtr("NearFrig3"), "SalCapCorvette")
	if ((SobGroup_Count("GrowSelection_NastyCaps3") > 0) and ( not(WasSalCaps[TeamName] == 1))) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps3"))
	
	WasSalCaps[TeamName] = 1 --created,set
	KAS_Attack(TeamName, "GrowSelection_NastyCaps3")    --kasfAttack(kasGrowSelectionPtr("NastyCaps3"))
	elseif ((SobGroup_Count("GrowSelection_NastyCaps3") < 1) and (WasSalCaps[TeamName] == 1)) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps3"))
	
	WasSalCaps[TeamName] = 0 --destroyed
	--kasJump("CircleAttackMothership")
	--KASRule_Remove("FSM_Mission04_IonFrig3", "Watch_Mission04_IonFrig3_CircleAttackMothership")
	KASRule_Add(TeamName, "Watch_Mission04_IonFrig3_CircleAttackMothership", "Watch_Mission04_IonFrig3_CircleAttackMothership")
	Init_Mission04_IonFrig3_CircleAttackMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 FSM
--
function Init_Mission04_StdCorvette1(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	KAS_SetHidden("StdCorvette1", 1)    --kasfHideShips(kasAITeamShipsPtr("StdCorvette1"))
	requested[TeamName] = 0 --created,set
	needed[TeamName] = 0 --created,set
	newships[TeamName] = 0 --created,set
	DontBuild[TeamName] = 0 --created,set
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_Waiting", "Init_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 StdCorvette1 FSM
--
function Watch_Mission04_StdCorvette1(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if ((SobGroup_Count(TeamName) > 0) and (DontBuild[TeamName] == 0)) then     --kasfTeamCount()
	
	if (SobGroup_Count(TeamName) + requested[TeamName] < KAS_TeamCountOriginal(TeamName)) then     --kasfTeamCount()    --kasfTeamCountOriginal()
	
	needed[TeamName] = KAS_TeamCountOriginal(TeamName) - (SobGroup_Count(TeamName) + requested[TeamName]) --set    --kasfTeamCount()    --kasfTeamCountOriginal()
	KAS_RequestShipsOriginal(TeamName, needed[TeamName])    --kasfRequestShipsOriginal(___KAS_SCOPED_VAR____needed_)
	DontBuild[TeamName] = 1 --set
	KASTimer_Start(BuildAgain[TeamName], 20)
	requested[TeamName] = requested[TeamName] + needed[TeamName] --set
	end 
	newships[TeamName] = KAS_NumberNewShipsAdded(TeamName) --set    --kasfNewShipsAdded()
	if (newships[TeamName] ~= 0) then 
	
	requested[TeamName] = requested[TeamName] - newships[TeamName] --set
	end 
	if (KASTimer_IsExpiredIfSoDestroy(BuildAgain[TeamName]) ~= 0) then 
	
	DontBuild[TeamName] = 0 --set
	end 
	end 
	if (SobGroup_Count("StdCorvette1") < 1) then     --kasfShipsCount(kasAITeamShipsPtr("StdCorvette1"))
	
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_Dead", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_Dead(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_DefendMothership", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_DefendMothership(TeamName)
	return
	elseif (KAS_UnderAttack(TeamName, "GrowSelection_AttackC1") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackC1"))
	
	--kasJump("DefendYourSelf")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_DefendYourSelf", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_DefendYourSelf(TeamName)
	return
	elseif (( not(G_AssaultMsgSent == 1)) and ( not(G_CStartingTimer == 1))) then 
	
	--kasJump("Waiting")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_Waiting", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_Waiting(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and ( not(G_CStartingTimer == 1))) then 
	
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultTimer", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_AssaultTimer(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and (G_CStartingTimer == 1)) then 
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultMothership", "Watch_Mission04_StdCorvette1")
	Init_Mission04_StdCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 DefendMothership state
--
function Init_Mission04_StdCorvette1_DefendMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 DefendMothership state
--
function Watch_Mission04_StdCorvette1_DefendMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if (SobGroup_Count("GrowSelection_AttackingCapitalShips") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackingCapitalShips")    --kasfAttack(kasGrowSelectionPtr("AttackingCapitalShips"))
	elseif (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingCorvettes")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingFighters")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingFighters"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1) and (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_EnemyAttackers")    --kasfAttack(kasGrowSelectionPtr("EnemyAttackers"))
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultMothership", "Watch_Mission04_StdCorvette1_DefendMothership")
	Init_Mission04_StdCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 Waiting state
--
function Init_Mission04_StdCorvette1_Waiting(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 Waiting state
--
function Watch_Mission04_StdCorvette1_Waiting(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if (G_AssaultMsgSent == 1) then 
	
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultTimer", "Watch_Mission04_StdCorvette1_Waiting")
	Init_Mission04_StdCorvette1_AssaultTimer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 AssaultTimer state
--
function Init_Mission04_StdCorvette1_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 AssaultTimer state
--
function Watch_Mission04_StdCorvette1_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if ( not(G_CTimeExists == 1)) then 
	
	KASTimer_Start(Corvette1Delay[TeamName], (RandomIntRange(40, 100)))    --kasfRandom(40, 100)
	G_CTimeExists = 1 --created,set
	end 
	if ((KASTimer_IsExpired(Corvette1Delay[TeamName]) ~= 0) and ( not(G_CStartingTimer == 1))) then 
	
	G_CStartingTimer = 1 --created,set
	KAS_SetHidden("StdCorvette1", 0)    --kasfUnhideShips(kasAITeamShipsPtr("StdCorvette1"))
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1_AssaultTimer")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultMothership", "Watch_Mission04_StdCorvette1_AssaultTimer")
	Init_Mission04_StdCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 AssaultMothership state
--
function Init_Mission04_StdCorvette1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 AssaultMothership state
--
function Watch_Mission04_StdCorvette1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if (_VIFONCE023[TeamName] == 0 and (( not(G_ResourcersAttacked == 1)) and (KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearNone", 5250) ~= 0))) then  -- "ifonce" #23    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearNone"), 15000)
	
	_VIFONCE023[TeamName] = 1 --created,set;
	G_ResourcersAttacked = 1 --created,set
	G_IAmTheWalrus = 3 --created,set
	end 
	if (SobGroup_Count("GrowSelection_PlayerResourcers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerResourcers"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerResourcers")    --kasfAttack(kasGrowSelectionPtr("PlayerResourcers"))
	elseif (SobGroup_Count("GrowSelection_PlayerFighters") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerFighters")    --kasfAttack(kasGrowSelectionPtr("PlayerFighters"))
	elseif (SobGroup_Count("GrowSelection_PlayerFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCapitalShips")    --kasfAttack(kasGrowSelectionPtr("PlayerCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerShips")    --kasfAttack(kasGrowSelectionPtr("PlayerShips"))
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 DefendYourSelf state
--
function Init_Mission04_StdCorvette1_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 DefendYourSelf state
--
function Watch_Mission04_StdCorvette1_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	if ((KAS_UnderAttack(TeamName, "GrowSelection_AttackC1") > 0) and (SobGroup_Count(TeamName) <= (KAS_TeamCountOriginal(TeamName) / 2))) then     --kasfTeamCount()    --kasfTeamCountOriginal()    --kasfUnderAttack(kasGrowSelectionPtr("AttackC1"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackC1")    --kasfAttack(kasGrowSelectionPtr("AttackC1"))
	elseif (SobGroup_Count("GrowSelection_AttackC1") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackC1"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette1", "Watch_Mission04_StdCorvette1_DefendYourSelf")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette1_AssaultMothership", "Watch_Mission04_StdCorvette1_DefendYourSelf")
	Init_Mission04_StdCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette1 Dead state
--
function Init_Mission04_StdCorvette1_Dead(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "watch" code for Mission04 StdCorvette1 Dead state
--
function Watch_Mission04_StdCorvette1_Dead(TeamName)
	--FSM: FSM_Mission04_StdCorvette1
	--TeamName = StdCorvette1
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 FSM
--
function Init_Mission04_StdCorvette2(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	KAS_SetHidden("StdCorvette2", 1)    --kasfHideShips(kasAITeamShipsPtr("StdCorvette2"))
	requested[TeamName] = 0 --created,set
	needed[TeamName] = 0 --created,set
	newships[TeamName] = 0 --created,set
	DontBuild[TeamName] = 0 --created,set
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_Waiting", "Init_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 StdCorvette2 FSM
--
function Watch_Mission04_StdCorvette2(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if ((SobGroup_Count(TeamName) > 0) and (DontBuild[TeamName] == 0)) then     --kasfTeamCount()
	
	if (SobGroup_Count(TeamName) + requested[TeamName] < KAS_TeamCountOriginal(TeamName)) then     --kasfTeamCount()    --kasfTeamCountOriginal()
	
	needed[TeamName] = KAS_TeamCountOriginal(TeamName) - (SobGroup_Count(TeamName) + requested[TeamName]) --set    --kasfTeamCount()    --kasfTeamCountOriginal()
	KAS_RequestShipsOriginal(TeamName, needed[TeamName])    --kasfRequestShipsOriginal(___KAS_SCOPED_VAR____needed_)
	DontBuild[TeamName] = 1 --set
	KASTimer_Start(BuildAgain[TeamName], 20)
	requested[TeamName] = requested[TeamName] + needed[TeamName] --set
	end 
	newships[TeamName] = KAS_NumberNewShipsAdded(TeamName) --set    --kasfNewShipsAdded()
	if (newships[TeamName] ~= 0) then 
	
	requested[TeamName] = requested[TeamName] - newships[TeamName] --set
	end 
	if (KASTimer_IsExpiredIfSoDestroy(BuildAgain[TeamName]) ~= 0) then 
	
	DontBuild[TeamName] = 0 --set
	end 
	end 
	if (SobGroup_Count("StdCorvette2") < 1) then     --kasfShipsCount(kasAITeamShipsPtr("StdCorvette2"))
	
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_Dead", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_Dead(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_DefendMothership", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_DefendMothership(TeamName)
	return
	elseif (KAS_UnderAttack(TeamName, "GrowSelection_AttackC2") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackC2"))
	
	--kasJump("DefendYourSelf")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_DefendYourSelf", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_DefendYourSelf(TeamName)
	return
	elseif (( not(G_AssaultMsgSent == 1)) and ( not(G_C2StartingTimer == 1))) then 
	
	--kasJump("Waiting")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_Waiting", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_Waiting(TeamName)
	return
	elseif ((SobGroup_Count("MissileCorvette1") < 1) and ( not(G_C2StartingTimer == 1))) then     --kasfShipsCount(kasAITeamShipsPtr("MissileCorvette1"))
	
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultTimer", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_AssaultTimer(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and (G_C2StartingTimer == 1)) then 
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultMothership", "Watch_Mission04_StdCorvette2")
	Init_Mission04_StdCorvette2_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 DefendMothership state
--
function Init_Mission04_StdCorvette2_DefendMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 DefendMothership state
--
function Watch_Mission04_StdCorvette2_DefendMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if (SobGroup_Count("GrowSelection_AttackingCapitalShips") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackingCapitalShips")    --kasfAttack(kasGrowSelectionPtr("AttackingCapitalShips"))
	elseif (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingCorvettes")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingFighters")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingFighters"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1) and (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_EnemyAttackers")    --kasfAttack(kasGrowSelectionPtr("EnemyAttackers"))
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultMothership", "Watch_Mission04_StdCorvette2_DefendMothership")
	Init_Mission04_StdCorvette2_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 Waiting state
--
function Init_Mission04_StdCorvette2_Waiting(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 Waiting state
--
function Watch_Mission04_StdCorvette2_Waiting(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if (G_AssaultMsgSent == 1) then 
	
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultTimer", "Watch_Mission04_StdCorvette2_Waiting")
	Init_Mission04_StdCorvette2_AssaultTimer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 AssaultTimer state
--
function Init_Mission04_StdCorvette2_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 AssaultTimer state
--
function Watch_Mission04_StdCorvette2_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if ( not(G_C2TimeExists == 1)) then 
	
	KASTimer_Start(Corvette2Delay[TeamName], (RandomIntRange(50, 150)))    --kasfRandom(50, 150)
	G_C2TimeExists = 1 --created,set
	elseif ((KASTimer_IsExpired(Corvette2Delay[TeamName]) ~= 0) and ( not(G_C2StartingTimer == 1))) then 
	
	G_C2StartingTimer = 1 --created,set
	KAS_SetHidden("StdCorvette2", 0)    --kasfUnhideShips(kasAITeamShipsPtr("StdCorvette2"))
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2_AssaultTimer")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultMothership", "Watch_Mission04_StdCorvette2_AssaultTimer")
	Init_Mission04_StdCorvette2_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 AssaultMothership state
--
function Init_Mission04_StdCorvette2_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 AssaultMothership state
--
function Watch_Mission04_StdCorvette2_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if (_VIFONCE024[TeamName] == 0 and (( not(G_ResourcersAttacked == 1)) and (KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearNone", 5250) ~= 0))) then  -- "ifonce" #24    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearNone"), 15000)
	
	_VIFONCE024[TeamName] = 1 --created,set;
	G_ResourcersAttacked = 1 --created,set
	G_IAmTheWalrus = 4 --set
	end 
	if (SobGroup_Count("GrowSelection_PlayerResourcers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerResourcers"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerResourcers")    --kasfAttack(kasGrowSelectionPtr("PlayerResourcers"))
	elseif (SobGroup_Count("GrowSelection_PlayerFighters") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerFighters")    --kasfAttack(kasGrowSelectionPtr("PlayerFighters"))
	elseif (SobGroup_Count("GrowSelection_PlayerFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCapitalShips")    --kasfAttack(kasGrowSelectionPtr("PlayerCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerShips")    --kasfAttack(kasGrowSelectionPtr("PlayerShips"))
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 DefendYourSelf state
--
function Init_Mission04_StdCorvette2_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 DefendYourSelf state
--
function Watch_Mission04_StdCorvette2_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	if ((KAS_UnderAttack(TeamName, "GrowSelection_AttackC2") > 0) and (SobGroup_Count(TeamName) <= (KAS_TeamCountOriginal(TeamName) / 2))) then     --kasfTeamCount()    --kasfTeamCountOriginal()    --kasfUnderAttack(kasGrowSelectionPtr("AttackC2"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackC2")    --kasfAttack(kasGrowSelectionPtr("AttackC2"))
	elseif (SobGroup_Count("GrowSelection_AttackC2") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackC2"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_StdCorvette2", "Watch_Mission04_StdCorvette2_DefendYourSelf")
	KASRule_Add(TeamName, "Watch_Mission04_StdCorvette2_AssaultMothership", "Watch_Mission04_StdCorvette2_DefendYourSelf")
	Init_Mission04_StdCorvette2_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 StdCorvette2 Dead state
--
function Init_Mission04_StdCorvette2_Dead(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "watch" code for Mission04 StdCorvette2 Dead state
--
function Watch_Mission04_StdCorvette2_Dead(TeamName)
	--FSM: FSM_Mission04_StdCorvette2
	--TeamName = StdCorvette2
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 FSM
--
function Init_Mission04_MissileCorvette1(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	KAS_SetHidden("MissileCorvette1", 1)    --kasfHideShips(kasAITeamShipsPtr("MissileCorvette1"))
	requested[TeamName] = 0 --created,set
	needed[TeamName] = 0 --created,set
	newships[TeamName] = 0 --created,set
	DontBuild[TeamName] = 0 --created,set
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 FSM
--
function Watch_Mission04_MissileCorvette1(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if ((SobGroup_Count(TeamName) > 0) and (DontBuild[TeamName] == 0)) then     --kasfTeamCount()
	
	if (SobGroup_Count(TeamName) + requested[TeamName] < KAS_TeamCountOriginal(TeamName)) then     --kasfTeamCount()    --kasfTeamCountOriginal()
	
	needed[TeamName] = KAS_TeamCountOriginal(TeamName) - (SobGroup_Count(TeamName) + requested[TeamName]) --set    --kasfTeamCount()    --kasfTeamCountOriginal()
	KAS_RequestShipsOriginal(TeamName, needed[TeamName])    --kasfRequestShipsOriginal(___KAS_SCOPED_VAR____needed_)
	DontBuild[TeamName] = 1 --set
	KASTimer_Start(BuildAgain[TeamName], 20)
	requested[TeamName] = requested[TeamName] + needed[TeamName] --set
	end 
	newships[TeamName] = KAS_NumberNewShipsAdded(TeamName) --set    --kasfNewShipsAdded()
	if (newships[TeamName] ~= 0) then 
	
	requested[TeamName] = requested[TeamName] - newships[TeamName] --set
	end 
	if (KASTimer_IsExpiredIfSoDestroy(BuildAgain[TeamName]) ~= 0) then 
	
	DontBuild[TeamName] = 0 --set
	end 
	end 
	if (SobGroup_Count("MissileCorvette1") < 1) then     --kasfShipsCount(kasAITeamShipsPtr("MissileCorvette1"))
	
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_Dead", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_Dead(TeamName)
	return
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_DefendMothership", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_DefendMothership(TeamName)
	return
	elseif (KAS_UnderAttack(TeamName, "GrowSelection_AttackMc") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("AttackMc"))
	
	--kasJump("DefendYourSelf")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_DefendYourSelf", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_DefendYourSelf(TeamName)
	return
	elseif (( not(G_AssaultMsgSent == 1)) and ( not(G_MCStartingTimer == 1))) then 
	
	--kasJump("Waiting")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_Waiting", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_Waiting(TeamName)
	return
	elseif ((SobGroup_Count("StdCorvette1") < 1) and ( not(G_MCStartingTimer == 1))) then     --kasfShipsCount(kasAITeamShipsPtr("StdCorvette1"))
	
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultTimer", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_AssaultTimer(TeamName)
	return
	elseif ((G_AssaultMsgSent == 1) and (G_MCStartingTimer == 1)) then 
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultMothership", "Watch_Mission04_MissileCorvette1")
	Init_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 Waiting state
--
function Init_Mission04_MissileCorvette1_Waiting(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 Waiting state
--
function Watch_Mission04_MissileCorvette1_Waiting(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if ((G_AssaultMsgSent == 1) and ( not(OnceTheFuck[TeamName] == 1))) then 
	
	OnceTheFuck[TeamName] = 1 --created,set
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultTimer", "Watch_Mission04_MissileCorvette1_Waiting")
	Init_Mission04_MissileCorvette1_AssaultTimer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 AssaultTimer state
--
function Init_Mission04_MissileCorvette1_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 AssaultTimer state
--
function Watch_Mission04_MissileCorvette1_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if ( not(G_MCTimeExists == 1)) then 
	
	KASTimer_Start(MCorvetteDelay[TeamName], (RandomIntRange(40, 120)))    --kasfRandom(40, 120)
	G_MCTimeExists = 1 --created,set
	elseif ((KASTimer_IsExpired(MCorvetteDelay[TeamName]) ~= 0) and ( not(G_MCStartingTimer == 1))) then 
	
	G_MCStartingTimer = 1 --created,set
	KAS_SetHidden("MissileCorvette1", 0)    --kasfUnhideShips(kasAITeamShipsPtr("MissileCorvette1"))
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1_AssaultTimer")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultMothership", "Watch_Mission04_MissileCorvette1_AssaultTimer")
	Init_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 AssaultMothership state
--
function Init_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 AssaultMothership state
--
function Watch_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if (_VIFONCE025[TeamName] == 0 and (( not(G_ResourcersAttacked == 1)) and (KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearNone", 5250) ~= 0))) then  -- "ifonce" #25    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearNone"), 15000)
	
	_VIFONCE025[TeamName] = 1 --created,set;
	G_ResourcersAttacked = 1 --created,set
	G_IAmTheWalrus = 5 --set
	end 
	if (SobGroup_Count("GrowSelection_PlayerFighters") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerFighters")    --kasfAttack(kasGrowSelectionPtr("PlayerFighters"))
	elseif (SobGroup_Count("GrowSelection_PlayerFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCorvettes")    --kasfAttack(kasGrowSelectionPtr("PlayerCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCorvettes") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerCapitalShips")    --kasfAttack(kasGrowSelectionPtr("PlayerCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_PlayerFighters") < 1) and (SobGroup_Count("GrowSelection_PlayerCorvettes") < 1) and (SobGroup_Count("GrowSelection_PlayerCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("PlayerCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("PlayerFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_PlayerShips")    --kasfAttack(kasGrowSelectionPtr("PlayerShips"))
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 DefendYourSelf state
--
function Init_Mission04_MissileCorvette1_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 DefendYourSelf state
--
function Watch_Mission04_MissileCorvette1_DefendYourSelf(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if (SobGroup_Count("GrowSelection_AttackMc") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("AttackMc"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackMc")    --kasfAttack(kasGrowSelectionPtr("AttackMc"))
	end 
	if (SobGroup_Count("GrowSelection_AttackMc") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackMc"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1_DefendYourSelf")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultMothership", "Watch_Mission04_MissileCorvette1_DefendYourSelf")
	Init_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 DefendMothership state
--
function Init_Mission04_MissileCorvette1_DefendMothership(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 DefendMothership state
--
function Watch_Mission04_MissileCorvette1_DefendMothership(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	if (SobGroup_Count("GrowSelection_AttackingFighters") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackingFighters")    --kasfAttack(kasGrowSelectionPtr("AttackingFighters"))
	elseif (SobGroup_Count("GrowSelection_AttackingFighters") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_AttackFlank(TeamName, "GrowSelection_AttackingCorvettes")    --kasfAttackFlank(kasGrowSelectionPtr("AttackingCorvettes"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_AttackingCapitalShips")    --kasfAttack(kasGrowSelectionPtr("AttackingCapitalShips"))
	elseif ((SobGroup_Count("GrowSelection_AttackingFighters") < 1) and (SobGroup_Count("GrowSelection_AttackingCorvettes") < 1) and (SobGroup_Count("GrowSelection_AttackingCapitalShips") < 1)) then     --kasfShipsCount(kasGrowSelectionPtr("AttackingCapitalShips"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingCorvettes"))    --kasfShipsCount(kasGrowSelectionPtr("AttackingFighters"))
	
	KAS_Attack(TeamName, "GrowSelection_EnemyAttackers")    --kasfAttack(kasGrowSelectionPtr("EnemyAttackers"))
	elseif (SobGroup_Count("GrowSelection_EnemyAttackers") < 1) then     --kasfShipsCount(kasGrowSelectionPtr("EnemyAttackers"))
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_MissileCorvette1", "Watch_Mission04_MissileCorvette1_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission04_MissileCorvette1_AssaultMothership", "Watch_Mission04_MissileCorvette1_DefendMothership")
	Init_Mission04_MissileCorvette1_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 MissileCorvette1 Dead state
--
function Init_Mission04_MissileCorvette1_Dead(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "watch" code for Mission04 MissileCorvette1 Dead state
--
function Watch_Mission04_MissileCorvette1_Dead(TeamName)
	--FSM: FSM_Mission04_MissileCorvette1
	--TeamName = MissileCorvette1
	
end 


--
--  "initialize" code for Mission04 P1Mothership FSM
--
function Init_Mission04_P1Mothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_Waiting", "Init_Mission04_P1Mothership")
	Init_Mission04_P1Mothership_Waiting(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 P1Mothership FSM
--
function Watch_Mission04_P1Mothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (_VIFONCE026[TeamName] == 0 and (KAS_TeamHealth(TeamName) < 50)) then  -- "ifonce" #26    --kasfTeamHealthAverage()
	
	_VIFONCE026[TeamName] = 1 --created,set;
	Leaving[TeamName] = 1 --created,set
	--kasJump("RetreatMothership")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_RetreatMothership", "Watch_Mission04_P1Mothership")
	Init_Mission04_P1Mothership_RetreatMothership(TeamName)
	return
	end 
	if (_VIFONCE027[TeamName] == 0 and (SobGroup_HealthPercentage("P1Mothership") < 1)) then  -- "ifonce" #27    --kasfShipsCount(kasAITeamShipsPtr("P1Mothership"))
	
	_VIFONCE027[TeamName] = 1 --created,set;
	--kasJump("Dead")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_Dead", "Watch_Mission04_P1Mothership")
	Init_Mission04_P1Mothership_Dead(TeamName)
	return
	end 
	if ((KAS_UnderAttack(TeamName, "GrowSelection_EnemyOfMS") > 0) and ( not(G_SaveAiMothership == 1))) then     --kasfUnderAttack(kasGrowSelectionPtr("EnemyOfMS"))
	
	KAS_FillShipsByCapital("GrowSelection_PCapShipsAttackCarrier", "GrowSelection_EnemyOfMS")    --kasfShipsSelectCapital(kasGrowSelectionPtr("PCapShipsAttackCarrier"), kasGrowSelectionPtr("EnemyOfMS"))
	if (SobGroup_Count("GrowSelection_PCapShipsAttackCarrier") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("PCapShipsAttackCarrier"))
	
	G_SaveAiMothership = 1 --created,set
	--kasJump("LovingMe")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_LovingMe", "Watch_Mission04_P1Mothership")
	Init_Mission04_P1Mothership_LovingMe(TeamName)
	return
	end 
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership LovingMe state
--
function Init_Mission04_P1Mothership_LovingMe(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	
end 


--
--  "watch" code for Mission04 P1Mothership LovingMe state
--
function Watch_Mission04_P1Mothership_LovingMe(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	KAS_UnderAttack(TeamName, "GrowSelection_EnemyOfMS")    --kasfUnderAttack(kasGrowSelectionPtr("EnemyOfMS"))
	if (KAS_FillShipsByClass_Normal("GrowSelection_PCapShipsAttackCarrier", "GrowSelection_EnemyOfMS", "Frigate") > 0) then     --kasfShipsSelectClass(kasGrowSelectionPtr("PCapShipsAttackCarrier"), kasGrowSelectionPtr("EnemyOfMS"), "CLASS_CapitalShips")
	
	KAS_Attack(TeamName, "GrowSelection_PCapShipsAttackCarrier")    --kasfAttack(kasGrowSelectionPtr("PCapShipsAttackCarrier"))
	else
	
	SobGroup_Clear("GrowSelection_EnemyOfMS")    --kasfGrowSelectionClear(kasGrowSelectionPtr("EnemyOfMS"))
	if (Leaving[TeamName] == 1) then 
	
	--kasJump("RetreatMothership")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_RetreatMothership", "Watch_Mission04_P1Mothership_LovingMe")
	Init_Mission04_P1Mothership_RetreatMothership(TeamName)
	return
	elseif (G_ReadyToSpew == 1) then 
	
	G_SaveAiMothership = 0 --destroyed
	--kasJump("SpewDeath")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_SpewDeath", "Watch_Mission04_P1Mothership_LovingMe")
	Init_Mission04_P1Mothership_SpewDeath(TeamName)
	return
	else
	
	G_SaveAiMothership = 0 --destroyed
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_LovingMe")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_AssaultTimer", "Watch_Mission04_P1Mothership_LovingMe")
	Init_Mission04_P1Mothership_AssaultTimer(TeamName)
	return
	end 
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership Waiting state
--
function Init_Mission04_P1Mothership_Waiting(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	
end 


--
--  "watch" code for Mission04 P1Mothership Waiting state
--
function Watch_Mission04_P1Mothership_Waiting(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (KAS_MessageReceived(TeamName, "AttackPlayerMothership") ~= 0) then     --kasfMsgReceived("AttackPlayerMothership")
	
	KAS_TeamHyperspaceIn(TeamName, "P1MsPoint")    --kasfTeamHyperspaceIn(kasVectorPtr("P1MsPoint"))
	--kasJump("AssaultTimer")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_Waiting")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_AssaultTimer", "Watch_Mission04_P1Mothership_Waiting")
	Init_Mission04_P1Mothership_AssaultTimer(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership AssaultTimer state
--
function Init_Mission04_P1Mothership_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (_VIFONCE028[TeamName] == 0 and (1 ~= 0)) then  -- "ifonce" #28
	
	_VIFONCE028[TeamName] = 1 --created,set;
	KASTimer_Start(DoggieTimer[TeamName], 80)
	end 
	
end 


--
--  "watch" code for Mission04 P1Mothership AssaultTimer state
--
function Watch_Mission04_P1Mothership_AssaultTimer(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (KASTimer_IsExpired(DoggieTimer[TeamName]) ~= 0) then 
	
	--kasJump("AssaultMothership")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_AssaultTimer")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_AssaultMothership", "Watch_Mission04_P1Mothership_AssaultTimer")
	Init_Mission04_P1Mothership_AssaultMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership AssaultMothership state
--
function Init_Mission04_P1Mothership_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	SobGroup_SetMaxSpeed(TeamName, 59.5)    --kasfTeamSetMaxVelocity(170)
	SobGroup_FollowPath(TeamName, "PathMotherShipFlank", 1, 1, 0)    --kasfPatrolPath(kasPathPtr("PathMotherShipFlank"))
	StillOnPath[TeamName] = 1 --created,set
	
end 


--
--  "watch" code for Mission04 P1Mothership AssaultMothership state
--
function Watch_Mission04_P1Mothership_AssaultMothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (SobGroup_GetNextPathPoint(TeamName) == 0) then     --kasfPathNextPoint()
	
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("PointMotherShipFlank"))    --kasfMoveTo(kasVectorPtr("PointMotherShipFlank"))
	StillOnPath[TeamName] = 0 --destroyed
	SobGroup_SetMaxSpeed(TeamName, -1)    --kasfTeamClearMaxVelocity()
	--kasJump("SpewDeath")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_AssaultMothership")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_SpewDeath", "Watch_Mission04_P1Mothership_AssaultMothership")
	Init_Mission04_P1Mothership_SpewDeath(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership SpewDeath state
--
function Init_Mission04_P1Mothership_SpewDeath(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	G_ReadyToSpew = 1 --created,set
	
end 


--
--  "watch" code for Mission04 P1Mothership SpewDeath state
--
function Watch_Mission04_P1Mothership_SpewDeath(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if ((SobGroup_Count("IonFrig1") < 1) and (SobGroup_Count("IonFrig2") < 1) and (SobGroup_Count("IonFrig3") < 1)) then     --kasfShipsCount(kasAITeamShipsPtr("IonFrig3"))    --kasfShipsCount(kasAITeamShipsPtr("IonFrig2"))    --kasfShipsCount(kasAITeamShipsPtr("IonFrig1"))
	
	KAS_PingAddShips("P1Mothership", "Turanic_Raider_Mothership", "$60508")    --kasfPingAddShips(kasAITeamShipsPtr("P1Mothership"), "Turanic Raider Mothership")
	--kasJump("Kamikaze")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_SpewDeath")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_Kamikaze", "Watch_Mission04_P1Mothership_SpewDeath")
	Init_Mission04_P1Mothership_Kamikaze(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership Kamikaze state
--
function Init_Mission04_P1Mothership_Kamikaze(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	KAS_MoveAttack(TeamName, "GrowSelection_PlayerMothership")    --kasfMoveAttack(kasGrowSelectionPtr("PlayerMothership"))
	
end 


--
--  "watch" code for Mission04 P1Mothership Kamikaze state
--
function Watch_Mission04_P1Mothership_Kamikaze(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if ((KAS_UnderAttack(TeamName, "GrowSelection_EnemyOfMS") > 0) and (KAS_FillShipsByClass_Normal("GrowSelection_PCapShipsAttackCarrier", "GrowSelection_EnemyOfMS", "Frigate") > 0)) then     --kasfShipsSelectClass(kasGrowSelectionPtr("PCapShipsAttackCarrier"), kasGrowSelectionPtr("EnemyOfMS"), "CLASS_CapitalShips")    --kasfUnderAttack(kasGrowSelectionPtr("EnemyOfMS"))
	
	IWasAttacked[TeamName] = 1 --created,set
	KAS_Attack(TeamName, "GrowSelection_PlayerMothership")    --kasfAttack(kasGrowSelectionPtr("PlayerMothership"))
	elseif ((IWasAttacked[TeamName] == 1) and (KAS_UnderAttack(TeamName, "GrowSelection_EnemyOfMS") < 1)) then     --kasfUnderAttack(kasGrowSelectionPtr("EnemyOfMS"))
	
	IWasAttacked[TeamName] = 0 --destroyed
	SobGroup_Clear("GrowSelection_EnemyOfMS")    --kasfGrowSelectionClear(kasGrowSelectionPtr("EnemyOfMS"))
	--kasJump("Kamikaze")
	--KASRule_Remove("FSM_Mission04_P1Mothership", "Watch_Mission04_P1Mothership_Kamikaze")
	KASRule_Add(TeamName, "Watch_Mission04_P1Mothership_Kamikaze", "Watch_Mission04_P1Mothership_Kamikaze")
	Init_Mission04_P1Mothership_Kamikaze(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership RetreatMothership state
--
function Init_Mission04_P1Mothership_RetreatMothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	SobGroup_SetMaxSpeed(TeamName, -1)    --kasfTeamClearMaxVelocity()
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("TuranicRetreatPoint"))    --kasfMoveTo(kasVectorPtr("TuranicRetreatPoint"))
	
end 


--
--  "watch" code for Mission04 P1Mothership RetreatMothership state
--
function Watch_Mission04_P1Mothership_RetreatMothership(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	if (_VIFONCE029[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "TuranicRetreatPoint", 14000) ~= 0)) then  -- "ifonce" #29    --kasfNearby(kasVectorPtr("TuranicRetreatPoint"), 40000)
	
	_VIFONCE029[TeamName] = 1 --created,set;
	G_IcantLetYouGo = 1 --created,set
	end 
	if (_VIFONCE030[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "TuranicRetreatPoint", 350) ~= 0)) then  -- "ifonce" #30    --kasfNearby(kasVectorPtr("TuranicRetreatPoint"), 1000)
	
	_VIFONCE030[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	KAS_MissionFailed()    --kasfMissionFailed()
	end 
	
end 


--
--  "initialize" code for Mission04 P1Mothership Dead state
--
function Init_Mission04_P1Mothership_Dead(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	
end 


--
--  "watch" code for Mission04 P1Mothership Dead state
--
function Watch_Mission04_P1Mothership_Dead(TeamName)
	--FSM: FSM_Mission04_P1Mothership
	--TeamName = P1Mothership
	
end 


--
--  "initialize" code for Mission04 ProtectFrigs FSM
--
function Init_Mission04_ProtectFrigs(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("Wait")
	KASRule_Add(TeamName, "Watch_Mission04_ProtectFrigs_Wait", "Init_Mission04_ProtectFrigs")
	Init_Mission04_ProtectFrigs_Wait(TeamName)
	return
	
end 


--
--  "watch" code for Mission04 ProtectFrigs FSM
--
function Watch_Mission04_ProtectFrigs(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	
end 


--
--  "initialize" code for Mission04 ProtectFrigs Wait state
--
function Init_Mission04_ProtectFrigs_Wait(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	
end 


--
--  "watch" code for Mission04 ProtectFrigs Wait state
--
function Watch_Mission04_ProtectFrigs_Wait(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	if (_VIFONCE031[TeamName] == 0 and (KAS_MessageReceived(TeamName, "AttackPlayerMothership") ~= 0)) then  -- "ifonce" #31    --kasfMsgReceived("AttackPlayerMothership")
	
	_VIFONCE031[TeamName] = 1 --created,set;
	KAS_TeamHyperspaceIn(TeamName, "P1MsGuardPoint")    --kasfTeamHyperspaceIn(kasVectorPtr("P1MsGuardPoint"))
	--kasJump("Guard")
	--KASRule_Remove("FSM_Mission04_ProtectFrigs", "Watch_Mission04_ProtectFrigs_Wait")
	KASRule_Add(TeamName, "Watch_Mission04_ProtectFrigs_Guard", "Watch_Mission04_ProtectFrigs_Wait")
	Init_Mission04_ProtectFrigs_Guard(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 ProtectFrigs Guard state
--
function Init_Mission04_ProtectFrigs_Guard(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	SobGroup_GuardSobGroup(TeamName, "P1Mothership")    --kasfGuardShips(kasAITeamShipsPtr("P1Mothership"))
	
end 


--
--  "watch" code for Mission04 ProtectFrigs Guard state
--
function Watch_Mission04_ProtectFrigs_Guard(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	if ((KAS_UnderAttack("P1Mothership", "GrowSelection_VictemFrig1") > 0) or (KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearFrig1", 1750) > 0)) then     --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearFrig1"), 5000)    --kasfUnderAttackElsewhere(kasAITeamPtr("P1Mothership"), kasGrowSelectionPtr("VictemFrig1"))
	
	--kasJump("Attack")
	--KASRule_Remove("FSM_Mission04_ProtectFrigs", "Watch_Mission04_ProtectFrigs_Guard")
	KASRule_Add(TeamName, "Watch_Mission04_ProtectFrigs_Attack", "Watch_Mission04_ProtectFrigs_Guard")
	Init_Mission04_ProtectFrigs_Attack(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 ProtectFrigs Attack state
--
function Init_Mission04_ProtectFrigs_Attack(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	
end 


--
--  "watch" code for Mission04 ProtectFrigs Attack state
--
function Watch_Mission04_ProtectFrigs_Attack(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	KAS_UnderAttack("P1Mothership", "GrowSelection_VictemFrig1")    --kasfUnderAttackElsewhere(kasAITeamPtr("P1Mothership"), kasGrowSelectionPtr("VictemFrig1"))
	KAS_FindEnemiesNearTeam(TeamName, "GrowSelection_NearFrig1", 3500)    --kasfFindEnemiesNearTeam(kasGrowSelectionPtr("NearFrig1"), 10000)
	KAS_FillShipsByType_Normal("GrowSelection_NastyCaps1", "GrowSelection_NearFrig1", "SalvageCorvette")    --kasfShipsSelectType(kasGrowSelectionPtr("NastyCaps1"), kasGrowSelectionPtr("NearFrig1"), "SalCapCorvette")
	KAS_FillShipsByCapital("GrowSelection_CapsVictemFrig1", "GrowSelection_VictemFrig1")    --kasfShipsSelectCapital(kasGrowSelectionPtr("CapsVictemFrig1"), kasGrowSelectionPtr("VictemFrig1"))
	KAS_FillShipsByCapital("GrowSelection_CapsNearFrig1", "GrowSelection_NearFrig1")    --kasfShipsSelectCapital(kasGrowSelectionPtr("CapsNearFrig1"), kasGrowSelectionPtr("NearFrig1"))
	SobGroup_FillShipsByIndexRange("GrowSelection_IndxCapsVictemFrig1", "GrowSelection_CapsVictemFrig1", 0, 1)    --kasfShipsSelectIndex(kasGrowSelectionPtr("IndxCapsVictemFrig1"), kasGrowSelectionPtr("CapsVictemFrig1"), 0)
	SobGroup_FillShipsByIndexRange("GrowSelection_IndxCapsNearFrig1", "GrowSelection_CapsNearFrig1", 0, 1)    --kasfShipsSelectIndex(kasGrowSelectionPtr("IndxCapsNearFrig1"), kasGrowSelectionPtr("CapsNearFrig1"), 0)
	if (SobGroup_Count("GrowSelection_NastyCaps1") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("NastyCaps1"))
	
	KAS_Attack(TeamName, "GrowSelection_NastyCaps1")    --kasfAttack(kasGrowSelectionPtr("NastyCaps1"))
	elseif (SobGroup_Count("GrowSelection_CapsVictemFrig1") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("CapsVictemFrig1"))
	
	KAS_Attack(TeamName, "GrowSelection_IndxCapsVictemFrig1")    --kasfAttack(kasGrowSelectionPtr("IndxCapsVictemFrig1"))
	elseif (SobGroup_Count("GrowSelection_CapsNearFrig1") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("CapsNearFrig1"))
	
	KAS_Attack(TeamName, "GrowSelection_IndxCapsNearFrig1")    --kasfAttack(kasGrowSelectionPtr("IndxCapsNearFrig1"))
	elseif (SobGroup_Count("GrowSelection_NearFrig1") > 0) then     --kasfShipsCount(kasGrowSelectionPtr("NearFrig1"))
	
	KAS_Attack(TeamName, "GrowSelection_NearFrig1")    --kasfAttack(kasGrowSelectionPtr("NearFrig1"))
	elseif (SobGroup_Count("P1Mothership") > 0) then     --kasfShipsCount(kasAITeamShipsPtr("P1Mothership"))
	
	--kasJump("Guard")
	--KASRule_Remove("FSM_Mission04_ProtectFrigs", "Watch_Mission04_ProtectFrigs_Attack")
	KASRule_Add(TeamName, "Watch_Mission04_ProtectFrigs_Guard", "Watch_Mission04_ProtectFrigs_Attack")
	Init_Mission04_ProtectFrigs_Guard(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission04 ProtectFrigs Done state
--
function Init_Mission04_ProtectFrigs_Done(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	
end 


--
--  "watch" code for Mission04 ProtectFrigs Done state
--
function Watch_Mission04_ProtectFrigs_Done(TeamName)
	--FSM: FSM_Mission04_ProtectFrigs
	--TeamName = ProtectFrigs
	
end 


--
--  "initialize" code for Mission04 mission
--
function Init_Mission04(MissionName)
	--FSM: FSM_Mission04
	--MissionName = "Mission04"
	--kasFSMCreate("TuranicFighters")
	KASRule_AddFSM("TuranicFighters", "Watch_Mission04_TuranicFighters", "Init_Mission04")
	Init_Mission04_TuranicFighters("TuranicFighters")
	--kasFSMCreate("TuranicHarrassFighters")
	KASRule_AddFSM("TuranicHarrassFighters", "Watch_Mission04_TuranicHarrassFighters", "Init_Mission04")
	Init_Mission04_TuranicHarrassFighters("TuranicHarrassFighters")
	--kasFSMCreate("IonFrig1")
	KASRule_AddFSM("IonFrig1", "Watch_Mission04_IonFrig1", "Init_Mission04")
	Init_Mission04_IonFrig1("IonFrig1")
	--kasFSMCreate("IonFrig2")
	KASRule_AddFSM("IonFrig2", "Watch_Mission04_IonFrig2", "Init_Mission04")
	Init_Mission04_IonFrig2("IonFrig2")
	--kasFSMCreate("IonFrig3")
	KASRule_AddFSM("IonFrig3", "Watch_Mission04_IonFrig3", "Init_Mission04")
	Init_Mission04_IonFrig3("IonFrig3")
	--kasFSMCreate("StdCorvette1")
	KASRule_AddFSM("StdCorvette1", "Watch_Mission04_StdCorvette1", "Init_Mission04")
	Init_Mission04_StdCorvette1("StdCorvette1")
	--kasFSMCreate("StdCorvette2")
	KASRule_AddFSM("StdCorvette2", "Watch_Mission04_StdCorvette2", "Init_Mission04")
	Init_Mission04_StdCorvette2("StdCorvette2")
	--kasFSMCreate("MissileCorvette1")
	KASRule_AddFSM("MissileCorvette1", "Watch_Mission04_MissileCorvette1", "Init_Mission04")
	Init_Mission04_MissileCorvette1("MissileCorvette1")
	--kasFSMCreate("P1Mothership")
	KASRule_AddFSM("P1Mothership", "Watch_Mission04_P1Mothership", "Init_Mission04")
	Init_Mission04_P1Mothership("P1Mothership")
	--kasFSMCreate("MissionBriefing")
	KASRule_AddFSM("TeamOfDummys", "Watch_Mission04_MissionBriefing", "Init_Mission04")
	Init_Mission04_MissionBriefing("TeamOfDummys")
	--kasFSMCreate("Traders")
	KASRule_AddFSM("Traders", "Watch_Mission04_Traders", "Init_Mission04")
	Init_Mission04_Traders("Traders")
	--kasFSMCreate("ProtectFrigs")
	KASRule_AddFSM("ProtectFrigs", "Watch_Mission04_ProtectFrigs", "Init_Mission04")
	Init_Mission04_ProtectFrigs("ProtectFrigs")
	KAS_CampaignAutoSave(4, "$61208")    --kasfSaveLevel(4, LSTRING_Savegame[strCurLanguage])
	singlePlayerLocationCard("$61200", 10)    --kasfLocationCard(10000, LSTRING_LocationCard[strCurLanguage])
	G_IAmTheWalrus = 0 --created,set
	
end 


--
--  "watch" code for Mission04 mission
--
function Watch_Mission04(MissionName)
	--FSM: FSM_Mission04
	--MissionName = "Mission04"
	KAS_FindEnemiesInside("WorldSphere", "GrowSelection_PlayerShips")    --kasfFindEnemiesInside(kasVolumePtr("WorldSphere"), kasGrowSelectionPtr("PlayerShips"), 1000000)
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerFighters", "GrowSelection_PlayerShips", "Fighter_hw1")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerFighters"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Fighter")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerCorvettes", "GrowSelection_PlayerShips", "Corvette_hw1")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerCorvettes"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Corvette")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerCapitalShips", "GrowSelection_PlayerShips", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerCapitalShips"), kasGrowSelectionPtr("PlayerShips"), "CLASS_CapitalShips")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerMothership", "GrowSelection_PlayerShips", "Mothership")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerMothership"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Mothership")
	KAS_FillShipsByType_Normal("GrowSelection_PlayerResourcers", "GrowSelection_PlayerShips", "ResourceCollector")    --kasfShipsSelectType(kasGrowSelectionPtr("PlayerResourcers"), kasGrowSelectionPtr("PlayerShips"), "ResourceCollector")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerFrigates", "GrowSelection_PlayerShips", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerFrigates"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Frigate")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerDestroyer", "GrowSelection_PlayerShips", "SmallCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerDestroyer"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Destroyer")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerHeavyCruiser", "GrowSelection_PlayerShips", "BigCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerHeavyCruiser"), kasGrowSelectionPtr("PlayerShips"), "CLASS_HeavyCruiser")
	KAS_FillShipsByClass_Normal("GrowSelection_PlayerCarrier", "GrowSelection_PlayerShips", "BigCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("PlayerCarrier"), kasGrowSelectionPtr("PlayerShips"), "CLASS_Carrier")
	KAS_FillShipsByCapital("GrowSelection_PlayerCapitalShips", "GrowSelection_PlayerShips")    --kasfShipsSelectCapital(kasGrowSelectionPtr("PlayerCapitalShips"), kasGrowSelectionPtr("PlayerShips"))
	KAS_UnderAttack("P1Mothership", "GrowSelection_EnemyAttackers")    --kasfUnderAttackElsewhere(kasAITeamPtr("P1Mothership"), kasGrowSelectionPtr("EnemyAttackers"))
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingFighters", "GrowSelection_EnemyAttackers", "Fighter_hw1")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingFighters"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_Fighter")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingCorvettes", "GrowSelection_EnemyAttackers", "Corvette_hw1")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingCorvettes"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_Corvette")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingCapitalShips", "GrowSelection_EnemyAttackers", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingCapitalShips"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_CapitalShips")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingFrigates", "GrowSelection_EnemyAttackers", "Frigate")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingFrigates"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_Frigate")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingDestroyer", "GrowSelection_EnemyAttackers", "SmallCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingDestroyer"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_Destroyer")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingHeavyCruiser", "GrowSelection_EnemyAttackers", "BigCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingHeavyCruiser"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_HeavyCruiser")
	KAS_FillShipsByClass_Normal("GrowSelection_AttackingCarrier", "GrowSelection_EnemyAttackers", "BigCapitalShip")    --kasfShipsSelectClass(kasGrowSelectionPtr("AttackingCarrier"), kasGrowSelectionPtr("EnemyAttackers"), "CLASS_Carrier")
	KAS_ShipsAdd("GrowSelection_AttackingCapitalShips", "GrowSelection_AttackingFrigates")    --kasfShipsAdd(kasGrowSelectionPtr("AttackingCapitalShips"), kasGrowSelectionPtr("AttackingFrigates"))
	KAS_ShipsAdd("GrowSelection_AttackingCapitalShips", "GrowSelection_AttackingDestroyer")    --kasfShipsAdd(kasGrowSelectionPtr("AttackingCapitalShips"), kasGrowSelectionPtr("AttackingDestroyer"))
	KAS_ShipsAdd("GrowSelection_AttackingCapitalShips", "GrowSelection_AttackingHeavyCruiser")    --kasfShipsAdd(kasGrowSelectionPtr("AttackingCapitalShips"), kasGrowSelectionPtr("AttackingHeavyCruiser"))
	KAS_ShipsAdd("GrowSelection_AttackingCapitalShips", "GrowSelection_AttackingCarrier")    --kasfShipsAdd(kasGrowSelectionPtr("AttackingCapitalShips"), kasGrowSelectionPtr("AttackingCarrier"))
	KAS_FindShipsInside("WorldSphere", "GrowSelection_AllShips")    --kasfFindShipsInside(kasVolumePtr("WorldSphere"), kasGrowSelectionPtr("AllShips"))
	KAS_ShipsAdd("GrowSelection_AllP1", "TuranicFighters")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("TuranicFighters"))
	KAS_ShipsAdd("GrowSelection_AllP1", "TuranicHarrassFighters")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("TuranicHarrassFighters"))
	KAS_ShipsAdd("GrowSelection_AllP1", "IonFrig1")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("IonFrig1"))
	KAS_ShipsAdd("GrowSelection_AllP1", "IonFrig2")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("IonFrig2"))
	KAS_ShipsAdd("GrowSelection_AllP1", "IonFrig3")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("IonFrig3"))
	KAS_ShipsAdd("GrowSelection_AllP1", "StdCorvette1")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("StdCorvette1"))
	KAS_ShipsAdd("GrowSelection_AllP1", "StdCorvette2")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("StdCorvette2"))
	KAS_ShipsAdd("GrowSelection_AllP1", "MissileCorvette1")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("MissileCorvette1"))
	KAS_ShipsAdd("GrowSelection_AllP1", "P1Mothership")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("P1Mothership"))
	KAS_ShipsAdd("GrowSelection_AllP1", "ProtectFrigs")    --kasfShipsAdd(kasGrowSelectionPtr("AllP1"), kasAITeamShipsPtr("ProtectFrigs"))
	if (_VIFONCE032 == 0 and (SobGroup_Count("P1Mothership") < 1) and (KASObjective_GetState(ObjectiveID_DestroyP1Ms) == 0)) then  -- "ifonce" #32    --kasfShipsCount(kasAITeamShipsPtr("P1Mothership"))
	
	_VIFONCE032 = 1 --created,set;
	KASObjective_SetState(ObjectiveID_DestroyP1Ms, 1)    --kasfObjectiveSet("DestroyP1Ms", 1)
	KAS_MusicStop(12)    --kasfMusicStop(12)
	end 
	if (_VIFONCE033 == 0 and ((SobGroup_Count("P1Mothership") < 1) and (SobGroup_Count("IonFrig1") < 1) and (SobGroup_Count("IonFrig2") < 1) and (SobGroup_Count("IonFrig3") < 1) and (SobGroup_Count("ProtectFrigs") < 1) and ((KAS_UnderAttack("TuranicFighters", "GrowSelection_Out") < 1) and (KAS_UnderAttack("TuranicHarrassFighters", "GrowSelection_Out") < 1) and (KAS_UnderAttack("StdCorvette1", "GrowSelection_Out") < 1) and (KAS_UnderAttack("StdCorvette2", "GrowSelection_Out") < 1) and (KAS_UnderAttack("MissileCorvette1", "GrowSelection_Out") < 1)) and ( not(KAS_GetCurrentOrder("GrowSelection_AllP1") == 2)))) then  -- "ifonce" #33    --kasfShipsCount(kasAITeamShipsPtr("ProtectFrigs"))    --kasfShipsCount(kasAITeamShipsPtr("IonFrig3"))    --kasfShipsCount(kasAITeamShipsPtr("IonFrig2"))    --kasfShipsCount(kasAITeamShipsPtr("IonFrig1"))    --kasfShipsCount(kasAITeamShipsPtr("P1Mothership"))    --kasfShipsOrder(kasGrowSelectionPtr("AllP1"))    --kasfUnderAttackElsewhere(kasAITeamPtr("MissileCorvette1"), kasGrowSelectionPtr("Out"))    --kasfUnderAttackElsewhere(kasAITeamPtr("StdCorvette2"), kasGrowSelectionPtr("Out"))    --kasfUnderAttackElsewhere(kasAITeamPtr("StdCorvette1"), kasGrowSelectionPtr("Out"))    --kasfUnderAttackElsewhere(kasAITeamPtr("TuranicHarrassFighters"), kasGrowSelectionPtr("Out"))    --kasfUnderAttackElsewhere(kasAITeamPtr("TuranicFighters"), kasGrowSelectionPtr("Out"))
	
	_VIFONCE033 = 1 --created,set;
	KASTimer_Start(TimerID_EndOfTheWorldAsWeKnowIt, 5)
	end 
	if (_VIFONCE034 == 0 and (KASTimer_IsExpiredIfSoDestroy(TimerID_EndOfTheWorldAsWeKnowIt) ~= 0)) then  -- "ifonce" #34
	
	_VIFONCE034 = 1 --created,set;
	if (ignoredFunction(0) == 0) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60502", 3)    --kasfSpeechEvent((502 + 4096 + 268435456), 0)
	elseif (ignoredFunction(0) == 1) then     --kasfRaceOfHuman()
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60503", 3)    --kasfSpeechEvent((503 + 4096 + 268435456), 0)
	end 
	KASObjective_Add(ObjectiveID_Hyperspace, "Hyperspace", OT_Primary)    --kasfObjectiveCreate("Hyperspace", LSTRING_TBHyperspace[strCurLanguage], LSTRING_TBHyperspace[strCurLanguage])
	Objective_SetDescription(ObjectiveID_Hyperspace, "hyperspace")
	KASObjective_SetState(ObjectiveID_ProtectTheFleet, 1)    --kasfObjectiveSet("ProtectTheFleet", 1)
	end 
	if (_VIFONCE035 == 0 and (KAS_PlayerHasResearch(0, "CorvetteDrive") ~= 0)) then  -- "ifonce" #35    --kasfDoesPlayerHave("MassDrive10Kt")
	
	_VIFONCE035 = 1 --created,set;
	KAS_UnrestrictResearchOption(0, "CorvetteChassis")    --kasfAllowPlayerToResearch("Chassis2")
	end 
	if ((KAS_PlayerHasResearch(0, "CorvetteChassis") ~= 0) and (SetMediumGuns == 0)) then     --kasfDoesPlayerHave("Chassis2")
	
	KAS_UnrestrictResearchOption(0, "HeavyCorvetteUpgrade")    --kasfAllowPlayerToResearch("MediumGuns")
	SetMediumGuns = 1 --created,set
	end 
	if (_VIFONCE036 == 0 and (KAS_PlayerHasResearch(0, "FighterChassis") ~= 0)) then  -- "ifonce" #36    --kasfDoesPlayerHave("Chassis1")
	
	_VIFONCE036 = 1 --created,set;
	KAS_UnrestrictResearchOption(0, "CorvetteDrive")    --kasfAllowPlayerToResearch("MassDrive10Kt")
	end 
	
end 

function OnStartOrLoad()
    print("OnStartOrLoad issued")

    --Mission-global GrowSelections/SobGroups
    KASSobGroup_Create("GrowSelection_AllP1")
    KASSobGroup_Create("GrowSelection_AllShips")
    KASSobGroup_Create("GrowSelection_AttackC1")
    KASSobGroup_Create("GrowSelection_AttackC2")
    KASSobGroup_Create("GrowSelection_AttackFighters")
    KASSobGroup_Create("GrowSelection_AttackFrig1")
    KASSobGroup_Create("GrowSelection_AttackFrig2")
    KASSobGroup_Create("GrowSelection_AttackFrig3")
    KASSobGroup_Create("GrowSelection_AttackHarrassers")
    KASSobGroup_Create("GrowSelection_AttackMc")
    KASSobGroup_Create("GrowSelection_AttackingCapitalShips")
    KASSobGroup_Create("GrowSelection_AttackingCarrier")
    KASSobGroup_Create("GrowSelection_AttackingCorvettes")
    KASSobGroup_Create("GrowSelection_AttackingDestroyer")
    KASSobGroup_Create("GrowSelection_AttackingFighters")
    KASSobGroup_Create("GrowSelection_AttackingFrigates")
    KASSobGroup_Create("GrowSelection_AttackingHeavyCruiser")
    KASSobGroup_Create("GrowSelection_CapsFuckingStupid")
    KASSobGroup_Create("GrowSelection_CapsNearFrig1")
    KASSobGroup_Create("GrowSelection_CapsVictemFrig1")
    KASSobGroup_Create("GrowSelection_DeadPlayerCaps")
    KASSobGroup_Create("GrowSelection_DeadPlayerShips")
    KASSobGroup_Create("GrowSelection_EnemyAttackers")
    KASSobGroup_Create("GrowSelection_EnemyOfMS")
    KASSobGroup_Create("GrowSelection_FuckingStupid")
    KASSobGroup_Create("GrowSelection_ISBentusi")
    KASSobGroup_Create("GrowSelection_InTheArea")
    KASSobGroup_Create("GrowSelection_IndxCapsNearFrig1")
    KASSobGroup_Create("GrowSelection_IndxCapsVictemFrig1")
    KASSobGroup_Create("GrowSelection_IsInside")
    KASSobGroup_Create("GrowSelection_NastyCaps1")
    KASSobGroup_Create("GrowSelection_NastyCaps2")
    KASSobGroup_Create("GrowSelection_NastyCaps3")
    KASSobGroup_Create("GrowSelection_NearFrig1")
    KASSobGroup_Create("GrowSelection_NearFrig2")
    KASSobGroup_Create("GrowSelection_NearFrig3")
    KASSobGroup_Create("GrowSelection_NearNone")
    KASSobGroup_Create("GrowSelection_Out")
    KASSobGroup_Create("GrowSelection_PCapShipsAttackCarrier")
    KASSobGroup_Create("GrowSelection_PCapShipsAttackFrig1")
    KASSobGroup_Create("GrowSelection_PCapShipsAttackFrig2")
    KASSobGroup_Create("GrowSelection_PCapShipsAttackFrig3")
    KASSobGroup_Create("GrowSelection_PResourceController")
    KASSobGroup_Create("GrowSelection_PResourcing")
    KASSobGroup_Create("GrowSelection_PlayerCapitalShips")
    KASSobGroup_Create("GrowSelection_PlayerCarrier")
    KASSobGroup_Create("GrowSelection_PlayerCorvettes")
    KASSobGroup_Create("GrowSelection_PlayerDestroyer")
    KASSobGroup_Create("GrowSelection_PlayerFighters")
    KASSobGroup_Create("GrowSelection_PlayerFrigates")
    KASSobGroup_Create("GrowSelection_PlayerHeavyCruiser")
    KASSobGroup_Create("GrowSelection_PlayerMothership")
    KASSobGroup_Create("GrowSelection_PlayerResourcers")
    KASSobGroup_Create("GrowSelection_PlayerShips")
    KASSobGroup_Create("GrowSelection_ResourcersNearby")
    KASSobGroup_Create("GrowSelection_ResourcersTemp")
    KASSobGroup_Create("GrowSelection_Trader")
    KASSobGroup_Create("GrowSelection_VictemFrig1")
    KASSobGroup_CreateIfNotExist("IonFrig1")
    KASSobGroup_CreateIfNotExist("IonFrig2")
    KASSobGroup_CreateIfNotExist("IonFrig3")
    KASSobGroup_CreateIfNotExist("MissileCorvette1")
    KASSobGroup_CreateIfNotExist("P1Mothership")
    KASSobGroup_CreateIfNotExist("ProtectFrigs")
    KASSobGroup_CreateIfNotExist("StdCorvette1")
    KASSobGroup_CreateIfNotExist("StdCorvette2")
    KASSobGroup_CreateIfNotExist("Traders")
    KASSobGroup_CreateIfNotExist("TuranicFighters")
    KASSobGroup_CreateIfNotExist("TuranicHarrassFighters")

    Sound_SpeechSubtitlePath("speech:missions/Mission04/")
    Scar_TracesEnable("SGAction, SGQuery, Camera, ATI, Player")

    LCWatcher_SpecifyLocalFilter(LC_Scar, "_VIFONCE;IonFrig1;IonFrig2;IonFrig3;MissileCorvette1;TeamOfDummys;P1Mothership;ProtectFrigs;StdCorvette1;StdCorvette2;Traders;TuranicFighters;TuranicHarrassFighters;")
    KAS_SetColourSchemeColours(1, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Turanic.tga", {0.921,0.75,0.419}, "data:/effect/trails/tur_trail_clr.tga")
    Player_SetTeamColourTheme(1, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Turanic.tga", {0.921,0.75,0.419}, "data:/effect/trails/tur_trail_clr.tga")
    Player_SetTeamColourTheme(3, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Turanic.tga", {0.921,0.75,0.419}, "data:/effect/trails/tur_trail_clr.tga")
    KAS_SetColourScheme("IonFrig1", 1)
    KAS_SetColourScheme("IonFrig2", 1)
    KAS_SetColourScheme("IonFrig3", 1)
    KAS_SetColourScheme("MissileCorvette1", 1)
    KAS_SetColourScheme("P1Mothership", 1)
    KAS_SetColourScheme("ProtectFrigs", 1)
    KAS_SetColourScheme("StdCorvette1", 1)
    KAS_SetColourScheme("StdCorvette2", 1)
    KAS_SetColourScheme("Traders", 1)
    KAS_SetColourScheme("TuranicFighters", 1)
    KAS_SetColourScheme("TuranicHarrassFighters", 1)
    Player_SetPlayerName(1, "$60504")
    Player_SetPlayerName(2, "$60505")

    singlePlayerOnStartOrLoad(04)
end

function OnInit()
    print("OnInit issued")

    KAS_TeamCountRegister("MissileCorvette1")
    KAS_TeamCountRegister("StdCorvette1")
    KAS_TeamCountRegister("StdCorvette2")
    KAS_TeamCountRegister("TuranicFighters")
    Player_RestrictAllResearch(0, 1)
    SobGroup_LoadPersistantData("Kus_Mothership")
    Camera_Interpolate('here', 'Camera_Startpos', 0)
    KAS_RememberStartingRUs()
    singlePlayerStartGame(04)
    KAS_CPUPlayerInit()

    KASRule_Add("Mission04", "Watch_Mission04", "OnInit")
    Init_Mission04("Mission04")
    KAS_SetLetterboxStart(1, 3, 1, 0)
    singlePlayerPauseUntilHyperspaceComplete("OnInit_Finish()")
	HW2_ReactiveInfo() --Added for info in log file
end

function OnInit_Finish()
    print("OnInit_Finish issued")

    KAS_MusicPlayType( "data:sound/music/ambient/A02_mission2and4", MUS_Ambient )
    KAS_SetFormation("IonFrig1", "Broad")
end

