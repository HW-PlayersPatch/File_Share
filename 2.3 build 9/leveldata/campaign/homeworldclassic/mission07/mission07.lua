--
--  Generated\Mission07.c
--
--  Finite state machine routines for "Mission07" mission
--
--  Copyright (C) 1998 Relic Entertainment Inc.
--  All rights reserved
--
--  This code was autogenerated from Mission07.kp by KAS2C Version 2.05
--


--#include "Generated\Mission07.h"  -- prototypes and #includes for exposed game functions

--extern AITeam *CurrentTeamP;
--#define kasThisTeamPtr CurrentTeamP

--  for run-time scoping of symbols (variables, timers, etc.)

-- List of ignored functions (stubbed out to ignoredFunction()):
--kasfSoundEvent


dofilepath("data:scripts/SCAR/SCAR_Util.lua")             --stock HW2 scripting utilities
dofilepath("data:scripts/SCAR/KASUtil.lua")               --HW1->HW2 scripting utilities
dofilepath("data:scripts/SCAR/SinglePlayerFlow.lua")      --Emulation of HW1 singleplayer functionality
dofilepath("data:scripts/SCAR/SinglePlayerNIS.lua")       --Emulation of HW1 singleplayer NIS functionality
dofilepath("data:scripts/SCAR/SinglePlayerHyperspace.lua")--Emulation of HW1 hyperspace logic
dofilepath("data:scripts/SCAR/SpecialFlags.lua")          --Emulation of HW1 SPECIAL_xxx logic


--kas global variables, including variables used in ifOnce blocks
CurrentRUs = 0
G_CLICK_DefendFleet = 0
G_CLICK_ProtectResourcers = 0
G_HarvestedRUs = 0
G_MothershipDead = 0
G_PlayingNIS = 0
HonourGuardSwarm_DockCount = 0
HonourGuardSwarm_PodCount = 0
HonourGuardSwarm__VIFONCE001 = 0
PreviousWorldRUs = 0
SetMediumGuns = 0
WorldStartRUs = 0
_VIFONCE031 = 0
_VIFONCE032 = 0
_VIFONCE033 = 0
_VIFONCE034 = 0

--Following are global variables: created outside of the KAS structure and stubbed out here.
G_CLICK_Harvest = 0;   --nReferences: 2
--G_Nis5Complete : see SinglePlayerFlow.lua, nReferences: 2
--G_PlayNis : see SinglePlayerFlow.lua, nReferences: 1

--Following are Team-Scoped variables: referenced differently than globals.
AttackingMothership = {["P2Mothership"] = 0}
CounterAttack = {["P2Mothership"] = 0}
DeadMoSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam1"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
DeadResDefSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
DeadResSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
DefendMothership = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
DodgingOrOuttaHere = {["P2Mothership"] = 0}
FinalAssaultGone = {["P2Mothership"] = 0}
InFinalState = {["Dummy1"] = 0}
InNullState = {["Dummy1"] = 0}
IntroAttack = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
LastMoSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam1"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
LastResDefSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
LastResSwarmers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
MoSwarmers = {["P2Mothership"] = 0}
MothershipAlreadyGone = {["Dummy1"] = 0}
MothershipIn = {["Dummy1"] = 0}
MothershipSwarm = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
MovingToVol1 = {["P2Mothership"] = 0}
MovingToVol2 = {["P2Mothership"] = 0}
MovingToVol3 = {["P2Mothership"] = 0}
NumAdv = {["P2Mothership"] = 0}
NumPods = {["P2Mothership"] = 0}
NumSwarmers = {["P2Mothership"] = 0}
P2MothershipIn = {["Dummy1"] = 0}
ResDefSwarmers = {["P2Mothership"] = 0}
ResSwarmers = {["P2Mothership"] = 0}
ResourceSwarm = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
TakingResourcers = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
WaveNum = {["P2Mothership"] = 0}
_VIFONCE002 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam1"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE003 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam1"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE004 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE005 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE006 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE007 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["NISTeam2"] = 0, ["NISTeam3"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE008 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE009 = {["FuelPod1WAVE1"] = 0, ["FuelPod1WAVE2"] = 0, ["FuelPod2WAVE1"] = 0, ["FuelPod2WAVE2"] = 0, ["FuelPod3WAVE1"] = 0, ["FuelPod3WAVE2"] = 0, ["Swarmer1WAVE1"] = 0, ["Swarmer1WAVE2A"] = 0, ["Swarmer1WAVE2B"] = 0, ["Swarmer2WAVE1"] = 0, ["Swarmer2WAVE2A"] = 0, ["Swarmer2WAVE2B"] = 0, ["Swarmer3WAVE1"] = 0, ["Swarmer3WAVE2A"] = 0, ["Swarmer3WAVE2B"] = 0}
_VIFONCE010 = {["Dummy1"] = 0}
_VIFONCE011 = {["Dummy1"] = 0}
_VIFONCE012 = {["Dummy1"] = 0}
_VIFONCE013 = {["Dummy1"] = 0}
_VIFONCE014 = {["Dummy1"] = 0}
_VIFONCE015 = {["Dummy1"] = 0}
_VIFONCE016 = {["Dummy1"] = 0}
_VIFONCE017 = {["Dummy1"] = 0}
_VIFONCE018 = {["Dummy1"] = 0}
_VIFONCE019 = {["Dummy1"] = 0}
_VIFONCE020 = {["Dummy1"] = 0}
_VIFONCE021 = {["Dummy1"] = 0}
_VIFONCE022 = {["P2Mothership"] = 0}
_VIFONCE023 = {["P2Mothership"] = 0}
_VIFONCE024 = {["P2Mothership"] = 0}
_VIFONCE025 = {["P2Mothership"] = 0}
_VIFONCE026 = {["P2Mothership"] = 0}
_VIFONCE027 = {["P2Mothership"] = 0}
_VIFONCE028 = {["P2Mothership"] = 0}
_VIFONCE029 = {["P2Mothership"] = 0}
_VIFONCE030 = {["P2Mothership"] = 0}

--Following are Team-Scoped timers: referenced differently than globals.
Ambassador = {["Dummy1"] = 2}
AttackTimer = {["P2Mothership"] = 3}
BootIt = {["P2Mothership"] = 4}
CancelFocus = {["Dummy1"] = 5}
ChargeUpTimer1 = {["Dummy1"] = 6}
ChargeUpTimer2 = {["Dummy1"] = 7}
ChargeUpTimer3 = {["Dummy1"] = 8}
DefenseTimer = {["P2Mothership"] = 9}
DownTime = {["P2Mothership"] = 10}
GiveToAI = {["FuelPod1WAVE1"] = 11, ["FuelPod1WAVE2"] = 12, ["FuelPod2WAVE1"] = 13, ["FuelPod2WAVE2"] = 14, ["FuelPod3WAVE1"] = 15, ["FuelPod3WAVE2"] = 16, ["Swarmer1WAVE1"] = 17, ["Swarmer1WAVE2A"] = 18, ["Swarmer1WAVE2B"] = 19, ["Swarmer2WAVE1"] = 20, ["Swarmer2WAVE2A"] = 21, ["Swarmer2WAVE2B"] = 22, ["Swarmer3WAVE1"] = 23, ["Swarmer3WAVE2A"] = 24, ["Swarmer3WAVE2B"] = 25}
HyperspaceTimer = {["P2Mothership"] = 26}
ImDryImOuttaHere = {["P2Mothership"] = 27}
LBX = {["Dummy1"] = 28}
LBXTimer = {["Dummy1"] = 29}
Launching = {["Dummy1"] = 30}
LocationCardTimer = {["Dummy1"] = 31}
P2EscapeTimer = {["Dummy1"] = 32}
PodTest = {["P2Mothership"] = 33}
ResDefSwarm = {["FuelPod1WAVE1"] = 34, ["FuelPod1WAVE2"] = 35, ["FuelPod2WAVE1"] = 36, ["FuelPod2WAVE2"] = 37, ["FuelPod3WAVE1"] = 38, ["FuelPod3WAVE2"] = 39, ["NISTeam2"] = 40, ["NISTeam3"] = 41, ["Swarmer1WAVE1"] = 42, ["Swarmer1WAVE2A"] = 43, ["Swarmer1WAVE2B"] = 44, ["Swarmer2WAVE1"] = 45, ["Swarmer2WAVE2A"] = 46, ["Swarmer2WAVE2B"] = 47, ["Swarmer3WAVE1"] = 48, ["Swarmer3WAVE2A"] = 49, ["Swarmer3WAVE2B"] = 50}
ResSwarm = {["FuelPod1WAVE1"] = 51, ["FuelPod1WAVE2"] = 52, ["FuelPod2WAVE1"] = 53, ["FuelPod2WAVE2"] = 54, ["FuelPod3WAVE1"] = 55, ["FuelPod3WAVE2"] = 56, ["NISTeam2"] = 57, ["NISTeam3"] = 58, ["Swarmer1WAVE1"] = 59, ["Swarmer1WAVE2A"] = 60, ["Swarmer1WAVE2B"] = 61, ["Swarmer2WAVE1"] = 62, ["Swarmer2WAVE2A"] = 63, ["Swarmer2WAVE2B"] = 64, ["Swarmer3WAVE1"] = 65, ["Swarmer3WAVE2A"] = 66, ["Swarmer3WAVE2B"] = 67}
ResearchTimer = {["Dummy1"] = 68}
ResourceDefenderSwarm = {["FuelPod1WAVE1"] = 69, ["FuelPod1WAVE2"] = 70, ["FuelPod2WAVE1"] = 71, ["FuelPod2WAVE2"] = 72, ["FuelPod3WAVE1"] = 73, ["FuelPod3WAVE2"] = 74, ["Swarmer1WAVE1"] = 75, ["Swarmer1WAVE2A"] = 76, ["Swarmer1WAVE2B"] = 77, ["Swarmer2WAVE1"] = 78, ["Swarmer2WAVE2A"] = 79, ["Swarmer2WAVE2B"] = 80, ["Swarmer3WAVE1"] = 81, ["Swarmer3WAVE2A"] = 82, ["Swarmer3WAVE2B"] = 83, ["P2Mothership"] = 84}
ResourcerSwarm = {["P2Mothership"] = 85}
Resourcers = {["Dummy1"] = 86}
ScaryUFOGuys = {["Dummy1"] = 87}
WaitForDocking = {["P2Mothership"] = 88}
WaitToLaunch = {["FuelPod1WAVE1"] = 89, ["FuelPod1WAVE2"] = 90, ["FuelPod2WAVE1"] = 91, ["FuelPod2WAVE2"] = 92, ["FuelPod3WAVE1"] = 93, ["FuelPod3WAVE2"] = 94, ["Swarmer1WAVE1"] = 95, ["Swarmer1WAVE2A"] = 96, ["Swarmer1WAVE2B"] = 97, ["Swarmer2WAVE1"] = 98, ["Swarmer2WAVE2A"] = 99, ["Swarmer2WAVE2B"] = 100, ["Swarmer3WAVE1"] = 101, ["Swarmer3WAVE2A"] = 102, ["Swarmer3WAVE2B"] = 103}


--kas timer names, with mappings to indices
TimerID_HonourGuardSwarm_DockTimer = 0
TimerID_Tech1Mt = 1


--KAS objective names, set by KASObjective_Add
ObjectiveID_DefendFleet = 1
ObjectiveID_Harvest = 0
ObjectiveID_Hyperspace = 2
ObjectiveID_ProtectResourcers = 3
ObjectiveID_Count = 4


--Pointer IDs, set by KASPointer_Add<xxx>
PointerID_Contacts = 0


--extern sdword CurrentMissionScope;
--extern char CurrentMissionScopeName[];

--  for displaying localized strings
strCurLanguage = 1  --Naive treatement of localization language.;

LSTRING_LCLocationCard = {  -- multilingual strings
	"THE GARDENS OF KADESH",
	"JARDINS DE KADESH",
	"DIE GÄRTEN VON KADESH",
	"LOS JARDINES DE KADESH",
	"I GIARDINI DI KADESH", }
LSTRING_FINebulaRich = {  -- multilingual strings
	"The Nebula is incredibly rich in energy and resources.  Energy levels are so high that our sensors are having trouble compensating.\n\nBegin harvesting the nebula while we address this problem.",
	"La Nébuleuse est incroyablement riche en énergie et en ressources. Il y a de tels niveaux d'énergie que nos détecteurs peinent à compenser.\n\nCommencez la collecte dans la nébuleuse pendant que nous nous penchons sur ce problème.",
	"Der Nebel ist unglaublich reich an Energie und Rohstoffen. Die Energie-Level sind so hoch, dass unsere Sensoren Probleme haben, dies zu kompensieren.\n\nBeginnen Sie mit der Rohstoffernte im Nebel, während wir uns um dieses Problem kümmern.",
	"La nebulosa es muy rica en energía y recursos. Los niveles de energía son tan altos que nuestros sensores no pueden compensarlos.\n\nEmpieza a recolectar en la nebulosa mientras buscamos solución a este problema.",
	"Questa nebulosa è ricchissima di energia e risorse; i livelli energetici sono così alti che i nostri sensori non riescono a calcolarli.\n\nComincia la raccolta delle risorse, mentre tentiamo di risolvere questo problema.", }
LSTRING_FIUnknownContacts = {  -- multilingual strings
	"There is a contact closing with the Mothership.  Sensors instability in this region makes it difficult to identify.",
	"Contact établi avec véhicule près du Vaisseau Mère, mais l'instabilité des détecteurs dans cette région rend son identification difficile.",
	"Ein Kontakt nähert sich dem Mutterschiff. Die Sensor-Instabilität in dieser Region macht eine Identifikation sehr schwierig.",
	"Se está cerrando un contacto con la Nave nodriza. La inestabilidad de los sensores en esta zona dificulta la identificación de ese contacto.",
	"C'è un contatto in avvicinamento all'Astronave Madre. Purtroppo, i sensori sono fuori scala e non riescono a identificarlo.", }
LSTRING_FIPreparingAmbassador = {  -- multilingual strings
	"Prepare the Ambassador.",
	"Préparation de l'Ambassadeur.",
	"Botschafter bereitmachen.",
	"Preparad al embajador.",
	"Prepara l'Ambassador.", }
LSTRING_FIDefendMothership = {  -- multilingual strings
	"Delay the attacking ships while Fleet Command charges the hyperdrive module.  We should have the range to jump clear of the nebula.",
	"Retardez les vaisseaux agresseurs pendant que l'Amirauté charge le module d'hyperpropulsion. La portée devrait être suffisante pour nous faire bondir hors de la nébuleuse.",
	"Halten Sie die angreifenden Schiffe zurück, während das Flottenkommando das Hypersprung-Modul auflädt. Unsere Reichweite sollte so groß sein, dass wir aus dem Nebel herausspringen.",
	"Distrae a las naves atacantes mientras el mando de la flota carga el módulo de hiperpropulsión. Deberemos tener el alcance necesario para salir de la nebulosa.",
	"Trattieni le navi nemiche mentre il Comando della Flotta carica il modulo dell'iperguida. Dovremmo essere in grado di allontanarci dalla nebulosa.", }
LSTRING_FCHyperModuleCharging1 = {  -- multilingual strings
	"Hyperspace module at 35%, ready in 8 minutes.",
	"Module hyperspatial à 35%, prêt dans 8 minutes.",
	"Hypersprung-Modul bei 35%. Bereit in 8 Minuten.",
	"Módulo hiperespacial al 35%, preparado en 8 minutos.",
	"Modulo dell'Iperspazio al 35%, pronto in 8 minuti.", }
LSTRING_FCHyperModuleCharging2 = {  -- multilingual strings
	"Hyperspace module at 90%, ready in 1 minute.",
	"Module hyperspatial à 90%, prêt dans 1 minute.",
	"Hypersprung-Modul bei 90%. Bereit in 1 Minute.",
	"Módulo hiperespacial al 90%, preparado en 1 minuto.",
	"Modulo dell'Iperspazio al 90%, pronto in 1 minuto.", }
LSTRING_FCLetsGetOutOfHere = {  -- multilingual strings
	"Hyperspace module fully charged.  Get us out of this place.",
	"Activation  maximale du module hyperspatial. Sortez-nous vite d'ici.",
	"Hypersprung-Modul voll aufgeladen. Nichts wie raus hier!",
	"Módulo hiperespacial completamente cargado. Vámonos de este sitio.",
	"Modulo dell'Iperspazio pronto. Andiamocene da qui.", }
LSTRING_FIEngage = {  -- multilingual strings
	"Yes, co-ordinates set.  Engage hyperdrive!",
	"Oui, le cap est déterminé. Enclenchez l'hyperpropulsion!",
	"Ja, Koordinaten sind eingestellt. Hypersprung-Aggregat einschalten!",
	"Sí, coordenadas establecidas. Activar hiperpropulsión.",
	"Coordinate impostate: attiva l'iperguida!", }
LSTRING_FCHyperdriveFail = {  -- multilingual strings
	"Hyperdrive jump failed!  The Quantum waveform collapsed before the ship could enter hyperspace.",
	"Le bond par hyperpropulsion a échoué ! Il y a eu effondrement de l'amplitude quantique avant même que le vaisseau puisse atteindre l'hyperespace.  ",
	"Hyperraum-Sprung fehlgeschlagen! Die Quanten-Wellenform brach zusammen, bevor das Schiff in den Hyperraum eintreten konnte.",
	"Ha fallado la hiperpropulsión. La forma de onda cuántica ha colapsado antes de que la nave pudiera entrar en el hiperespacio.",
	"Salto nell'Iperspazio fallito! La forma d'onda Quantum è collassata prima che la nave potesse entrare nell'Iperspazio.", }
LSTRING_FIContinueProtecting = {  -- multilingual strings
	"Analyzing malfunction.  Continue to protect the Mothership until the problem is solved.",
	"Analyse de la défaillance. Protection du Vaisseau Mère jusqu'à résolution du problème.",
	"Fehlfunktion wird analysiert. Schützen Sie weiterhin das Mutterschiff, bis das Problem gelöst ist.",
	"Analizando fallo de funcionamiento. Sigue protegiendo la Nave nodriza hasta que se resuelva el problema.",
	"Stiamo analizzando il malfunzionamento: continua a proteggere l'Astronave Madre fino a quando non avremo trovato una soluzione.", }
LSTRING_FINewResearch = {  -- multilingual strings
	"We have never had to combat so many fighter craft before.  Our Research division has determined that it can design a new type of Corvette specially suited to combat multiple fighters.  Begin Research as soon as possible.",
	"Jamais n'avons nous dû affronter autant de chasseurs. Notre Service de recherche a établi la faisabilité d'un nouveau type de Corvette adapté au combat contre de multiples chasseurs.  Lancez cette recherche dès que possible.",
	"Wir mussten uns noch nie so vielen Jägern gleichzeitig stellen. Unsere Forschungsabteilung hat festgestellt, dass sie einen neuen Korvettentyp entwickeln kann, der speziell für den Kampf gegen mehrere Jäger ausgelegt ist. Beginnen Sie so schnell wie möglich mit den Forschungsarbeiten.",
	"Nunca habíamos tenido que enfrentarnos a tantos cazas juntos. Nuestra división de investigación ha determinado que puede diseñar un nuevo tipo de corbeta concebida especialmente para combatir a varios cazas. La investigación debe comenzar cuanto antes.",
	"Non abbiamo mai dovuto combattere con così tanti caccia prima d'ora. I nostri ricercatori pensano di poter creare un nuovo tipo di Corvetta, dedicata al combattimento contro nemici multipli. Comincia le ricerche il prima possibile.", }
LSTRING_FIProtectResources = {  -- multilingual strings
	"Enemy forces are concentrating on our Resource Collectors.  Allocate combat vessels to protect them.",
	"Les forces ennemies se concentrent sur nos Collecteurs de Ressources.  Affectez des unités de combat à leur protection.",
	"Feindliche Kräfte konzentrieren sich auf unsere Rohstoffernteschiffe. Setzen Sie Kampfschiffe zu ihrem Schutz ein.",
	"Las fuerzas enemigas se concentran en nuestros recolectores de recursos. Asigna naves de combate a su protección.",
	"Le forze nemiche si stanno concentrando intorno ai nostri Collettori di Ricerca: disponi le forze in modo da proteggerli.", }
LSTRING_FCHyperspaceBack = {  -- multilingual strings
	"The Hyperdrive is back on-line.",
	"L'hyperpropulsion est de nouveau opérationnelle.",
	"Das Hypersprung-Aggregat ist wieder online.",
	"Ya funciona la hiperpropulsión.",
	"L'Iperguida è di nuovo operativa.", }
LSTRING_FIJumpAway = {  -- multilingual strings
	"Let's put these fanatics behind us.",
	"Semons ces fanatiques.",
	"Nichts wie weg von diesen Irren.",
	"Alejémonos de esos fanáticos.",
	"Lasciamoci alle spalle questi pazzi.", }
LSTRING_TBHyperspace = {  -- multilingual strings
	"                HYPERSPACE",
	"                HYPERESPACE",
	"        HYPERRAUMSPRUNG",
	"              HIPERESPACIO",
	"				IPERSPAZIO", }
LSTRING_OBDefendFleet = {  -- multilingual strings
	"Defend Fleet",
	"Défendre la Flotte",
	"Flotte schützen.",
	"Defiende la flota",
	"Difendi la flotta", }
LSTRING_OBHarvestNebula = {  -- multilingual strings
	"Harvest Nebula",
	"Collecter des ressources au sein de la Nébuleuse",
	"Rohstoffe in Nebelwolke ernten.",
	"Recolecta nebulosas",
	"Raccogli le risorse nella nebulosa", }
LSTRING_OBProtect = {  -- multilingual strings
	"Protect Resourcers",
	"Protéger les collecteurs de ressources",
	"Rohstoffschiffe schützen.",
	"Protege los recursos",
	"Proteggi le risorse", }
LSTRING_LevelSave = {  -- multilingual strings
	"07 - The Gardens of Kadesh",
	"07 - Jardins de Kadesh",
	"07 – Die Gärten von Kadesh",
	"07 - Los jardines de Kadesh",
	"07 - I giardini di Kadesh", }

--
--  "initialize" code for Mission07 HonourGuardSwarm FSM
--
function Init_Mission07_HonourGuardSwarm(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	HonourGuardSwarm_DockCount = 0 --created,set
	HonourGuardSwarm_PodCount = 1 --created,set
	if (KAS_TeamNamesEqual(TeamName, "HighGuardSwarmers1") ~= 0) then     --kasfThisTeamIs(kasAITeamPtr("HighGuardSwarmers1"))
	
	--kasJump("WaitingLeader")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_WaitingLeader", "Init_Mission07_HonourGuardSwarm")
	Init_Mission07_HonourGuardSwarm_WaitingLeader(TeamName)
	return
	elseif (KAS_TeamNamesEqual(TeamName, "HighGuardSwarmers2") ~= 0) then     --kasfThisTeamIs(kasAITeamPtr("HighGuardSwarmers2"))
	
	--kasJump("Waiting")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_Waiting", "Init_Mission07_HonourGuardSwarm")
	Init_Mission07_HonourGuardSwarm_Waiting(TeamName)
	return
	end 
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm FSM
--
function Watch_Mission07_HonourGuardSwarm(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if (HonourGuardSwarm__VIFONCE001 == 0 and (SobGroup_Count(TeamName) == 0)) then  -- "ifonce" #1    --kasfTeamCount()
	
	HonourGuardSwarm__VIFONCE001 = 1 --created,set;
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_HonourGuardSwarm", "Watch_Mission07_HonourGuardSwarm")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_NullState", "Watch_Mission07_HonourGuardSwarm")
	Init_Mission07_HonourGuardSwarm_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 HonourGuardSwarm Waiting state
--
function Init_Mission07_HonourGuardSwarm_Waiting(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm Waiting state
--
function Watch_Mission07_HonourGuardSwarm_Waiting(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if (KAS_MessageReceived(TeamName, "HonourAttack") ~= 0) then     --kasfMsgReceived("HonourAttack")
	
	--kasJump("WaitingLeader")
	--KASRule_Remove("FSM_Mission07_HonourGuardSwarm", "Watch_Mission07_HonourGuardSwarm_Waiting")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_WaitingLeader", "Watch_Mission07_HonourGuardSwarm_Waiting")
	Init_Mission07_HonourGuardSwarm_WaitingLeader(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 HonourGuardSwarm WaitingLeader state
--
function Init_Mission07_HonourGuardSwarm_WaitingLeader(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm WaitingLeader state
--
function Watch_Mission07_HonourGuardSwarm_WaitingLeader(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if (KAS_FindEnemiesInside("CheckVolume", "GrowSelection_Invaders") ~= 0) then     --kasfFindEnemiesInside(kasVolumePtr("CheckVolume"), kasGrowSelectionPtr("Invaders"), 4000)
	
	--kasJump("Attack")
	--KASRule_Remove("FSM_Mission07_HonourGuardSwarm", "Watch_Mission07_HonourGuardSwarm_WaitingLeader")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_Attack", "Watch_Mission07_HonourGuardSwarm_WaitingLeader")
	Init_Mission07_HonourGuardSwarm_Attack(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 HonourGuardSwarm Attack state
--
function Init_Mission07_HonourGuardSwarm_Attack(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	SobGroup_SetROE(TeamName, OffensiveROE)    --kasfTacticsAggressive()
		SobGroup_SetStance(TeamName, AggressiveStance)
	KAS_Attack(TeamName, "GrowSelection_Invaders")    --kasfAttack(kasGrowSelectionPtr("Invaders"))
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm Attack state
--
function Watch_Mission07_HonourGuardSwarm_Attack(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if (KASTimer_IsExpiredIfSoDestroy(TimerID_HonourGuardSwarm_DockTimer) ~= 0) then 
	
	--kasJump("Dock")
	--KASRule_Remove("FSM_Mission07_HonourGuardSwarm", "Watch_Mission07_HonourGuardSwarm_Attack")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_Dock", "Watch_Mission07_HonourGuardSwarm_Attack")
	Init_Mission07_HonourGuardSwarm_Dock(TeamName)
	return
	end 
	if (KASTimer_GetRemaining(TimerID_HonourGuardSwarm_DockTimer) == 0 and ((SobGroup_Count("GrowSelection_Invaders") == 0) or (KAS_TeamFuelLowest(TeamName) < 25))) then     --kasfShipsCount(kasGrowSelectionPtr("Invaders"))    --kasfTeamFuelLowest()
	
	KASTimer_Start(TimerID_HonourGuardSwarm_DockTimer, 3)
	KAS_MessageSendToAll(TeamName, "HonourAttack")    --kasfMsgSendAll("HonourAttack")
	end 
	
end 


--
--  "initialize" code for Mission07 HonourGuardSwarm Dock state
--
function Init_Mission07_HonourGuardSwarm_Dock(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if ((SobGroup_Count("HighGuardFuelPod1") ~= 0) and (SobGroup_Count("HighGuardFuelPod2") ~= 0)) then     --kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod2"))    --kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod1"))
	
	KAS_ShipsAdd("GrowSelection_DockShips", "HighGuardFuelPod1")    --kasfShipsAdd(kasGrowSelectionPtr("DockShips"), kasAITeamShipsPtr("HighGuardFuelPod1"))
	KAS_ShipsAdd("GrowSelection_DockShips", "HighGuardFuelPod2")    --kasfShipsAdd(kasGrowSelectionPtr("DockShips"), kasAITeamShipsPtr("HighGuardFuelPod2"))
	SobGroup_DockSobGroup(TeamName, "GrowSelection_DockShips")    --kasfShipsDockSupportWith((&kasThisTeamPtr->shipList), kasGrowSelectionPtr("DockShips"))
	elseif (SobGroup_Count("HighGuardFuelPod1") ~= 0) then     --kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod1"))
	
	SobGroup_DockSobGroup(TeamName, "HighGuardFuelPod1")    --kasfDockSupportWith(kasAITeamPtr("HighGuardFuelPod1"))
	elseif (SobGroup_Count("HighGuardFuelPod2") ~= 0) then     --kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod2"))
	
	SobGroup_DockSobGroup(TeamName, "HighGuardFuelPod2")    --kasfDockSupportWith(kasAITeamPtr("HighGuardFuelPod2"))
	else
	
	end 
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm Dock state
--
function Watch_Mission07_HonourGuardSwarm_Dock(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	if (KAS_TeamIsDocking(TeamName) == 0) then     --kasfTeamDocking()
	
	--kasJump("Waiting")
	--KASRule_Remove("FSM_Mission07_HonourGuardSwarm", "Watch_Mission07_HonourGuardSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_HonourGuardSwarm_Waiting", "Watch_Mission07_HonourGuardSwarm_Dock")
	Init_Mission07_HonourGuardSwarm_Waiting(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 HonourGuardSwarm NullState state
--
function Init_Mission07_HonourGuardSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	
end 


--
--  "watch" code for Mission07 HonourGuardSwarm NullState state
--
function Watch_Mission07_HonourGuardSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_HonourGuardSwarm
	--TeamName = HonourGuardSwarm
	
end 


--
--  "initialize" code for Mission07 GenericSwarmAttack FSM
--
function Init_Mission07_GenericSwarmAttack(TeamName)
	--FSM: FSM_Mission07_GenericSwarmAttack
	--TeamName = GenericSwarmAttack
	KAS_ShipsAdd("GrowSelection_GenericSwarmers", TeamName)    --kasfShipsAdd(kasGrowSelectionPtr("GenericSwarmers"), (&kasThisTeamPtr->shipList))
	KAS_GiveToCPUPlayer(TeamName)    --kasfTeamGiveToAI()
	--kasJump("NullState")
	KASRule_Add(TeamName, "Watch_Mission07_GenericSwarmAttack_NullState", "Init_Mission07_GenericSwarmAttack")
	Init_Mission07_GenericSwarmAttack_NullState(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 GenericSwarmAttack FSM
--
function Watch_Mission07_GenericSwarmAttack(TeamName)
	--FSM: FSM_Mission07_GenericSwarmAttack
	--TeamName = GenericSwarmAttack
	
end 


--
--  "initialize" code for Mission07 GenericSwarmAttack NullState state
--
function Init_Mission07_GenericSwarmAttack_NullState(TeamName)
	--FSM: FSM_Mission07_GenericSwarmAttack
	--TeamName = GenericSwarmAttack
	
end 


--
--  "watch" code for Mission07 GenericSwarmAttack NullState state
--
function Watch_Mission07_GenericSwarmAttack_NullState(TeamName)
	--FSM: FSM_Mission07_GenericSwarmAttack
	--TeamName = GenericSwarmAttack
	
end 


--
--  "initialize" code for Mission07 GenericMothershipSwarm FSM
--
function Init_Mission07_GenericMothershipSwarm(TeamName)
	--FSM: FSM_Mission07_GenericMothershipSwarm
	--TeamName = "NISTeam1"
	DeadMoSwarmers[TeamName] = 0 --created,set
	KAS_ShipsAdd("GrowSelection_MothershipSwarm", TeamName)    --kasfShipsAdd(kasGrowSelectionPtr("MothershipSwarm"), (&kasThisTeamPtr->shipList))
	LastMoSwarmers[TeamName] = SobGroup_Count("GrowSelection_MothershipSwarm") --created,set    --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	KAS_FindPlayerShipsOfType("GrowSelection_Temp", "Mothership", 0)    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp"), "Mothership")
	KAS_FindEnemiesNearby("GrowSelection_Temp", 3500)    --kasfFindEnemiesNearby(kasGrowSelectionPtr("Temp"), 10000)
	KAS_FillShipsByType_Normal("GrowSelection_Moship", "GrowSelection_Temp", "Mothership")    --kasfShipsSelectType(kasGrowSelectionPtr("Moship"), kasGrowSelectionPtr("Temp"), "Mothership")
	SobGroup_FillSubtract("GrowSelection_Temp", "GrowSelection_Temp", "GrowSelection_Moship")    --kasfShipsRemove(kasGrowSelectionPtr("Temp"), kasGrowSelectionPtr("Moship"))
	if ((KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Fighter_hw1") ~= 0) or (KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Corvette_hw1") ~= 0) or (KAS_FillShipsByCapital("GrowSelection_Targets", "GrowSelection_Temp") ~= 0) or (KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Resource") ~= 0) or (KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Utility") ~= 0)) then     --kasfShipsSelectCapital(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"))    --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_NonCombat")    --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Resource")    --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Corvette")    --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Fighter")
	
	if (KAS_FillShipsByType_Normal("GrowSelection_Field", "GrowSelection_Targets", "FieldFrigate") ~= 0) then     --kasfShipsSelectType(kasGrowSelectionPtr("Field"), kasGrowSelectionPtr("Targets"), "DFGFrigate")
	
	SobGroup_FillSubtract("GrowSelection_Targets", "GrowSelection_Targets", "GrowSelection_Field")    --kasfShipsRemove(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Field"))
	if (SobGroup_Count("GrowSelection_Targets") == 0) then     --kasfShipsCount(kasGrowSelectionPtr("Targets"))
	
	if (KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Resource") ~= 0 or KAS_FillShipsByClass_Normal("GrowSelection_Targets", "GrowSelection_Temp", "Utility") ~= 0) then     --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_NonCombat")    --kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Resource")
	
	end 
	end 
	end 
	if (SobGroup_FillSobGroupByHealthBelow("GrowSelection_Damaged", "GrowSelection_Targets", 50 / 100) ~= 0 or SobGroup_FillSobGroupByHealthBelow("GrowSelection_Damaged", "GrowSelection_Targets", 90 / 100) ~= 0) then     --kasfShipsSelectDamaged(kasGrowSelectionPtr("Damaged"), kasGrowSelectionPtr("Targets"), 90)    --kasfShipsSelectDamaged(kasGrowSelectionPtr("Damaged"), kasGrowSelectionPtr("Targets"), 50)
	
	SobGroup_Clear("GrowSelection_Targets")    --kasfGrowSelectionClear(kasGrowSelectionPtr("Targets"))
	KAS_ShipsAdd("GrowSelection_Targets", "GrowSelection_Damaged")    --kasfShipsAdd(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Damaged"))
	end 
	KAS_SetSwarmerTargets(TeamName, "GrowSelection_Targets")    --kasfSetSwarmerTargets(kasGrowSelectionPtr("Targets"))
	end 
	KAS_GiveToCPUPlayer(TeamName)    --kasfTeamGiveToAI()
	--kasJump("NullState")
	KASRule_Add(TeamName, "Watch_Mission07_GenericMothershipSwarm_NullState", "Init_Mission07_GenericMothershipSwarm")
	Init_Mission07_GenericMothershipSwarm_NullState(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 GenericMothershipSwarm FSM
--
function Watch_Mission07_GenericMothershipSwarm(TeamName)
	--FSM: FSM_Mission07_GenericMothershipSwarm
	--TeamName = "NISTeam1"
	if (SobGroup_Count("GrowSelection_MothershipSwarm") < LastMoSwarmers[TeamName]) then     --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	
	DeadMoSwarmers[TeamName] = DeadMoSwarmers[TeamName] + (LastMoSwarmers[TeamName] - SobGroup_Count("GrowSelection_MothershipSwarm")) --set    --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	LastMoSwarmers[TeamName] = SobGroup_Count("GrowSelection_MothershipSwarm") --set    --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	end 
	if (_VIFONCE002[TeamName] == 0 and (SobGroup_Count("GrowSelection_MothershipSwarm") < DeadMoSwarmers[TeamName])) then  -- "ifonce" #2    --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	
	_VIFONCE002[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "MoSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "MoSwarmersInTrouble")
	KAS_MessageSend(TeamName, "Dummy1", "MoSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "MoSwarmersInTrouble")
	end 
	if (_VIFONCE003[TeamName] == 0 and (SobGroup_Count("GrowSelection_MothershipSwarm") == 0)) then  -- "ifonce" #3    --kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))
	
	_VIFONCE003[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "MoSwarmersDead")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "MoSwarmersDead")
	end 
	
end 


--
--  "initialize" code for Mission07 GenericMothershipSwarm NullState state
--
function Init_Mission07_GenericMothershipSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_GenericMothershipSwarm
	--TeamName = "NISTeam1"
	
end 


--
--  "watch" code for Mission07 GenericMothershipSwarm NullState state
--
function Watch_Mission07_GenericMothershipSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_GenericMothershipSwarm
	--TeamName = "NISTeam1"
	
end 


--
--  "initialize" code for Mission07 GenericResourcerSwarm FSM
--
function Init_Mission07_GenericResourcerSwarm(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	DeadResSwarmers[TeamName] = 0 --created,set
	KAS_ShipsAdd("GrowSelection_ResourcerSwarm", TeamName)    --kasfShipsAdd(kasGrowSelectionPtr("ResourcerSwarm"), (&kasThisTeamPtr->shipList))
	LastResSwarmers[TeamName] = SobGroup_Count("GrowSelection_ResourcerSwarm") --created,set    --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	if (KAS_FindPlayerShipsOfType("GrowSelection_Coll", "ResourceCollector", 0) ~= 0) then     --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Coll"), "ResourceCollector")
	
	TakingResourcers[TeamName] = 1 --created,set
	else
	
	KAS_FindPlayerShipsOfType("GrowSelection_Coll", "ResourceController", 0)    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Coll"), "ResourceController")
	end 
	KASTimer_Start(ResSwarm[TeamName], 40)
	--kasJump("MoveToTarget")
	KASRule_Add(TeamName, "Watch_Mission07_GenericResourcerSwarm_MoveToTarget", "Init_Mission07_GenericResourcerSwarm")
	Init_Mission07_GenericResourcerSwarm_MoveToTarget(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 GenericResourcerSwarm FSM
--
function Watch_Mission07_GenericResourcerSwarm(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	if (SobGroup_Count("GrowSelection_ResourcerSwarm") < LastResSwarmers[TeamName]) then     --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	
	DeadResSwarmers[TeamName] = DeadResSwarmers[TeamName] + (LastResSwarmers[TeamName] - SobGroup_Count("GrowSelection_ResourcerSwarm")) --set    --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	LastResSwarmers[TeamName] = SobGroup_Count("GrowSelection_ResourcerSwarm") --set    --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	end 
	if (_VIFONCE004[TeamName] == 0 and (SobGroup_Count("GrowSelection_ResourcerSwarm") < DeadResSwarmers[TeamName])) then  -- "ifonce" #4    --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	
	_VIFONCE004[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "ResSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResSwarmersInTrouble")
	KAS_MessageSend(TeamName, "Dummy1", "ResSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "ResSwarmersInTrouble")
	end 
	if (_VIFONCE005[TeamName] == 0 and (SobGroup_Count("GrowSelection_ResourcerSwarm") == 0)) then  -- "ifonce" #5    --kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))
	
	_VIFONCE005[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "ResSwarmersDead")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResSwarmersDead")
	end 
	
end 


--
--  "initialize" code for Mission07 GenericResourcerSwarm MoveToTarget state
--
function Init_Mission07_GenericResourcerSwarm_MoveToTarget(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	KAS_SwarmMoveTo(TeamName, "GrowSelection_Coll")    --kasfSwarmMoveTo(kasGrowSelectionPtr("Coll"))
	
end 


--
--  "watch" code for Mission07 GenericResourcerSwarm MoveToTarget state
--
function Watch_Mission07_GenericResourcerSwarm_MoveToTarget(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	if (KASTimer_IsExpiredIfSoDestroy(ResSwarm[TeamName]) ~= 0) then 
	
	if (TakingResourcers[TeamName] ~= 0) then 
	
	KAS_MessageSendToAll(TeamName, "ImTakingTheResourcers")    --kasfMsgSendAll("ImTakingTheResourcers")
	end 
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	KAS_SetSwarmerTargets(TeamName, "GrowSelection_Coll")    --kasfSetSwarmerTargets(kasGrowSelectionPtr("Coll"))
	KAS_GiveToCPUPlayer(TeamName)    --kasfTeamGiveToAI()
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_GenericResourcerSwarm", "Watch_Mission07_GenericResourcerSwarm_MoveToTarget")
	KASRule_Add(TeamName, "Watch_Mission07_GenericResourcerSwarm_NullState", "Watch_Mission07_GenericResourcerSwarm_MoveToTarget")
	Init_Mission07_GenericResourcerSwarm_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 GenericResourcerSwarm NullState state
--
function Init_Mission07_GenericResourcerSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	
end 


--
--  "watch" code for Mission07 GenericResourcerSwarm NullState state
--
function Watch_Mission07_GenericResourcerSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_GenericResourcerSwarm
	--TeamName = "NISTeam3"
	
end 


--
--  "initialize" code for Mission07 ResourceDefenderSwarm FSM
--
function Init_Mission07_ResourceDefenderSwarm(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	DeadResDefSwarmers[TeamName] = 0 --created,set
	KAS_ShipsAdd("GrowSelection_ResourceDefSwarm", TeamName)    --kasfShipsAdd(kasGrowSelectionPtr("ResourceDefSwarm"), (&kasThisTeamPtr->shipList))
	LastResDefSwarmers[TeamName] = SobGroup_Count("GrowSelection_ResourceDefSwarm") --created,set    --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	if ((KAS_FindPlayerShipsOfType("GrowSelection_Temp1", "ResourceController", 0) ~= 0) or (KAS_FindPlayerShipsOfType("GrowSelection_Temp2", "ResourceCollector", 0) ~= 0)) then     --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp2"), "ResourceCollector")    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp1"), "ResourceController")
	
	KAS_ShipsAdd("GrowSelection_Resource", "GrowSelection_Temp1")    --kasfShipsAdd(kasGrowSelectionPtr("Resource"), kasGrowSelectionPtr("Temp1"))
	KAS_ShipsAdd("GrowSelection_Resource", "GrowSelection_Temp2")    --kasfShipsAdd(kasGrowSelectionPtr("Resource"), kasGrowSelectionPtr("Temp2"))
	KAS_ShipsAdd("GrowSelection_Defenders", "GrowSelection_Resource")    --kasfShipsAdd(kasGrowSelectionPtr("Defenders"), kasGrowSelectionPtr("Resource"))
	KAS_FindEnemiesNearby("GrowSelection_Defenders", 1750)    --kasfFindEnemiesNearby(kasGrowSelectionPtr("Defenders"), 5000)
	SobGroup_FillSubtract("GrowSelection_Defenders", "GrowSelection_Defenders", "GrowSelection_Temp")    --kasfShipsRemove(kasGrowSelectionPtr("Defenders"), kasGrowSelectionPtr("Temp"))
	end 
	KASTimer_Start(ResDefSwarm[TeamName], 20)
	--kasJump("MoveToTarget")
	KASRule_Add(TeamName, "Watch_Mission07_ResourceDefenderSwarm_MoveToTarget", "Init_Mission07_ResourceDefenderSwarm")
	Init_Mission07_ResourceDefenderSwarm_MoveToTarget(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 ResourceDefenderSwarm FSM
--
function Watch_Mission07_ResourceDefenderSwarm(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	if (SobGroup_Count("GrowSelection_ResourceDefSwarm") < LastResDefSwarmers[TeamName]) then     --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	
	DeadResDefSwarmers[TeamName] = DeadResSwarmers[TeamName] + (LastResSwarmers[TeamName] - SobGroup_Count("GrowSelection_ResourceDefSwarm")) --set    --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	LastResDefSwarmers[TeamName] = SobGroup_Count("GrowSelection_ResourceDefSwarm") --set    --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	end 
	if (_VIFONCE006[TeamName] == 0 and (SobGroup_Count("GrowSelection_ResourceDefSwarm") < DeadResDefSwarmers[TeamName])) then  -- "ifonce" #6    --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	
	_VIFONCE006[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "ResDefSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResDefSwarmersInTrouble")
	KAS_MessageSend(TeamName, "Dummy1", "ResDefSwarmersInTrouble")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "ResDefSwarmersInTrouble")
	end 
	if (_VIFONCE007[TeamName] == 0 and (SobGroup_Count("GrowSelection_ResourceDefSwarm") == 0)) then  -- "ifonce" #7    --kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))
	
	_VIFONCE007[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "ResDefSwarmersDead")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResDefSwarmersDead")
	end 
	
end 


--
--  "initialize" code for Mission07 ResourceDefenderSwarm MoveToTarget state
--
function Init_Mission07_ResourceDefenderSwarm_MoveToTarget(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	KAS_SwarmMoveTo(TeamName, "GrowSelection_Defenders")    --kasfSwarmMoveTo(kasGrowSelectionPtr("Defenders"))
	
end 


--
--  "watch" code for Mission07 ResourceDefenderSwarm MoveToTarget state
--
function Watch_Mission07_ResourceDefenderSwarm_MoveToTarget(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	if (KASTimer_IsExpiredIfSoDestroy(ResDefSwarm[TeamName]) ~= 0) then 
	
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	KAS_SetSwarmerTargets(TeamName, "GrowSelection_Defenders")    --kasfSetSwarmerTargets(kasGrowSelectionPtr("Defenders"))
	KAS_GiveToCPUPlayer(TeamName)    --kasfTeamGiveToAI()
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_ResourceDefenderSwarm", "Watch_Mission07_ResourceDefenderSwarm_MoveToTarget")
	KASRule_Add(TeamName, "Watch_Mission07_ResourceDefenderSwarm_NullState", "Watch_Mission07_ResourceDefenderSwarm_MoveToTarget")
	Init_Mission07_ResourceDefenderSwarm_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 ResourceDefenderSwarm NullState state
--
function Init_Mission07_ResourceDefenderSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	
end 


--
--  "watch" code for Mission07 ResourceDefenderSwarm NullState state
--
function Watch_Mission07_ResourceDefenderSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_ResourceDefenderSwarm
	--TeamName = "NISTeam3"
	
end 


--
--  "initialize" code for Mission07 DefendMothership FSM
--
function Init_Mission07_DefendMothership(TeamName)
	--FSM: FSM_Mission07_DefendMothership
	--TeamName = DefendMothership
	KAS_UnderAttack("P2Mothership", "GrowSelection_Attackers")    --kasfUnderAttackElsewhere(kasAITeamPtr("P2Mothership"), kasGrowSelectionPtr("Attackers"))
	KAS_SetSwarmerTargets(TeamName, "GrowSelection_Attackers")    --kasfSetSwarmerTargets(kasGrowSelectionPtr("Attackers"))
	KAS_ShipsAdd("GrowSelection_DefendMothership", TeamName)    --kasfShipsAdd(kasGrowSelectionPtr("DefendMothership"), (&kasThisTeamPtr->shipList))
	KAS_GiveToCPUPlayer(TeamName)    --kasfTeamGiveToAI()
	--kasJump("NullState")
	KASRule_Add(TeamName, "Watch_Mission07_DefendMothership_NullState", "Init_Mission07_DefendMothership")
	Init_Mission07_DefendMothership_NullState(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 DefendMothership FSM
--
function Watch_Mission07_DefendMothership(TeamName)
	--FSM: FSM_Mission07_DefendMothership
	--TeamName = DefendMothership
	if (_VIFONCE008[TeamName] == 0 and (SobGroup_Count(TeamName) == 0)) then  -- "ifonce" #8    --kasfTeamCount()
	
	_VIFONCE008[TeamName] = 1 --created,set;
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_DefendMothership", "Watch_Mission07_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission07_DefendMothership_NullState", "Watch_Mission07_DefendMothership")
	Init_Mission07_DefendMothership_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 DefendMothership NullState state
--
function Init_Mission07_DefendMothership_NullState(TeamName)
	--FSM: FSM_Mission07_DefendMothership
	--TeamName = DefendMothership
	
end 


--
--  "watch" code for Mission07 DefendMothership NullState state
--
function Watch_Mission07_DefendMothership_NullState(TeamName)
	--FSM: FSM_Mission07_DefendMothership
	--TeamName = DefendMothership
	
end 


--
--  "initialize" code for Mission07 IntroAttack FSM
--
function Init_Mission07_IntroAttack(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	KAS_ShipsSetRetaliation(TeamName, 0)    --kasfShipsSetNonRetaliation((&kasThisTeamPtr->shipList))
	--kasJump("GetStarted")
	KASRule_Add(TeamName, "Watch_Mission07_IntroAttack_GetStarted", "Init_Mission07_IntroAttack")
	Init_Mission07_IntroAttack_GetStarted(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 IntroAttack FSM
--
function Watch_Mission07_IntroAttack(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	if (_VIFONCE009[TeamName] == 0 and (SobGroup_Count(TeamName) == 0)) then  -- "ifonce" #9    --kasfTeamCount()
	
	_VIFONCE009[TeamName] = 1 --created,set;
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_IntroAttack", "Watch_Mission07_IntroAttack")
	KASRule_Add(TeamName, "Watch_Mission07_IntroAttack_NullState", "Watch_Mission07_IntroAttack")
	Init_Mission07_IntroAttack_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 IntroAttack GetStarted state
--
function Init_Mission07_IntroAttack_GetStarted(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	KAS_AttackPlayerMothership(TeamName)    --kasfAttackMothership()
	
end 


--
--  "watch" code for Mission07 IntroAttack GetStarted state
--
function Watch_Mission07_IntroAttack_GetStarted(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	if (SobGroup_IsShipNearPoint(TeamName, "PlayerStartPoint", 3500) ~= 0) then     --kasfNearby(kasVectorPtr("StartPointPlayer"), 10000)
	
	--kasJump("WaitForAttack")
	--KASRule_Remove("FSM_Mission07_IntroAttack", "Watch_Mission07_IntroAttack_GetStarted")
	KASRule_Add(TeamName, "Watch_Mission07_IntroAttack_WaitForAttack", "Watch_Mission07_IntroAttack_GetStarted")
	Init_Mission07_IntroAttack_WaitForAttack(TeamName)
	return
	end 
	if (KAS_MessageReceived(TeamName, "Attack") ~= 0) then     --kasfMsgReceived("Attack")
	
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	KAS_ShipsSetRetaliation(TeamName, 1)    --kasfShipsSetRetaliation((&kasThisTeamPtr->shipList))
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_IntroAttack_GetStarted")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	end 
	if (KAS_UnderAttack(TeamName, "GrowSelection_PartyPoopers") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("PartyPoopers"))
	
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	KAS_ShipsSetRetaliation(TeamName, 1)    --kasfShipsSetRetaliation((&kasThisTeamPtr->shipList))
	KAS_MessageSend(TeamName, "Dummy1", "UnderAttack")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "UnderAttack")
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_IntroAttack_GetStarted")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	end 
	
end 


--
--  "initialize" code for Mission07 IntroAttack WaitForAttack state
--
function Init_Mission07_IntroAttack_WaitForAttack(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	KAS_MessageSend(TeamName, "Dummy1", "Stopped")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "Stopped")
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	
end 


--
--  "watch" code for Mission07 IntroAttack WaitForAttack state
--
function Watch_Mission07_IntroAttack_WaitForAttack(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	if (KAS_MessageReceived(TeamName, "Attack") ~= 0) then     --kasfMsgReceived("Attack")
	
	KAS_ShipsSetRetaliation(TeamName, 1)    --kasfShipsSetRetaliation((&kasThisTeamPtr->shipList))
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_IntroAttack_WaitForAttack")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	end 
	if (KAS_UnderAttack(TeamName, "GrowSelection_PartyPoopers") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("PartyPoopers"))
	
	KAS_ShipsSetRetaliation(TeamName, 1)    --kasfShipsSetRetaliation((&kasThisTeamPtr->shipList))
	KAS_MessageSendToAll(TeamName, "Attack")    --kasfMsgSendAll("Attack")
	KAS_MessageSend(TeamName, "Dummy1", "UnderAttack")    --kasfMsgSend(kasAITeamPtr("Dummy1"), "UnderAttack")
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_IntroAttack_WaitForAttack")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	end 
	
end 


--
--  "initialize" code for Mission07 IntroAttack NullState state
--
function Init_Mission07_IntroAttack_NullState(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	
end 


--
--  "watch" code for Mission07 IntroAttack NullState state
--
function Watch_Mission07_IntroAttack_NullState(TeamName)
	--FSM: FSM_Mission07_IntroAttack
	--TeamName = IntroAttack
	
end 


--
--  "initialize" code for Mission07 PreAttackPod FSM
--
function Init_Mission07_PreAttackPod(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	--kasJump("Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_Dock", "Init_Mission07_PreAttackPod")
	Init_Mission07_PreAttackPod_Dock(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 PreAttackPod FSM
--
function Watch_Mission07_PreAttackPod(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (KAS_MessageReceived(TeamName, "DockNow") ~= 0) then     --kasfMsgReceived("DockNow")
	
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_NullState", "Watch_Mission07_PreAttackPod")
	Init_Mission07_PreAttackPod_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackPod Dock state
--
function Init_Mission07_PreAttackPod_Dock(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	
end 


--
--  "watch" code for Mission07 PreAttackPod Dock state
--
function Watch_Mission07_PreAttackPod_Dock(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (KAS_MessageReceived(TeamName, "DefendMothership") ~= 0) then     --kasfMsgReceived("DefendMothership")
	
	DefendMothership[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_WaitToLaunch", "Watch_Mission07_PreAttackPod_Dock")
	Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "MothershipSwarm") ~= 0) then     --kasfMsgReceived("MothershipSwarm")
	
	MothershipSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_WaitToLaunch", "Watch_Mission07_PreAttackPod_Dock")
	Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "ResourceSwarm") ~= 0) then     --kasfMsgReceived("ResourceSwarm")
	
	ResourceSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_WaitToLaunch", "Watch_Mission07_PreAttackPod_Dock")
	Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "ResourceDefenderSwarm") ~= 0) then     --kasfMsgReceived("ResourceDefenderSwarm")
	
	ResourceDefenderSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_WaitToLaunch", "Watch_Mission07_PreAttackPod_Dock")
	Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "IntroAttack") ~= 0) then     --kasfMsgReceived("IntroAttack")
	
	IntroAttack[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_WaitToLaunch", "Watch_Mission07_PreAttackPod_Dock")
	Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackPod WaitToLaunch state
--
function Init_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	KASTimer_Start(WaitToLaunch[TeamName], 5)
	
end 


--
--  "watch" code for Mission07 PreAttackPod WaitToLaunch state
--
function Watch_Mission07_PreAttackPod_WaitToLaunch(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (KASTimer_IsExpiredIfSoDestroy(WaitToLaunch[TeamName]) ~= 0) then 
	
	--kasJump("Launch")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_WaitToLaunch")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_Launch", "Watch_Mission07_PreAttackPod_WaitToLaunch")
	Init_Mission07_PreAttackPod_Launch(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackPod Launch state
--
function Init_Mission07_PreAttackPod_Launch(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	KAS_TeamHyperspaceInNear(TeamName, KAS_NamedCentrePosition(KAS_MessageSender(TeamName)), 350)    --kasfTeamHyperspaceInNear(kasTeamsVectorPtr("MsgSender"), 1000)
	KASTimer_Start(GiveToAI[TeamName], 10)
	
end 


--
--  "watch" code for Mission07 PreAttackPod Launch state
--
function Watch_Mission07_PreAttackPod_Launch(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (KASTimer_IsExpiredIfSoDestroy(GiveToAI[TeamName]) ~= 0) then 
	
	--kasJump("GetOrders")
	--KASRule_Remove("FSM_Mission07_PreAttackPod", "Watch_Mission07_PreAttackPod_Launch")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackPod_GetOrders", "Watch_Mission07_PreAttackPod_Launch")
	Init_Mission07_PreAttackPod_GetOrders(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackPod GetOrders state
--
function Init_Mission07_PreAttackPod_GetOrders(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (DefendMothership[TeamName] ~= 0) then 
	
	--kasFSMCreate("DefendMothership")
	KASRule_AddFSM(TeamName, "Watch_Mission07_DefendMothership", "Watch_Mission07_PreAttackPod_GetOrders")
	Init_Mission07_DefendMothership(TeamName)
	elseif (MothershipSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_PreAttackPod_GetOrders")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	elseif (ResourceSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("GenericResourcerSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericResourcerSwarm", "Watch_Mission07_PreAttackPod_GetOrders")
	Init_Mission07_GenericResourcerSwarm(TeamName)
	elseif (ResourceDefenderSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("ResourceDefenderSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_ResourceDefenderSwarm", "Watch_Mission07_PreAttackPod_GetOrders")
	Init_Mission07_ResourceDefenderSwarm(TeamName)
	elseif (IntroAttack[TeamName] ~= 0) then 
	
	--kasFSMCreate("IntroAttack")
	KASRule_AddFSM(TeamName, "Watch_Mission07_IntroAttack", "Watch_Mission07_PreAttackPod_GetOrders")
	Init_Mission07_IntroAttack(TeamName)
	end 
	
end 


--
--  "watch" code for Mission07 PreAttackPod GetOrders state
--
function Watch_Mission07_PreAttackPod_GetOrders(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	
end 


--
--  "initialize" code for Mission07 PreAttackPod NullState state
--
function Init_Mission07_PreAttackPod_NullState(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	
end 


--
--  "watch" code for Mission07 PreAttackPod NullState state
--
function Watch_Mission07_PreAttackPod_NullState(TeamName)
	--FSM: FSM_Mission07_PreAttackPod
	--TeamName = "FuelPod1WAVE1"
	if (SobGroup_Count(TeamName) ~= 0 and KAS_MessageReceived(TeamName, "P2MothershipBlowin") ~= 0) then     --kasfMsgReceived("P2MothershipBlowin")    --kasfShipsCount((&kasThisTeamPtr->shipList))
	
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm FSM
--
function Init_Mission07_PreAttackSwarm(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	--kasJump("Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_Dock", "Init_Mission07_PreAttackSwarm")
	Init_Mission07_PreAttackSwarm_Dock(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm FSM
--
function Watch_Mission07_PreAttackSwarm(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm Dock state
--
function Init_Mission07_PreAttackSwarm_Dock(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	SobGroup_DockSobGroupInstant(TeamName, "P2Mothership")    --kasfDockInstant(kasAITeamPtr("P2Mothership"))
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm Dock state
--
function Watch_Mission07_PreAttackSwarm_Dock(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	if (KAS_MessageReceived(TeamName, "DefendMothership") ~= 0) then     --kasfMsgReceived("DefendMothership")
	
	DefendMothership[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_WaitToLaunch", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "MothershipSwarm") ~= 0) then     --kasfMsgReceived("MothershipSwarm")
	
	MothershipSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_WaitToLaunch", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "ResourceSwarm") ~= 0) then     --kasfMsgReceived("ResourceSwarm")
	
	ResourceSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_WaitToLaunch", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "ResourceDefenderSwarm") ~= 0) then     --kasfMsgReceived("ResourceDefenderSwarm")
	
	ResourceDefenderSwarm[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_WaitToLaunch", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	return
	elseif (KAS_MessageReceived(TeamName, "IntroAttack") ~= 0) then     --kasfMsgReceived("IntroAttack")
	
	IntroAttack[TeamName] = 1 --created,set
	--kasJump("WaitToLaunch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_WaitToLaunch", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	return
	end 
	if (KAS_MessageReceived(TeamName, "DockNow") ~= 0) then     --kasfMsgReceived("DockNow")
	
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Dock")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_NullState", "Watch_Mission07_PreAttackSwarm_Dock")
	Init_Mission07_PreAttackSwarm_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm WaitToLaunch state
--
function Init_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	KASTimer_Start(WaitToLaunch[TeamName], 5)
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm WaitToLaunch state
--
function Watch_Mission07_PreAttackSwarm_WaitToLaunch(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	if (KASTimer_IsExpiredIfSoDestroy(WaitToLaunch[TeamName]) ~= 0) then 
	
	--kasJump("Launch")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_WaitToLaunch")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_Launch", "Watch_Mission07_PreAttackSwarm_WaitToLaunch")
	Init_Mission07_PreAttackSwarm_Launch(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm Launch state
--
function Init_Mission07_PreAttackSwarm_Launch(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	KAS_Launch(TeamName)    --kasfLaunch()
	KASTimer_Start(GiveToAI[TeamName], 10)
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm Launch state
--
function Watch_Mission07_PreAttackSwarm_Launch(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	if (KAS_MessageReceived(TeamName, "DockNow") ~= 0) then     --kasfMsgReceived("DockNow")
	
	--kasJump("DockAgain")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Launch")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_DockAgain", "Watch_Mission07_PreAttackSwarm_Launch")
	Init_Mission07_PreAttackSwarm_DockAgain(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(GiveToAI[TeamName]) ~= 0) then 
	
	--kasJump("GetOrders")
	--KASRule_Remove("FSM_Mission07_PreAttackSwarm", "Watch_Mission07_PreAttackSwarm_Launch")
	KASRule_Add(TeamName, "Watch_Mission07_PreAttackSwarm_GetOrders", "Watch_Mission07_PreAttackSwarm_Launch")
	Init_Mission07_PreAttackSwarm_GetOrders(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm DockAgain state
--
function Init_Mission07_PreAttackSwarm_DockAgain(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	SobGroup_DockSobGroupAndStayDocked(TeamName, "P2Mothership")    --kasfDockStay(kasAITeamPtr("P2Mothership"))
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm DockAgain state
--
function Watch_Mission07_PreAttackSwarm_DockAgain(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm GetOrders state
--
function Init_Mission07_PreAttackSwarm_GetOrders(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	if (DefendMothership[TeamName] ~= 0) then 
	
	--kasFSMCreate("DefendMothership")
	KASRule_AddFSM(TeamName, "Watch_Mission07_DefendMothership", "Watch_Mission07_PreAttackSwarm_GetOrders")
	Init_Mission07_DefendMothership(TeamName)
	elseif (MothershipSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericMothershipSwarm", "Watch_Mission07_PreAttackSwarm_GetOrders")
	Init_Mission07_GenericMothershipSwarm(TeamName)
	elseif (ResourceSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("GenericResourcerSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_GenericResourcerSwarm", "Watch_Mission07_PreAttackSwarm_GetOrders")
	Init_Mission07_GenericResourcerSwarm(TeamName)
	elseif (ResourceDefenderSwarm[TeamName] ~= 0) then 
	
	--kasFSMCreate("ResourceDefenderSwarm")
	KASRule_AddFSM(TeamName, "Watch_Mission07_ResourceDefenderSwarm", "Watch_Mission07_PreAttackSwarm_GetOrders")
	Init_Mission07_ResourceDefenderSwarm(TeamName)
	elseif (IntroAttack[TeamName] ~= 0) then 
	
	--kasFSMCreate("IntroAttack")
	KASRule_AddFSM(TeamName, "Watch_Mission07_IntroAttack", "Watch_Mission07_PreAttackSwarm_GetOrders")
	Init_Mission07_IntroAttack(TeamName)
	end 
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm GetOrders state
--
function Watch_Mission07_PreAttackSwarm_GetOrders(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	
end 


--
--  "initialize" code for Mission07 PreAttackSwarm NullState state
--
function Init_Mission07_PreAttackSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	
end 


--
--  "watch" code for Mission07 PreAttackSwarm NullState state
--
function Watch_Mission07_PreAttackSwarm_NullState(TeamName)
	--FSM: FSM_Mission07_PreAttackSwarm
	--TeamName = "Swarmer1WAVE1"
	
end 


--
--  "initialize" code for Mission07 Events FSM
--
function Init_Mission07_Events(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	InNullState[TeamName] = 0 --created,set
	Subtitle_ForceEventNotEnded()    --kasfIntelEventNotEnded()
	--kasJump("LocationCard")
	KASRule_Add(TeamName, "Watch_Mission07_Events_LocationCard", "Init_Mission07_Events")
	Init_Mission07_Events_LocationCard(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 Events FSM
--
function Watch_Mission07_Events(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (_VIFONCE010[TeamName] == 0 and (G_HarvestedRUs > 600)) then  -- "ifonce" #10
	
	_VIFONCE010[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "MothershipComeOnIn")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "MothershipComeOnIn")
	InNullState[TeamName] = 0 --set
	--kasJump("UnknownContactsWait")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_UnknownContactsWait", "Watch_Mission07_Events")
	Init_Mission07_Events_UnknownContactsWait(TeamName)
	return
	end 
	if (_VIFONCE011[TeamName] == 0 and (KAS_FindPlayerShipsOfType("GrowSelection_Stuff", "HeavyCruiser", 0) ~= 0)) then  -- "ifonce" #11    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Stuff"), "HeavyCruiser")
	
	_VIFONCE011[TeamName] = 1 --created,set;
	KAS_MessageSend(TeamName, "P2Mothership", "MothershipComeOnIn")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "MothershipComeOnIn")
	InNullState[TeamName] = 0 --set
	--kasJump("UnknownContactsWait")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_UnknownContactsWait", "Watch_Mission07_Events")
	Init_Mission07_Events_UnknownContactsWait(TeamName)
	return
	end 
	if (_VIFONCE012[TeamName] == 0 and ((KAS_GatheredRUs() > 1400))) then  -- "ifonce" #12    --kasfRUsEnemyCollected()
	
	_VIFONCE012[TeamName] = 1 --created,set;
	KASObjective_SetState(ObjectiveID_Harvest, 1)    --kasfObjectiveSet("Harvest", 1)
	end 
	if (_VIFONCE013[TeamName] == 0 and (KAS_MessageReceived(TeamName, "ImTakingTheResourcers") ~= 0)) then  -- "ifonce" #13    --kasfMsgReceived("ImTakingTheResourcers")
	
	_VIFONCE013[TeamName] = 1 --created,set;
	KASTimer_Start(Resourcers[TeamName], RandomIntRange(20, 30))    --kasfRandom(20, 30)
	end 
	if (_VIFONCE014[TeamName] == 0 and (KAS_MessageReceived(TeamName, "MoSwarmersInTrouble") ~= 0)) then  -- "ifonce" #14    --kasfMsgReceived("MoSwarmersInTrouble")
	
	_VIFONCE014[TeamName] = 1 --created,set;
	KASTimer_Start(ResearchTimer[TeamName], 45)
	end 
	if (G_CLICK_Harvest ~= 0) then 
	
	G_CLICK_Harvest = 0 --destroyed
	--kasJump("NebulaRich")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NebulaRich", "Watch_Mission07_Events")
	Init_Mission07_Events_NebulaRich(TeamName)
	return
	elseif (G_CLICK_DefendFleet ~= 0) then 
	
	G_CLICK_DefendFleet = 0 --destroyed
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_DefendMothership", "Watch_Mission07_Events")
	Init_Mission07_Events_DefendMothership(TeamName)
	return
	elseif (G_CLICK_ProtectResourcers ~= 0) then 
	
	G_CLICK_ProtectResourcers = 0 --destroyed
	--kasJump("ProtectResourcers")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_ProtectResourcers", "Watch_Mission07_Events")
	Init_Mission07_Events_ProtectResourcers(TeamName)
	return
	end 
	if (InNullState[TeamName] ~= 0 and InFinalState[TeamName] == 0) then 
	
	if (_VIFONCE015[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(ChargeUpTimer1[TeamName]) ~= 0)) then  -- "ifonce" #15
	
	_VIFONCE015[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("HyperModuleCharging1")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_HyperModuleCharging1", "Watch_Mission07_Events")
	Init_Mission07_Events_HyperModuleCharging1(TeamName)
	return
	end 
	if (_VIFONCE016[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(ChargeUpTimer2[TeamName]) ~= 0)) then  -- "ifonce" #16
	
	_VIFONCE016[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("HyperModuleCharging2")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_HyperModuleCharging2", "Watch_Mission07_Events")
	Init_Mission07_Events_HyperModuleCharging2(TeamName)
	return
	end 
	if (_VIFONCE017[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(ChargeUpTimer3[TeamName]) ~= 0)) then  -- "ifonce" #17
	
	_VIFONCE017[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("LetsGetOutOfHere")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_LetsGetOutOfHere", "Watch_Mission07_Events")
	Init_Mission07_Events_LetsGetOutOfHere(TeamName)
	return
	end 
	if (_VIFONCE018[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(ResearchTimer[TeamName]) ~= 0)) then  -- "ifonce" #18
	
	_VIFONCE018[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("AddedResearch")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_AddedResearch", "Watch_Mission07_Events")
	Init_Mission07_Events_AddedResearch(TeamName)
	return
	end 
	if (_VIFONCE019[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(Resourcers[TeamName]) ~= 0)) then  -- "ifonce" #19
	
	_VIFONCE019[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("ProtectResourcers")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_ProtectResourcers", "Watch_Mission07_Events")
	Init_Mission07_Events_ProtectResourcers(TeamName)
	return
	end 
	if (_VIFONCE020[TeamName] == 0 and (KAS_MessageReceived(TeamName, "P2MothershipBlowin") ~= 0)) then  -- "ifonce" #20    --kasfMsgReceived("P2MothershipBlowin")
	
	_VIFONCE020[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("P2MothershipEscapes")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_P2MothershipEscapes", "Watch_Mission07_Events")
	Init_Mission07_Events_P2MothershipEscapes(TeamName)
	return
	end 
	if (_VIFONCE021[TeamName] == 0 and (P2MothershipIn[TeamName] ~= 0 and KAS_FindPlayerShipsOfType("GrowSelection_Temp", "P2Mothership", 1) == 0)) then  -- "ifonce" #21    --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Temp"), "P2Mothership")
	
	_VIFONCE021[TeamName] = 1 --created,set;
	InNullState[TeamName] = 0 --set
	--kasJump("HyperspaceBack")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events")
	KASRule_Add(TeamName, "Watch_Mission07_Events_HyperspaceBack", "Watch_Mission07_Events")
	Init_Mission07_Events_HyperspaceBack(TeamName)
	return
	end 
	end 
	
end 


--
--  "initialize" code for Mission07 Events LocationCard state
--
function Init_Mission07_Events_LocationCard(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KASTimer_Start(LocationCardTimer[TeamName], 2)
	
end 


--
--  "watch" code for Mission07 Events LocationCard state
--
function Watch_Mission07_Events_LocationCard(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (KASTimer_IsExpiredIfSoDestroy(LocationCardTimer[TeamName]) ~= 0) then 
	
	singlePlayerLocationCard("$61350", 5)    --kasfLocationCard(5000, LSTRING_LCLocationCard[strCurLanguage])
	--kasJump("Wait1")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_LocationCard")
	KASRule_Add(TeamName, "Watch_Mission07_Events_Wait1", "Watch_Mission07_Events_LocationCard")
	Init_Mission07_Events_Wait1(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events Wait1 state
--
function Init_Mission07_Events_Wait1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KASTimer_Start(Launching[TeamName], 8)
	
end 


--
--  "watch" code for Mission07 Events Wait1 state
--
function Watch_Mission07_Events_Wait1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (KASTimer_IsExpiredIfSoDestroy(Launching[TeamName]) ~= 0) then 
	
	--kasJump("NebulaRich")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_Wait1")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NebulaRich", "Watch_Mission07_Events_Wait1")
	Init_Mission07_Events_NebulaRich(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events NebulaRich state
--
function Init_Mission07_Events_NebulaRich(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60540", 3)    --kasfSpeechEvent((540 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_Harvest, "$61367", OT_Primary)    --kasfObjectiveCreate("Harvest", LSTRING_OBHarvestNebula[strCurLanguage], "fleet intel 3.2")
	Objective_SetDescription(ObjectiveID_Harvest, "$60826")
	--kasJump("NullState")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Init_Mission07_Events_NebulaRich")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 Events NebulaRich state
--
function Watch_Mission07_Events_NebulaRich(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	
end 


--
--  "initialize" code for Mission07 Events UnknownContactsWait state
--
function Init_Mission07_Events_UnknownContactsWait(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KASTimer_Start(ScaryUFOGuys[TeamName], RandomIntRange(20, 28))    --kasfRandom(20, 28)
	
end 


--
--  "watch" code for Mission07 Events UnknownContactsWait state
--
function Watch_Mission07_Events_UnknownContactsWait(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (KASTimer_IsExpiredIfSoDestroy(ScaryUFOGuys[TeamName]) ~= 0) then 
	
	MothershipIn[TeamName] = 1 --created,set
	--kasJump("LBXIn1")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_UnknownContactsWait")
	KASRule_Add(TeamName, "Watch_Mission07_Events_LBXIn1", "Watch_Mission07_Events_UnknownContactsWait")
	Init_Mission07_Events_LBXIn1(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events LBXIn1 state
--
function Init_Mission07_Events_LBXIn1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KAS_SetLetterboxState(2, 1)    --kasfWideScreenIn(30)
	KASTimer_Start(LBXTimer[TeamName], 4)
	
end 


--
--  "watch" code for Mission07 Events LBXIn1 state
--
function Watch_Mission07_Events_LBXIn1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if ((KASTimer_GetRemaining(LBXTimer[TeamName]) == 0)) then 
	
	KAS_SensorsToggle(1, 80000)    --kasfOpenSensors(80000)
	--kasJump("UnknownContacts")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_LBXIn1")
	KASRule_Add(TeamName, "Watch_Mission07_Events_UnknownContacts", "Watch_Mission07_Events_LBXIn1")
	Init_Mission07_Events_UnknownContacts(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events UnknownContacts state
--
function Init_Mission07_Events_UnknownContacts(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60541", 3)    --kasfSpeechEvent((541 + 4096 + 268435456), 0)
	PointerID_Contacts = KASPointer_AddSobGroup("P2Mothership")    --kasfTutSetPointerTargetShipSelection("Contacts", kasAITeamShipsPtr("P2Mothership"))
	KAS_PingAddShips("P2Mothership", "UnknownContacts", "$60543")    --kasfPingAddShips(kasAITeamShipsPtr("P2Mothership"), "UnknownContacts")
	
end 


--
--  "watch" code for Mission07 Events UnknownContacts state
--
function Watch_Mission07_Events_UnknownContacts(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KASPointer_RemoveAll()    --kasfTutRemoveAllPointers()
	KAS_SensorsToggle(0, 1)    --kasfCloseSensors(1)
	KAS_SetLetterboxState(0, 3)    --kasfWideScreenOut(90)
	--kasJump("PreparingAmbassador")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_UnknownContacts")
	KASRule_Add(TeamName, "Watch_Mission07_Events_PreparingAmbassador", "Watch_Mission07_Events_UnknownContacts")
	Init_Mission07_Events_PreparingAmbassador(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events PreparingAmbassador state
--
function Init_Mission07_Events_PreparingAmbassador(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60542", 3)    --kasfSpeechEvent((542 + 4096 + 268435456), 0)
	
end 


--
--  "watch" code for Mission07 Events PreparingAmbassador state
--
function Watch_Mission07_Events_PreparingAmbassador(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KASTimer_Start(Ambassador[TeamName], 5)
	KASTimer_Start(LBX[TeamName], 2)
	end 
	if (KASTimer_IsExpiredIfSoDestroy(LBX[TeamName]) ~= 0) then 
	
	KAS_SetLetterboxState(2, 3)    --kasfWideScreenIn(90)
	end 
	if (KASTimer_IsExpiredIfSoDestroy(Ambassador[TeamName]) ~= 0) then 
	
	--kasJump("P2IntroNIS")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_PreparingAmbassador")
	KASRule_Add(TeamName, "Watch_Mission07_Events_P2IntroNIS", "Watch_Mission07_Events_PreparingAmbassador")
	Init_Mission07_Events_P2IntroNIS(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events P2IntroNIS state
--
function Init_Mission07_Events_P2IntroNIS(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KAS_FindPlayerShipsOfType("GrowSelection_NISTargetShips", "Mothership", 0)    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("NISTargetShips"), "Mothership")
	KAS_PingRemove("UnknownContacts", "$60543")    --kasfPingRemove("UnknownContacts")
	G_PlayNis = 5 --created,set
	G_PlayingNIS = 1 --created,set
	
end 


--
--  "watch" code for Mission07 Events P2IntroNIS state
--
function Watch_Mission07_Events_P2IntroNIS(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (G_Nis5Complete ~= 0) then 
	
	G_PlayingNIS = 0 --set
	KAS_SetLetterboxState(0, 3)    --kasfWideScreenOut(90)
	--kasJump("DefendMothership")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_P2IntroNIS")
	KASRule_Add(TeamName, "Watch_Mission07_Events_DefendMothership", "Watch_Mission07_Events_P2IntroNIS")
	Init_Mission07_Events_DefendMothership(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events DefendMothership state
--
function Init_Mission07_Events_DefendMothership(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	KAS_MusicPlayType("data:sound/music/battle/B03_Swarmers", MUS_Ambient)    --kasfMusicPlay(14)
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60550", 3)    --kasfSpeechEvent((550 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_DefendFleet, "$61366", OT_Primary)    --kasfObjectiveCreate("DefendFleet", LSTRING_OBDefendFleet[strCurLanguage], "fleet intel 3.2")
	Objective_SetDescription(ObjectiveID_DefendFleet, "$60825")
	KASTimer_Start(ChargeUpTimer1[TeamName], 30)
	
end 


--
--  "watch" code for Mission07 Events DefendMothership state
--
function Watch_Mission07_Events_DefendMothership(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_DefendMothership")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_DefendMothership")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events HyperModuleCharging1 state
--
function Init_Mission07_Events_HyperModuleCharging1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetCommand, "$60788", 3)    --kasfSpeechEvent((788 + 2048 + 268435456), 0)
	KASTimer_Start(ChargeUpTimer2[TeamName], 420)
	
end 


--
--  "watch" code for Mission07 Events HyperModuleCharging1 state
--
function Watch_Mission07_Events_HyperModuleCharging1(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_HyperModuleCharging1")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_HyperModuleCharging1")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events HyperModuleCharging2 state
--
function Init_Mission07_Events_HyperModuleCharging2(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetCommand, "$60789", 3)    --kasfSpeechEvent((789 + 2048 + 268435456), 0)
	KASTimer_Start(ChargeUpTimer3[TeamName], 60)
	KASTimer_Start(ResearchTimer[TeamName], RandomIntRange(10, 20))
	
end 


--
--  "watch" code for Mission07 Events HyperModuleCharging2 state
--
function Watch_Mission07_Events_HyperModuleCharging2(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_HyperModuleCharging2")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_HyperModuleCharging2")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events LetsGetOutOfHere state
--
function Init_Mission07_Events_LetsGetOutOfHere(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetCommand, "$60553", 3)    --kasfSpeechEvent((553 + 2048 + 268435456), 0)
	KAS_MessageSend(TeamName, "P2Mothership", "PlayerPoweredUp")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "PlayerPoweredUp")
	
end 


--
--  "watch" code for Mission07 Events LetsGetOutOfHere state
--
function Watch_Mission07_Events_LetsGetOutOfHere(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("Engage")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_LetsGetOutOfHere")
	KASRule_Add(TeamName, "Watch_Mission07_Events_Engage", "Watch_Mission07_Events_LetsGetOutOfHere")
	Init_Mission07_Events_Engage(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events Engage state
--
function Init_Mission07_Events_Engage(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60554", 3)    --kasfSpeechEvent((554 + 4096 + 268435456), 0)
	KAS_DisablePlayerHyperspace()    --kasfDisablePlayerHyperspace()
	KASObjective_SetState(ObjectiveID_DefendFleet, 1)    --kasfObjectiveSet("DefendFleet", 1)
	KASObjective_Add(ObjectiveID_Hyperspace, "Hyperspace", OT_Primary)    --kasfObjectiveCreate("Hyperspace", LSTRING_TBHyperspace[strCurLanguage], LSTRING_FIEngage[strCurLanguage])
	Objective_SetDescription(ObjectiveID_Hyperspace, "hyperspace")
	
end 


--
--  "watch" code for Mission07 Events Engage state
--
function Watch_Mission07_Events_Engage(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (KAS_GameMessageReceived({"Game_HyperspaceFailed"}) == 1) then     --kasfTutGameSentMessage("Game_HyperspaceFailed")
	
	--kasJump("HyperdriveFail")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_Engage")
	KASRule_Add(TeamName, "Watch_Mission07_Events_HyperdriveFail", "Watch_Mission07_Events_Engage")
	Init_Mission07_Events_HyperdriveFail(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events HyperdriveFail state
--
function Init_Mission07_Events_HyperdriveFail(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetCommand, "$60790", 3)    --kasfSpeechEvent((790 + 2048 + 268435456), 0)
	
end 


--
--  "watch" code for Mission07 Events HyperdriveFail state
--
function Watch_Mission07_Events_HyperdriveFail(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	KAS_MessageSend(TeamName, "P2Mothership", "TheyreGettingAway")    --kasfMsgSend(kasAITeamPtr("P2Mothership"), "TheyreGettingAway")
	--kasJump("ContinueProtecting")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_HyperdriveFail")
	KASRule_Add(TeamName, "Watch_Mission07_Events_ContinueProtecting", "Watch_Mission07_Events_HyperdriveFail")
	Init_Mission07_Events_ContinueProtecting(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events ContinueProtecting state
--
function Init_Mission07_Events_ContinueProtecting(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60767", 3)    --kasfSpeechEvent((767 + 4096 + 268435456), 0)
	KASObjective_Destroy(ObjectiveID_DefendFleet)    --kasfObjectiveDestroy("DefendFleet")
	KASObjective_Destroy(ObjectiveID_Hyperspace)    --kasfObjectiveDestroy("Hyperspace")
	KASObjective_Add(ObjectiveID_DefendFleet, "$61366", OT_Primary)    --kasfObjectiveCreate("DefendFleet", LSTRING_OBDefendFleet[strCurLanguage], "fleet intel 3.2")
	Objective_SetDescription(ObjectiveID_DefendFleet, "$60825")
	KASTimer_Start(ResearchTimer[TeamName], 45)
	
    if (KAS_FindPlayerShipsOfType("GrowSelection_Temp", "P2Mothership", 1) == 0) then 
    
        print("P2 mothership already gone.  Ready to hyperspace in a bit.")
	    MothershipAlreadyGone[TeamName] = 1 --created,set

        KASTimer_Start(104, 10)
    end 
end 


--
--  "watch" code for Mission07 Events ContinueProtecting state
--
function Watch_Mission07_Events_ContinueProtecting(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
    if (MothershipAlreadyGone[TeamName] ~= 0) then 
    
        if (KASTimer_IsExpiredIfSoDestroy(104) ~= 0) then 
        
            print("P2 mothership already gone.  Ready to hyperspace now.")
	        InNullState[TeamName] = 0 --created,set
	        --kasJump("HyperspaceBack")
	        --KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_ContinueProtecting")
	        KASRule_Add(TeamName, "Watch_Mission07_Events_HyperspaceBack", "Watch_Mission07_Events_ContinueProtecting")
	        Init_Mission07_Events_HyperspaceBack(TeamName)
        end 
    else
    
	    --kasJump("NullState")
	    --KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_ContinueProtecting")
	    KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_ContinueProtecting")
	    Init_Mission07_Events_NullState(TeamName)
    end 
	return
	
end 


--
--  "initialize" code for Mission07 Events AddedResearch state
--
function Init_Mission07_Events_AddedResearch(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60770", 3)    --kasfSpeechEvent((770 + 4096 + 268435456), 0)
	KAS_UnrestrictResearchOption(0, "FastTrackingTurrets")    --kasfAllowPlayerToResearch("TargetingSystems")
	
end 


--
--  "watch" code for Mission07 Events AddedResearch state
--
function Watch_Mission07_Events_AddedResearch(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_AddedResearch")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_AddedResearch")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events ProtectResourcers state
--
function Init_Mission07_Events_ProtectResourcers(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60557", 3)    --kasfSpeechEvent((557 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_ProtectResourcers, "$61368", OT_Secondary)    --kasfObjectiveCreateSecondary("ProtectResourcers", LSTRING_OBProtect[strCurLanguage], LSTRING_FIProtectResources[strCurLanguage])
	Objective_SetDescription(ObjectiveID_ProtectResourcers, "$60827")
	
end 


--
--  "watch" code for Mission07 Events ProtectResourcers state
--
function Watch_Mission07_Events_ProtectResourcers(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_ProtectResourcers")
	KASRule_Add(TeamName, "Watch_Mission07_Events_NullState", "Watch_Mission07_Events_ProtectResourcers")
	Init_Mission07_Events_NullState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events P2MothershipEscapes state
--
function Init_Mission07_Events_P2MothershipEscapes(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_FocusShips("P2Mothership")    --kasfTutCameraFocus(kasAITeamShipsPtr("P2Mothership"))
	KAS_FocusShips("P2Mothership")    --kasfTutCameraFocus(kasAITeamShipsPtr("P2Mothership"))
	KAS_MusicStop(4)    --kasfMusicStop(4)
	KASTimer_Start(P2EscapeTimer[TeamName], 20)
	KASTimer_Start(CancelFocus[TeamName], 14)
	
end 


--
--  "watch" code for Mission07 Events P2MothershipEscapes state
--
function Watch_Mission07_Events_P2MothershipEscapes(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (KAS_GameMessageReceived({"Game_BandBoxFocus", "Game_ClickFocus", "KB_CancelFocus", "KB_Focus"}) ~= 0) then     --kasfTutGameSentMessage("Game_BandBoxFocus,Game_ClickFocus,KB_CancelFocus,KB_Focus")
	
	KASTimer_End(CancelFocus[TeamName])
	end 
	if (KASTimer_IsExpiredIfSoDestroy(CancelFocus[TeamName]) ~= 0) then 
	
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_FocusCancel()    --kasfTutCameraFocusCancel()
	KAS_FocusCancel()    --kasfTutCameraFocusCancel()
	end 
	if (KASTimer_IsExpiredIfSoDestroy(P2EscapeTimer[TeamName]) ~= 0) then 
	
	P2MothershipIn[TeamName] = 0 --set
	--kasJump("HyperspaceBack")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_P2MothershipEscapes")
	KASRule_Add(TeamName, "Watch_Mission07_Events_HyperspaceBack", "Watch_Mission07_Events_P2MothershipEscapes")
	Init_Mission07_Events_HyperspaceBack(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events HyperspaceBack state
--
function Init_Mission07_Events_HyperspaceBack(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60768", 3)    --kasfSpeechEvent((768 + 4096 + 268435456), 0)
	KASObjective_Add(ObjectiveID_Hyperspace, "Hyperspace", OT_Primary)    --kasfObjectiveCreate("Hyperspace", LSTRING_TBHyperspace[strCurLanguage], LSTRING_FIEngage[strCurLanguage])
	Objective_SetDescription(ObjectiveID_Hyperspace, "hyperspace")
	KASObjective_SetState(ObjectiveID_DefendFleet, 1)    --kasfObjectiveSet("DefendFleet", 1)
	
end 


--
--  "watch" code for Mission07 Events HyperspaceBack state
--
function Watch_Mission07_Events_HyperspaceBack(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	if (Subtitle_IsDoneOrSkipped(Actor_FleetIntel) ~= 0) then     --kasfIntelEventEnded()
	
	--kasJump("JumpAway")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_HyperspaceBack")
	KASRule_Add(TeamName, "Watch_Mission07_Events_JumpAway", "Watch_Mission07_Events_HyperspaceBack")
	Init_Mission07_Events_JumpAway(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 Events JumpAway state
--
function Init_Mission07_Events_JumpAway(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	ignoredFunction()    --kasfSoundEvent(262)
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60769", 3)    --kasfSpeechEvent((769 + 4096 + 268435456), 0)
	
end 


--
--  "watch" code for Mission07 Events JumpAway state
--
function Watch_Mission07_Events_JumpAway(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	--kasJump("FinalState")
	--KASRule_Remove("FSM_Mission07_Events", "Watch_Mission07_Events_JumpAway")
	KASRule_Add(TeamName, "Watch_Mission07_Events_FinalState", "Watch_Mission07_Events_JumpAway")
	Init_Mission07_Events_FinalState(TeamName)
	return
	
end 


--
--  "initialize" code for Mission07 Events NullState state
--
function Init_Mission07_Events_NullState(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	InNullState[TeamName] = 1 --created,set
	
end 


--
--  "watch" code for Mission07 Events NullState state
--
function Watch_Mission07_Events_NullState(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	
end 


--
--  "initialize" code for Mission07 Events FinalState state
--
function Init_Mission07_Events_FinalState(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	InFinalState[TeamName] = 1 --created,set
	
end 


--
--  "watch" code for Mission07 Events FinalState state
--
function Watch_Mission07_Events_FinalState(TeamName)
	--FSM: FSM_Mission07_Events
	--TeamName = "Dummy1"
	
end 


--
--  "initialize" code for Mission07 P2Mothership FSM
--
function Init_Mission07_P2Mothership(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	WaveNum[TeamName] = 0 --created,set
	--kasJump("Wait")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_Wait", "Init_Mission07_P2Mothership")
	Init_Mission07_P2Mothership_Wait(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 P2Mothership FSM
--
function Watch_Mission07_P2Mothership(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (G_MothershipDead == 0) then 
	
	if (_VIFONCE022[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "Vol2", 700) ~= 0)) then  -- "ifonce" #22    --kasfNearby(kasVectorPtr("Vol2"), 2000)
	
	_VIFONCE022[TeamName] = 1 --created,set;
	MovingToVol2[TeamName] = 0 --set
	MovingToVol1[TeamName] = 1 --created,set
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol1"))    --kasfMoveTo(kasVectorPtr("Vol1"))
	end 
	if (_VIFONCE023[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "Vol1", 700) ~= 0)) then  -- "ifonce" #23    --kasfNearby(kasVectorPtr("Vol1"), 2000)
	
	_VIFONCE023[TeamName] = 1 --created,set;
	MovingToVol1[TeamName] = 0 --set
	MovingToVol3[TeamName] = 1 --created,set
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol3"))    --kasfMoveTo(kasVectorPtr("Vol3"))
	end 
	if (_VIFONCE024[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "Vol3", 700) ~= 0)) then  -- "ifonce" #24    --kasfNearby(kasVectorPtr("Vol3"), 2000)
	
	_VIFONCE024[TeamName] = 1 --created,set;
	MovingToVol2[TeamName] = 0 --set
	AttackingMothership[TeamName] = 1 --created,set
	KAS_AttackPlayerMothership(TeamName)    --kasfAttackMothership()
	end 
	if (_VIFONCE025[TeamName] == 0 and ((WaveNum[TeamName] == 6) and FinalAssaultGone[TeamName] ~= 0)) then  -- "ifonce" #25
	
	_VIFONCE025[TeamName] = 1 --created,set;
	KASTimer_Start(ImDryImOuttaHere[TeamName], RandomIntRange(60, 90))    --kasfRandom(60, 90)
	end 
	if (_VIFONCE026[TeamName] == 0 and (KASTimer_IsExpiredIfSoDestroy(ImDryImOuttaHere[TeamName]) ~= 0)) then  -- "ifonce" #26
	
	_VIFONCE026[TeamName] = 1 --created,set;
	--kasJump("GetOuttaHere")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_GetOuttaHere", "Watch_Mission07_P2Mothership")
	Init_Mission07_P2Mothership_GetOuttaHere(TeamName)
	return
	end 
	if (DodgingOrOuttaHere[TeamName] == 0 and KAS_TeamHealthLowest(TeamName) <= 45) then     --kasfTeamHealthLowest()
	
	if (AttackingMothership[TeamName] ~= 0) then 
	
	--kasJump("GetOuttaHere")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_GetOuttaHere", "Watch_Mission07_P2Mothership")
	Init_Mission07_P2Mothership_GetOuttaHere(TeamName)
	return
	else
	
	--kasJump("HyperDodge")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_HyperDodge", "Watch_Mission07_P2Mothership")
	Init_Mission07_P2Mothership_HyperDodge(TeamName)
	return
	end 
	end 
	end 
	if (_VIFONCE027[TeamName] == 0 and (SobGroup_Count(TeamName) == 0)) then  -- "ifonce" #27    --kasfTeamCount()
	
	_VIFONCE027[TeamName] = 1 --created,set;
	KAS_FindPlayerShipsOfType("GrowSelection_YourDeadNow", "Mothership", 0)    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("YourDeadNow"), "Mothership")
	KAS_KamikazeEveryone("GrowSelection_YourDeadNow")    --kasfKamikazeEveryone(kasGrowSelectionPtr("YourDeadNow"))
	G_MothershipDead = 1 --created,set
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_NullState", "Watch_Mission07_P2Mothership")
	Init_Mission07_P2Mothership_NullState(TeamName)
	return
	end 
	if (KAS_TeamHealthLowest(TeamName) < 10) then     --kasfTeamHealthLowest()
	
	SobGroup_SetHealth(TeamName, 15 / 100)    --kasfTeamSetPercentDamaged(15)
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership Wait state
--
function Init_Mission07_P2Mothership_Wait(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	KASTimer_Start(WaitForDocking[TeamName], 2)
	
end 


--
--  "watch" code for Mission07 P2Mothership Wait state
--
function Watch_Mission07_P2Mothership_Wait(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(WaitForDocking[TeamName]) ~= 0) then 
	
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	end 
	if (KAS_MessageReceived(TeamName, "MothershipComeOnIn") ~= 0) then     --kasfMsgReceived("MothershipComeOnIn")
	
	--kasJump("Reappear")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_Wait")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_Reappear", "Watch_Mission07_P2Mothership_Wait")
	Init_Mission07_P2Mothership_Reappear(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership Reappear state
--
function Init_Mission07_P2Mothership_Reappear(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	KAS_TeamHyperspaceIn(TeamName, "MothershipIn")    --kasfTeamHyperspaceIn(kasVectorPtr("MothershipIn"))
	
end 


--
--  "watch" code for Mission07 P2Mothership Reappear state
--
function Watch_Mission07_P2Mothership_Reappear(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (_VIFONCE028[TeamName] == 0 and (SobGroup_IsShipNearPoint(TeamName, "MothershipIn", 700) ~= 0)) then  -- "ifonce" #28    --kasfNearby(kasVectorPtr("MothershipIn"), 2000)
	
	_VIFONCE028[TeamName] = 1 --created,set;
	KAS_AttackPlayerMothership(TeamName)    --kasfAttackMothership()
	end 
	if (_VIFONCE029[TeamName] == 0 and (G_PlayingNIS ~= 0)) then  -- "ifonce" #29
	
	_VIFONCE029[TeamName] = 1 --created,set;
	SobGroup_Stop(SobGroup_GetPlayerOwner(TeamName), TeamName)    --kasfStop()
	KAS_SetHidden("P2Mothership", 1)    --kasfHideShips(kasAITeamShipsPtr("P2Mothership"))
	end 
	if (G_Nis5Complete ~= 0) then 
	
	KAS_SetHidden("P2Mothership", 0)    --kasfUnhideShips(kasAITeamShipsPtr("P2Mothership"))
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol2"))    --kasfMoveTo(kasVectorPtr("Vol2"))
	MovingToVol2[TeamName] = 1 --created,set
	--kasJump("InitialAttack")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_Reappear")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_InitialAttack", "Watch_Mission07_P2Mothership_Reappear")
	Init_Mission07_P2Mothership_InitialAttack(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership InitialAttack state
--
function Init_Mission07_P2Mothership_InitialAttack(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	--kasFSMCreate("GenericMothershipSwarm")
	KASRule_AddFSM("NISTeam1", "Watch_Mission07_GenericMothershipSwarm", "Init_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_GenericMothershipSwarm("NISTeam1")
	KAS_FindPlayerShipsOfType("GrowSelection_Test", "ResourceCollector", 0)    --kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Test"), "ResourceCollector")
	KAS_FindEnemiesNearby("GrowSelection_Test", 2100)    --kasfFindEnemiesNearby(kasGrowSelectionPtr("Test"), 6000)
	if (KAS_ShipsSelectSpecial("GrowSelection_Armed", "GrowSelection_Test", 3) > 5) then     --kasfShipsSelectSpecial(kasGrowSelectionPtr("Armed"), kasGrowSelectionPtr("Test"), 3)
	
	--kasFSMCreate("ResourceDefenderSwarm")
	KASRule_AddFSM("NISTeam2", "Watch_Mission07_ResourceDefenderSwarm", "Init_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_ResourceDefenderSwarm("NISTeam2")
	KASTimer_Start(ResourcerSwarm[TeamName], RandomIntRange(50, 70))    --kasfRandom(50, 70)
	else
	
	--kasFSMCreate("GenericResourcerSwarm")
	KASRule_AddFSM("NISTeam2", "Watch_Mission07_GenericResourcerSwarm", "Init_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_GenericResourcerSwarm("NISTeam2")
	KASTimer_Start(ResourceDefenderSwarm[TeamName], RandomIntRange(50, 70))    --kasfRandom(50, 70)
	end 
	
end 


--
--  "watch" code for Mission07 P2Mothership InitialAttack state
--
function Watch_Mission07_P2Mothership_InitialAttack(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(ResourcerSwarm[TeamName]) ~= 0) then 
	
	--kasFSMCreate("GenericResourcerSwarm")
	KASRule_AddFSM("NISTeam3", "Watch_Mission07_GenericResourcerSwarm", "Watch_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_GenericResourcerSwarm("NISTeam3")
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_InitialAttack")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(ResourceDefenderSwarm[TeamName]) ~= 0) then 
	
	--kasFSMCreate("ResourceDefenderSwarm")
	KASRule_AddFSM("NISTeam3", "Watch_Mission07_ResourceDefenderSwarm", "Watch_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_ResourceDefenderSwarm("NISTeam3")
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_InitialAttack")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_InitialAttack")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership ReissueMove state
--
function Init_Mission07_P2Mothership_ReissueMove(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (MovingToVol2[TeamName] ~= 0) then 
	
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol2"))    --kasfMoveTo(kasVectorPtr("Vol2"))
	elseif (MovingToVol1[TeamName] ~= 0) then 
	
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol1"))    --kasfMoveTo(kasVectorPtr("Vol1"))
	elseif (MovingToVol3[TeamName] ~= 0) then 
	
	SobGroup_MoveToPoint(SobGroup_GetPlayerOwner(TeamName), TeamName, Volume_GetPosition("Vol3"))    --kasfMoveTo(kasVectorPtr("Vol3"))
	elseif (AttackingMothership[TeamName] ~= 0) then 
	
	KAS_AttackPlayerMothership(TeamName)    --kasfAttackMothership()
	end 
	--kasJump("MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Init_Mission07_P2Mothership_ReissueMove")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	
end 


--
--  "watch" code for Mission07 P2Mothership ReissueMove state
--
function Watch_Mission07_P2Mothership_ReissueMove(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	
end 


--
--  "initialize" code for Mission07 P2Mothership HyperDodge state
--
function Init_Mission07_P2Mothership_HyperDodge(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	DodgingOrOuttaHere[TeamName] = 1 --created,set
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	KASTimer_Start(HyperspaceTimer[TeamName], 15)
	
end 


--
--  "watch" code for Mission07 P2Mothership HyperDodge state
--
function Watch_Mission07_P2Mothership_HyperDodge(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(HyperspaceTimer[TeamName]) ~= 0) then 
	
	--kasJump("HypeDodgeIn")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_HyperDodge")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_HypeDodgeIn", "Watch_Mission07_P2Mothership_HyperDodge")
	Init_Mission07_P2Mothership_HypeDodgeIn(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership HypeDodgeIn state
--
function Init_Mission07_P2Mothership_HypeDodgeIn(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	SobGroup_SetHealth(TeamName, 100 / 100)    --kasfTeamSetPercentDamaged(100)
	if (MovingToVol2[TeamName] ~= 0) then 
	
	KAS_TeamHyperspaceIn(TeamName, "Vol2")    --kasfTeamHyperspaceIn(kasVectorPtr("Vol2"))
	elseif (MovingToVol1[TeamName] ~= 0) then 
	
	KAS_TeamHyperspaceIn(TeamName, "Vol1")    --kasfTeamHyperspaceIn(kasVectorPtr("Vol1"))
	elseif (MovingToVol3[TeamName] ~= 0) then 
	
	KAS_TeamHyperspaceIn(TeamName, "Vol3")    --kasfTeamHyperspaceIn(kasVectorPtr("Vol3"))
	else
	
	KAS_TeamHyperspaceIn(TeamName, "Vol2")    --kasfTeamHyperspaceIn(kasVectorPtr("Vol2"))
	end 
	
end 


--
--  "watch" code for Mission07 P2Mothership HypeDodgeIn state
--
function Watch_Mission07_P2Mothership_HypeDodgeIn(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (SobGroup_IsShipNearPoint(TeamName, KAS_NamedCentrePosition(TeamName), 3500) ~= 0) then     --kasfNearby(kasThisTeamsVectorPtr(), 10000)
	
	DodgingOrOuttaHere[TeamName] = 0 --destroyed
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_HypeDodgeIn")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_HypeDodgeIn")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership MidBattle state
--
function Init_Mission07_P2Mothership_MidBattle(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	--___KAS_SCOPED_VAR____NumSwarmers_ --created
	--___KAS_SCOPED_VAR____NumPods_ --created
	KASTimer_Start(DownTime[TeamName], RandomIntRange(80, 100))    --kasfRandom(80, 100)
	
end 


--
--  "watch" code for Mission07 P2Mothership MidBattle state
--
function Watch_Mission07_P2Mothership_MidBattle(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (_VIFONCE030[TeamName] == 0 and (KAS_MessageReceived(TeamName, "PlayerPoweredUp") ~= 0)) then  -- "ifonce" #30    --kasfMsgReceived("PlayerPoweredUp")
	
	_VIFONCE030[TeamName] = 1 --created,set;
	--kasJump("EndBattleDelay")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_EndBattleDelay", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_EndBattleDelay(TeamName)
	return
	end 
	if (KAS_UnderAttack(TeamName, "GrowSelection_Attacking") ~= 0 and (SobGroup_Count("GrowSelection_DefendMothership") < RandomIntRange(4, 8))) then     --kasfRandom(4, 8)    --kasfShipsCount(kasGrowSelectionPtr("DefendMothership"))    --kasfUnderAttack(kasGrowSelectionPtr("Attacking"))
	
	--kasJump("DefendSelf")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_DefendSelf", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_DefendSelf(TeamName)
	return
	end 
	if (SobGroup_FilterExclude("GrowSelection_Move", TeamName, "CurrentCommand", "COMMAND_Idle") == 0) then     --kasfShipsSelectMoving(kasGrowSelectionPtr("Move"), (&kasThisTeamPtr->shipList))
	
	--kasJump("ReissueMove")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_ReissueMove", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_ReissueMove(TeamName)
	return
	end 
	if (KASTimer_IsExpiredIfSoDestroy(PodTest[TeamName]) ~= 0) then 
	
	KASTimer_Set(DownTime[TeamName], 0)
	end 
	if (KASTimer_IsExpired(DownTime[TeamName]) == 0 and KAS_FindPlayerShipsOfType("GrowSelection_Pods", "FuelPod", 1) == 0 and KASTimer_GetRemaining(PodTest[TeamName]) == 0) then     --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Pods"), "P2FuelPod")
	
	KASTimer_Start(PodTest[TeamName], 8)
	end 
	if (KASTimer_IsExpired(DownTime[TeamName]) ~= 0) then 
	
	if (KAS_MessageReceived(TeamName, "ResSwarmersInTrouble") ~= 0) then     --kasfMsgReceived("ResSwarmersInTrouble")
	
	ResSwarmers[TeamName] = 1 --created,set
	--kasJump("SecondAttack")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_SecondAttack", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_SecondAttack(TeamName)
	return
	end 
	if (KAS_MessageReceived(TeamName, "ResDefSwarmersInTrouble") ~= 0) then     --kasfMsgReceived("ResDefSwarmersInTrouble")
	
	ResSwarmers[TeamName] = 1 --created,set
	--kasJump("SecondAttack")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_SecondAttack", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_SecondAttack(TeamName)
	return
	end 
	NumSwarmers[TeamName] = KAS_FindPlayerShipsOfType("GrowSelection_Swarmers", "Swarmer", 1) --set    --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Swarmers"), "P2Swarmer")
	NumPods[TeamName] = KAS_FindPlayerShipsOfType("GrowSelection_Pods", "FuelPod", 1) --set    --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Pods"), "P2FuelPod")
	if ((NumPods[TeamName] < 2) or (NumSwarmers[TeamName] < 10)) then 
	
	ResSwarmers[TeamName] = 1 --created,set
	--kasJump("SecondAttack")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_SecondAttack", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_SecondAttack(TeamName)
	return
	end 
	if ((WaveNum[TeamName] ~= 2) and (WaveNum[TeamName] ~= 4)) then 
	
	if (KAS_MessageReceived(TeamName, "MoSwarmersInTrouble") ~= 0) then     --kasfMsgReceived("MoSwarmersInTrouble")
	
	MoSwarmers[TeamName] = 1 --created,set
	--kasJump("SecondAttack")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_MidBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_SecondAttack", "Watch_Mission07_P2Mothership_MidBattle")
	Init_Mission07_P2Mothership_SecondAttack(TeamName)
	return
	end 
	end 
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership SecondAttack state
--
function Init_Mission07_P2Mothership_SecondAttack(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (WaveNum[TeamName] == 1) then 
	
	if (ResSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer1WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "ResourceSwarm")
	elseif (ResDefSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "ResourceDefenderSwarm")
	KAS_MessageSend(TeamName, "Swarmer1WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "ResourceDefenderSwarm")
	elseif (MoSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer1WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "MothershipSwarm")
	else
	
	print("No One To Send To")    --kasfCommandMessage("No One To Send To")
	end 
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 2) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE2", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE2"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer1WAVE2A", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2A"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer1WAVE2B", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2B"), "ResourceSwarm")
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 3) then 
	
	if (MoSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "MothershipSwarm")
	elseif (ResDefSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "ResourceDefenderSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "ResourceDefenderSwarm")
	elseif (ResSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "ResourceSwarm")
	end 
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 4) then 
	
	if (MoSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE2", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2A", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2B", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "MothershipSwarm")
	elseif (ResDefSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE2", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "ResourceDefenderSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2A", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "ResourceDefenderSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2B", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "ResourceDefenderSwarm")
	elseif (ResSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE2", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2A", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2B", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "ResourceSwarm")
	end 
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 5) then 
	
	if (MoSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod3WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer3WAVE1", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "MothershipSwarm")
	elseif (ResDefSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod3WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "ResourceDefenderSwarm")
	KAS_MessageSend(TeamName, "Swarmer3WAVE1", "ResourceDefenderSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "ResourceDefenderSwarm")
	elseif (ResSwarmers[TeamName] ~= 0) then 
	
	KAS_MessageSend(TeamName, "FuelPod3WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "ResourceSwarm")
	KAS_MessageSend(TeamName, "Swarmer3WAVE1", "ResourceSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "ResourceSwarm")
	end 
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	end 
	KASTimer_Start(AttackTimer[TeamName], RandomIntRange(50, 90))    --kasfRandom(50, 90)
	
end 


--
--  "watch" code for Mission07 P2Mothership SecondAttack state
--
function Watch_Mission07_P2Mothership_SecondAttack(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(AttackTimer[TeamName]) ~= 0) then 
	
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_SecondAttack")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_SecondAttack")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership DefendSelf state
--
function Init_Mission07_P2Mothership_DefendSelf(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	KAS_UnderAttack(TeamName, "GrowSelection_Attacking")    --kasfUnderAttack(kasGrowSelectionPtr("Attacking"))
	if (KAS_FillShipsByCapital("GrowSelection_Capital", "GrowSelection_Attacking") ~= 0) then     --kasfShipsSelectCapital(kasGrowSelectionPtr("Capital"), kasGrowSelectionPtr("Attacking"))
	
	CounterAttack[TeamName] = 1 --created,set
	KAS_Attack(TeamName, "GrowSelection_Capital")    --kasfAttack(kasGrowSelectionPtr("Capital"))
	end 
	if (WaveNum[TeamName] == 1) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer1WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "DefendMothership")
	elseif (WaveNum[TeamName] == 2) then 
	
	KAS_MessageSend(TeamName, "FuelPod1WAVE2", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("FuelPod1WAVE2"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer1WAVE2A", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2A"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer1WAVE2B", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2B"), "DefendMothership")
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 3) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer2WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "DefendMothership")
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 4) then 
	
	KAS_MessageSend(TeamName, "FuelPod2WAVE2", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2A", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer2WAVE2B", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "DefendMothership")
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	elseif (WaveNum[TeamName] == 5) then 
	
	KAS_MessageSend(TeamName, "FuelPod3WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "DefendMothership")
	KAS_MessageSend(TeamName, "Swarmer3WAVE1", "DefendMothership")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "DefendMothership")
	WaveNum[TeamName] = WaveNum[TeamName] + 1
	end 
	KASTimer_Start(DefenseTimer[TeamName], RandomIntRange(40, 100))    --kasfRandom(40, 100)
	
end 


--
--  "watch" code for Mission07 P2Mothership DefendSelf state
--
function Watch_Mission07_P2Mothership_DefendSelf(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(DefenseTimer[TeamName]) ~= 0) then 
	
	if (KAS_UnderAttack(TeamName, "GrowSelection_Attacking") ~= 0) then     --kasfUnderAttack(kasGrowSelectionPtr("Attacking"))
	
	KAS_SetSwarmerTargets(TeamName, "GrowSelection_Attacking")    --kasfSetSwarmerTargets(kasGrowSelectionPtr("Attacking"))
	end 
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_DefendSelf")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_DefendSelf")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	if (CounterAttack[TeamName] ~= 0 and (KAS_GetCurrentOrder(TeamName) ~= 2)) then     --kasfShipsOrder((&kasThisTeamPtr->shipList))
	
	if (KAS_UnderAttack(TeamName, "GrowSelection_Attacking") ~= 0 and KAS_FillShipsByCapital("GrowSelection_Capital", "GrowSelection_Attacking") ~= 0) then     --kasfShipsSelectCapital(kasGrowSelectionPtr("Capital"), kasGrowSelectionPtr("Attacking"))    --kasfUnderAttack(kasGrowSelectionPtr("Attacking"))
	
	KAS_Attack(TeamName, "GrowSelection_Capital")    --kasfAttack(kasGrowSelectionPtr("Capital"))
	else
	
	CounterAttack[TeamName] = 0 --destroyed
	end 
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership EndBattleDelay state
--
function Init_Mission07_P2Mothership_EndBattleDelay(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	KASTimer_Start(AttackTimer[TeamName], RandomIntRange(5, 20))    --kasfRandom(5, 20)
	
end 


--
--  "watch" code for Mission07 P2Mothership EndBattleDelay state
--
function Watch_Mission07_P2Mothership_EndBattleDelay(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(AttackTimer[TeamName]) ~= 0) then 
	
	--kasJump("EndBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_EndBattleDelay")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_EndBattle", "Watch_Mission07_P2Mothership_EndBattleDelay")
	Init_Mission07_P2Mothership_EndBattle(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership EndBattle state
--
function Init_Mission07_P2Mothership_EndBattle(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	KAS_MessageSend(TeamName, "FuelPod3WAVE2", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("FuelPod3WAVE2"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer3WAVE2A", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE2A"), "MothershipSwarm")
	KAS_MessageSend(TeamName, "Swarmer3WAVE2B", "MothershipSwarm")    --kasfMsgSend(kasAITeamPtr("Swarmer3WAVE2B"), "MothershipSwarm")
	KASTimer_Start(AttackTimer[TeamName], RandomIntRange(30, 60))    --kasfRandom(30, 60)
	FinalAssaultGone[TeamName] = 1 --created,set
	
end 


--
--  "watch" code for Mission07 P2Mothership EndBattle state
--
function Watch_Mission07_P2Mothership_EndBattle(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	if (KASTimer_IsExpiredIfSoDestroy(AttackTimer[TeamName]) ~= 0 and WaveNum[TeamName] < 6) then 
	
	--kasJump("MidBattle")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_EndBattle")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_MidBattle", "Watch_Mission07_P2Mothership_EndBattle")
	Init_Mission07_P2Mothership_MidBattle(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership GetOuttaHere state
--
function Init_Mission07_P2Mothership_GetOuttaHere(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	DodgingOrOuttaHere[TeamName] = 1 --created,set
	KAS_MessageSendToAll(TeamName, "DockNow")    --kasfMsgSendAll("DockNow")
	KASTimer_Start(BootIt[TeamName], 50)
	
end 


--
--  "watch" code for Mission07 P2Mothership GetOuttaHere state
--
function Watch_Mission07_P2Mothership_GetOuttaHere(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	NumSwarmers[TeamName] = KAS_FindPlayerShipsOfType("GrowSelection_Swarmers", "Swarmer", 1) --set    --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Swarmers"), "P2Swarmer")
	NumAdv[TeamName] = KAS_FindPlayerShipsOfType("GrowSelection_AdvSwarmers", "AdvancedSwarmer", 1) --set    --kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("AdvSwarmers"), "P2AdvanceSwarmer")
	if (((NumSwarmers[TeamName] == 0) and (NumAdv[TeamName] == 0)) or (KAS_TeamHealthLowest(TeamName) <= 8) or (KASTimer_IsExpiredIfSoDestroy(BootIt[TeamName]) ~= 0)) then     --kasfTeamHealthLowest()
	
	KAS_MessageSendToAll(TeamName, "P2MothershipBlowin")    --kasfMsgSendAll("P2MothershipBlowin")
	KAS_TeamHyperspaceOut(TeamName)    --kasfTeamHyperspaceOut()
	--kasJump("NullState")
	--KASRule_Remove("FSM_Mission07_P2Mothership", "Watch_Mission07_P2Mothership_GetOuttaHere")
	KASRule_Add(TeamName, "Watch_Mission07_P2Mothership_NullState", "Watch_Mission07_P2Mothership_GetOuttaHere")
	Init_Mission07_P2Mothership_NullState(TeamName)
	return
	end 
	
end 


--
--  "initialize" code for Mission07 P2Mothership NullState state
--
function Init_Mission07_P2Mothership_NullState(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	
end 


--
--  "watch" code for Mission07 P2Mothership NullState state
--
function Watch_Mission07_P2Mothership_NullState(TeamName)
	--FSM: FSM_Mission07_P2Mothership
	--TeamName = P2Mothership
	
end 


--
--  "initialize" code for Mission07 mission
--
function Init_Mission07(MissionName)
	--FSM: FSM_Mission07
	--MissionName = "Mission07"
	--kasFSMCreate("P2Mothership")
	KASRule_AddFSM("P2Mothership", "Watch_Mission07_P2Mothership", "Init_Mission07")
	Init_Mission07_P2Mothership("P2Mothership")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod1WAVE1", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod1WAVE1")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod1WAVE2", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod1WAVE2")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer1WAVE1", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer1WAVE1")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer1WAVE2A", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer1WAVE2A")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer1WAVE2B", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer1WAVE2B")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod2WAVE1", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod2WAVE1")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod2WAVE2", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod2WAVE2")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer2WAVE1", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer2WAVE1")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer2WAVE2A", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer2WAVE2A")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer2WAVE2B", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer2WAVE2B")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod3WAVE1", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod3WAVE1")
	--kasFSMCreate("PreAttackPod")
	KASRule_AddFSM("FuelPod3WAVE2", "Watch_Mission07_PreAttackPod", "Init_Mission07")
	Init_Mission07_PreAttackPod("FuelPod3WAVE2")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer3WAVE1", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer3WAVE1")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer3WAVE2A", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer3WAVE2A")
	--kasFSMCreate("PreAttackSwarm")
	KASRule_AddFSM("Swarmer3WAVE2B", "Watch_Mission07_PreAttackSwarm", "Init_Mission07")
	Init_Mission07_PreAttackSwarm("Swarmer3WAVE2B")
	--kasFSMCreate("Events")
	KASRule_AddFSM("Dummy1", "Watch_Mission07_Events", "Init_Mission07")
	Init_Mission07_Events("Dummy1")
	WorldStartRUs = Universe_GetWorldResources() --created,set    --kasfGetWorldResources()
	PreviousWorldRUs = Universe_GetWorldResources() --created,set    --kasfGetWorldResources()
	CurrentRUs = Universe_GetWorldResources() --created,set    --kasfGetWorldResources()
	G_HarvestedRUs = 0 --created,set
	KAS_SensorsWeirdness(160)    --kasfSensorsWeirdness(160)
	KAS_CampaignAutoSave(7, "$61369")    --kasfSaveLevel(7, LSTRING_LevelSave[strCurLanguage])
	
end 


--
--  "watch" code for Mission07 mission
--
function Watch_Mission07(MissionName)
	--FSM: FSM_Mission07
	--MissionName = "Mission07"
	CurrentRUs = Universe_GetWorldResources() --set    --kasfGetWorldResources()
	G_HarvestedRUs = G_HarvestedRUs + (PreviousWorldRUs - CurrentRUs) --set
	PreviousWorldRUs = CurrentRUs --set
	KAS_SensorsWeirdness((160 * CurrentRUs)/WorldStartRUs)    --kasfSensorsWeirdness((160 * ___KAS_SCOPED_VAR____CurrentRUs_) / ___KAS_SCOPED_VAR____WorldStartRUs_)
	if (_VIFONCE031 == 0 and (KAS_PlayerHasResearch(0, "CorvetteDrive") ~= 0)) then  -- "ifonce" #31    --kasfDoesPlayerHave("MassDrive10Kt")
	
	_VIFONCE031 = 1 --created,set;
	KAS_UnrestrictResearchOption(0, "CorvetteChassis")    --kasfAllowPlayerToResearch("Chassis2")
	end 
	if (_VIFONCE032 == 0 and ((KAS_PlayerHasResearch(0, "CorvetteChassis") ~= 0) and (SetMediumGuns == 0))) then  -- "ifonce" #32    --kasfDoesPlayerHave("Chassis2")
	
	_VIFONCE032 = 1 --created,set;
	KAS_UnrestrictResearchOption(0, "HeavyCorvetteUpgrade")    --kasfAllowPlayerToResearch("MediumGuns")
	SetMediumGuns = 1 --created,set
	end 
	if (_VIFONCE033 == 0 and (KAS_PlayerHasResearch(0, "FighterDrive") ~= 0)) then  -- "ifonce" #33    --kasfDoesPlayerHave("MassDrive1Kt")
	
	_VIFONCE033 = 1 --created,set;
	KAS_UnrestrictResearchOption(0, "CorvetteChassis")    --kasfAllowPlayerToResearch("Chassis2")
	end 
	if (_VIFONCE034 == 0 and (KAS_PlayerHasResearch(0, "SuperCapitalShipDrive") == 0)) then  -- "ifonce" #34    --kasfDoesPlayerHave("MassDrive1Mt")
	
	_VIFONCE034 = 1 --created,set;
	KASTimer_Start(TimerID_Tech1Mt, RandomIntRange(15, 25))    --kasfRandom(15, 25)
	end 
	if (KASTimer_IsExpiredIfSoDestroy(TimerID_Tech1Mt) ~= 0) then 
	
	KAS_SubtitleAddOnce(Actor_HW1_FleetIntel, "$60531", 3)    --kasfSpeechEvent((531 + 4096 + 268435456), 0)
	KAS_UnrestrictResearchOption(0, "SuperCapitalShipDrive")    --kasfAllowPlayerToResearch("MassDrive1Mt")
	end 
	
end 

function OnStartOrLoad()
    print("OnStartOrLoad issued")

    --Mission-global GrowSelections/SobGroups
    KASSobGroup_Create("GrowSelection_AdvSwarmers")
    KASSobGroup_Create("GrowSelection_Armed")
    KASSobGroup_Create("GrowSelection_Attackers")
    KASSobGroup_Create("GrowSelection_Attacking")
    KASSobGroup_Create("GrowSelection_Capital")
    KASSobGroup_Create("GrowSelection_Coll")
    KASSobGroup_Create("GrowSelection_Damaged")
    KASSobGroup_Create("GrowSelection_DefendMothership")
    KASSobGroup_Create("GrowSelection_Defenders")
    KASSobGroup_Create("GrowSelection_DockShips")
    KASSobGroup_Create("GrowSelection_Field")
    KASSobGroup_Create("GrowSelection_GenericSwarmers")
    KASSobGroup_Create("GrowSelection_Invaders")
    KASSobGroup_Create("GrowSelection_Moship")
    KASSobGroup_Create("GrowSelection_MothershipSwarm")
    KASSobGroup_Create("GrowSelection_Move")
    KASSobGroup_Create("GrowSelection_NISTargetShips")
    KASSobGroup_Create("GrowSelection_PartyPoopers")
    KASSobGroup_Create("GrowSelection_Pods")
    KASSobGroup_Create("GrowSelection_Resource")
    KASSobGroup_Create("GrowSelection_ResourceDefSwarm")
    KASSobGroup_Create("GrowSelection_ResourcerSwarm")
    KASSobGroup_Create("GrowSelection_Stuff")
    KASSobGroup_Create("GrowSelection_Swarmers")
    KASSobGroup_Create("GrowSelection_Targets")
    KASSobGroup_Create("GrowSelection_Temp")
    KASSobGroup_Create("GrowSelection_Temp1")
    KASSobGroup_Create("GrowSelection_Temp2")
    KASSobGroup_Create("GrowSelection_Test")
    KASSobGroup_Create("GrowSelection_YourDeadNow")
    KASSobGroup_CreateIfNotExist("Dummy1")
    KASSobGroup_CreateIfNotExist("FuelPod1WAVE1")
    KASSobGroup_CreateIfNotExist("FuelPod1WAVE2")
    KASSobGroup_CreateIfNotExist("FuelPod2WAVE1")
    KASSobGroup_CreateIfNotExist("FuelPod2WAVE2")
    KASSobGroup_CreateIfNotExist("FuelPod3WAVE1")
    KASSobGroup_CreateIfNotExist("FuelPod3WAVE2")
    KASSobGroup_CreateIfNotExist("NISTeam1")
    KASSobGroup_CreateIfNotExist("NISTeam2")
    KASSobGroup_CreateIfNotExist("NISTeam3")
    KASSobGroup_CreateIfNotExist("P2Mothership")
    KASSobGroup_CreateIfNotExist("Swarmer1WAVE1")
    KASSobGroup_CreateIfNotExist("Swarmer1WAVE2A")
    KASSobGroup_CreateIfNotExist("Swarmer1WAVE2B")
    KASSobGroup_CreateIfNotExist("Swarmer2WAVE1")
    KASSobGroup_CreateIfNotExist("Swarmer2WAVE2A")
    KASSobGroup_CreateIfNotExist("Swarmer2WAVE2B")
    KASSobGroup_CreateIfNotExist("Swarmer3WAVE1")
    KASSobGroup_CreateIfNotExist("Swarmer3WAVE2A")
    KASSobGroup_CreateIfNotExist("Swarmer3WAVE2B")

    Sound_SpeechSubtitlePath("speech:missions/Mission07/")
    Scar_TracesEnable("SGAction, SGQuery, Camera, ATI, Player")

    LCWatcher_SpecifyLocalFilter(LC_Scar, "_VIFONCE;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;Dummy1;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;NISTeam1;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;NISTeam2;NISTeam3;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;P2Mothership;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;FuelPod1WAVE1;FuelPod1WAVE2;FuelPod2WAVE1;FuelPod2WAVE2;FuelPod3WAVE1;FuelPod3WAVE2;NISTeam2;NISTeam3;Swarmer1WAVE1;Swarmer1WAVE2A;Swarmer1WAVE2B;Swarmer2WAVE1;Swarmer2WAVE2A;Swarmer2WAVE2B;Swarmer3WAVE1;Swarmer3WAVE2A;Swarmer3WAVE2B;")
    KAS_SetColourSchemeColours(1, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Kadesh.tga", {0.921,0.75,0.419}, "data:/effect/trails/kad_trail_clr.tga")
    KAS_SetColourSchemeColours(6, {1,0.501960784313725,0}, {1, 0, 1}, "DATA:Badges/Kadesh.tga", {0.8,0,0.8}, "data:/effect/trails/kad_trail_clr.tga")
    Player_SetTeamColourTheme(1, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Kadesh.tga", {0.921,0.75,0.419}, "data:/effect/trails/kad_trail_clr.tga")
    Player_SetTeamColourTheme(3, {1,0.823529411764706,0}, {1, 0, 0}, "DATA:Badges/Kadesh.tga", {0.921,0.75,0.419}, "data:/effect/trails/kad_trail_clr.tga")
    KAS_SetColourScheme("FuelPod1WAVE1", 1)
    KAS_SetColourScheme("FuelPod1WAVE2", 1)
    KAS_SetColourScheme("FuelPod2WAVE1", 1)
    KAS_SetColourScheme("FuelPod2WAVE2", 1)
    KAS_SetColourScheme("FuelPod3WAVE1", 1)
    KAS_SetColourScheme("FuelPod3WAVE2", 1)
    KAS_SetColourScheme("P2Mothership", 1)
    KAS_SetColourScheme("Swarmer1WAVE1", 1)
    KAS_SetColourScheme("Swarmer1WAVE2A", 6)
    KAS_SetColourScheme("Swarmer1WAVE2B", 1)
    KAS_SetColourScheme("Swarmer2WAVE1", 1)
    KAS_SetColourScheme("Swarmer2WAVE2A", 6)
    KAS_SetColourScheme("Swarmer2WAVE2B", 1)
    KAS_SetColourScheme("Swarmer3WAVE1", 1)
    KAS_SetColourScheme("Swarmer3WAVE2A", 6)
    KAS_SetColourScheme("Swarmer3WAVE2B", 1)
    Player_SetPlayerName(1, "$60560")
    Player_SetPlayerName(3, "$60560")

    singlePlayerOnStartOrLoad(07)
end

function OnInit()
    print("OnInit issued")

    Player_RestrictAllResearch(0, 1)
    SobGroup_LoadPersistantData("Kus_Mothership")
    Camera_Interpolate('here', 'Camera_Startpos', 0)
    KAS_RememberStartingRUs()
    singlePlayerStartGame(07)
    KAS_CPUPlayerInit()

    KASRule_Add("Mission07", "Watch_Mission07", "OnInit")
    Init_Mission07("Mission07")
    KAS_SetLetterboxStart(1, 24, 0, 0)
    singlePlayerPauseUntilHyperspaceComplete("OnInit_Finish()")
	HW2_ReactiveInfo() --Added for info in log file
end

function OnInit_Finish()
    print("OnInit_Finish issued")

    KAS_MusicPlayType( "data:sound/music/ambient/A06_mission7and8", MUS_Ambient )
    KAS_SetFormation("FuelPod1WAVE1", "Broad")
    KAS_SetFormation("FuelPod1WAVE2", "Delta")
    KAS_SetFormation("FuelPod2WAVE1", "Delta")
    KAS_SetFormation("FuelPod2WAVE2", "Delta")
    KAS_SetFormation("FuelPod3WAVE1", "Delta")
    KAS_SetFormation("FuelPod3WAVE2", "Delta")
    KAS_SetFormation("Swarmer1WAVE1", "Delta")
    KAS_SetFormation("Swarmer1WAVE2A", "Delta")
    KAS_SetFormation("Swarmer1WAVE2B", "Delta")
    KAS_SetFormation("Swarmer2WAVE1", "Delta")
    KAS_SetFormation("Swarmer2WAVE2B", "Delta")
    KAS_SetFormation("Swarmer3WAVE1", "Delta")
    KAS_SetFormation("Swarmer3WAVE2A", "Delta")
    KAS_SetFormation("Swarmer3WAVE2B", "Delta")
end

